var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function i(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let s,a;function u(t,e){return s||(s=document.createElement("a")),s.href=e,t===s.href}function c(t,e){t.appendChild(e)}function h(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function p(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function d(t){return document.createTextNode(t)}function v(){return d(" ")}function g(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function m(t){return function(e){return e.preventDefault(),t.call(this,e)}}function y(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function w(t){a=t}function I(){const t=function(){if(!a)throw new Error("Function called outside component initialization");return a}();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const i=function(t,e,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,!1,e),r}(e,n);r.slice().forEach((e=>{e.call(t,i)}))}}}const T=[],E=[],S=[],_=[],A=Promise.resolve();let N=!1;function k(t){S.push(t)}let D=!1;const C=new Set;function O(){if(!D){D=!0;do{for(let t=0;t<T.length;t+=1){const e=T[t];w(e),R(e.$$)}for(w(null),T.length=0;E.length;)E.pop()();for(let t=0;t<S.length;t+=1){const e=S[t];C.has(e)||(C.add(e),e())}S.length=0}while(T.length);for(;_.length;)_.pop()();N=!1,D=!1,C.clear()}}function R(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(k)}}const P=new Set;let x;function L(){x={r:0,c:[],p:x}}function M(){x.r||r(x.c),x=x.p}function F(t,e){t&&t.i&&(P.delete(t),t.i(e))}function V(t,e,n,r){if(t&&t.o){if(P.has(t))return;P.add(t),x.c.push((()=>{P.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function U(t){t&&t.c()}function j(t,n,o,s){const{fragment:a,on_mount:u,on_destroy:c,after_update:h}=t.$$;a&&a.m(n,o),s||k((()=>{const n=u.map(e).filter(i);c?c.push(...n):r(n),t.$$.on_mount=[]})),h.forEach(k)}function q(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function B(t,e){-1===t.$$.dirty[0]&&(T.push(t),N||(N=!0,A.then(O)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(e,i,o,s,u,c,h,f=[-1]){const p=a;w(e);const d=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(p?p.$$.context:i.context||[]),callbacks:n(),dirty:f,skip_bound:!1,root:i.target||p.$$.root};h&&h(d.root);let v=!1;if(d.ctx=o?o(e,i.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return d.ctx&&u(d.ctx[t],d.ctx[t]=i)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](i),v&&B(e,t)),n})):[],d.update(),v=!0,r(d.before_update),d.fragment=!!s&&s(d.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);d.fragment&&d.fragment.l(t),t.forEach(l)}else d.fragment&&d.fragment.c();i.intro&&F(e.$$.fragment),j(e,i.target,i.anchor,i.customElement),O()}w(p)}class G{$destroy(){q(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function H(e){let n,r;return{c(){n=p("svg"),r=p("path"),y(r,"stroke-linecap","round"),y(r,"stroke-linejoin","round"),y(r,"stroke-width","2"),y(r,"d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"),y(n,"width","100%"),y(n,"height","100%"),y(n,"viewBox","0 0 24 24"),y(n,"fill","none"),y(n,"stroke","currentColor"),y(n,"xmlns","http://www.w3.org/2000/svg")},m(t,e){h(t,n,e),c(n,r)},p:t,i:t,o:t,d(t){t&&l(n)}}}class z extends G{constructor(t){super(),K(this,t,null,H,o,{})}}function W(e){let n,r,i,o,s,a,u,p;return i=new z({}),{c(){n=f("div"),r=f("div"),U(i.$$.fragment),o=v(),s=f("div"),s.textContent="Bu Cihaza Yükle",y(r,"class","icon svelte-sj7h7y"),y(s,"class","text svelte-sj7h7y"),y(n,"class","install svelte-sj7h7y")},m(t,l){h(t,n,l),c(n,r),j(i,r,null),c(n,o),c(n,s),a=!0,u||(p=g(n,"click",e[2]),u=!0)},p:t,i(t){a||(F(i.$$.fragment,t),a=!0)},o(t){V(i.$$.fragment,t),a=!1},d(t){t&&l(n),q(i),u=!1,p()}}}function $(t){let e,n,i,o,s=t[0]&&W(t);return{c(){s&&s.c(),e=d("")},m(r,a){s&&s.m(r,a),h(r,e,a),n=!0,i||(o=[g(window,"beforeinstallprompt",m(t[1])),g(window,"appinstalled",m(t[3]))],i=!0)},p(t,[n]){t[0]?s?(s.p(t,n),1&n&&F(s,1)):(s=W(t),s.c(),F(s,1),s.m(e.parentNode,e)):s&&(L(),V(s,1,1,(()=>{s=null})),M())},i(t){n||(F(s),n=!0)},o(t){V(s),n=!1},d(t){s&&s.d(t),t&&l(e),i=!1,r(o)}}}function Q(t,e,n){let r,i=!1;return[i,t=>{r=t,n(0,i=!0)},()=>{n(0,i=!1),r.prompt(),r.userChoice.then((t=>{"accepted"===t.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),r=null})).catch(console.error)},t=>{r=null,console.log("PWA was installed"),Notification.requestPermission().then((t=>{if("granted"===t){setTimeout((()=>{new Notification("Selam, hoşgeldin!",{body:"Seni aramızda gördüğümüz için çok mutluyuz :)",icon:"https://lh3.googleusercontent.com/a-/AOh14GgwHbcIDMRINoI2KnC2-x_DUAFtPPPGc4Ac_PrnVg=s96-c"})}),3e3)}}))}]}class X extends G{constructor(t){super(),K(this,t,Q,$,o,{})}}function Y(e){let n,r,i,o,s,a;return{c(){n=p("svg"),r=p("g"),i=p("path"),o=p("path"),s=p("path"),a=p("path"),y(i,"fill","#4285F4"),y(i,"d","M -3.264 51.509 C -3.264 50.719 -3.334 49.969 -3.454 49.239 L -14.754 49.239 L -14.754 53.749 L -8.284 53.749 C -8.574 55.229 -9.424 56.479 -10.684 57.329 L -10.684 60.329 L -6.824 60.329 C -4.564 58.239 -3.264 55.159 -3.264 51.509 Z"),y(o,"fill","#34A853"),y(o,"d","M -14.754 63.239 C -11.514 63.239 -8.804 62.159 -6.824 60.329 L -10.684 57.329 C -11.764 58.049 -13.134 58.489 -14.754 58.489 C -17.884 58.489 -20.534 56.379 -21.484 53.529 L -25.464 53.529 L -25.464 56.619 C -23.494 60.539 -19.444 63.239 -14.754 63.239 Z"),y(s,"fill","#FBBC05"),y(s,"d","M -21.484 53.529 C -21.734 52.809 -21.864 52.039 -21.864 51.239 C -21.864 50.439 -21.724 49.669 -21.484 48.949 L -21.484 45.859 L -25.464 45.859 C -26.284 47.479 -26.754 49.299 -26.754 51.239 C -26.754 53.179 -26.284 54.999 -25.464 56.619 L -21.484 53.529 Z"),y(a,"fill","#EA4335"),y(a,"d","M -14.754 43.989 C -12.984 43.989 -11.404 44.599 -10.154 45.789 L -6.734 42.369 C -8.804 40.429 -11.514 39.239 -14.754 39.239 C -19.444 39.239 -23.494 41.939 -25.464 45.859 L -21.484 48.949 C -20.534 46.099 -17.884 43.989 -14.754 43.989 Z"),y(r,"transform","matrix(1, 0, 0, 1, 27.009001, -39.238998)"),y(n,"width","100%"),y(n,"height","100%"),y(n,"viewBox","0 0 24 24"),y(n,"fill","none"),y(n,"stroke","none"),y(n,"xmlns","http://www.w3.org/2000/svg")},m(t,e){h(t,n,e),c(n,r),c(r,i),c(r,o),c(r,s),c(r,a)},p:t,i:t,o:t,d(t){t&&l(n)}}}class J extends G{constructor(t){super(),K(this,t,null,Y,o,{})}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var Z=function(t,e){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function tt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Z(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var et=function(){return(et=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function nt(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function rt(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function it(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ot(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function st(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var at={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var h=s<<4&240|a>>2;if(r.push(h),64!==u){var l=a<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function ut(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=ut(t[n],e[n]));return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ct=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function ht(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function lt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ft=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,pt.prototype.create),o}return tt(e,t),e}(Error),pt=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?dt(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new ft(i,a,r);return u},t}();function dt(t,e){return t.replace(vt,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var vt=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function gt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function mt(t,e){var n=new yt(t,e);return n.subscribe.bind(n)}var yt=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=bt),void 0===r.error&&(r.error=bt),void 0===r.complete&&(r.complete=bt);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function bt(){}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function wt(t){return t&&t._delegate?t._delegate:t}var It=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),Tt="[DEFAULT]",Et=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new ct;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t))try{this.getOrInitializeService({instanceIdentifier:Tt})}catch(t){}try{for(var r=it(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=ot(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=Tt),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return nt(this,void 0,void 0,(function(){var t;return rt(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(st(st([],ot(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),ot(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=Tt),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var a=it(this.instancesDeferred.entries()),u=a.next();!u.done;u=a.next()){var c=ot(u.value,2),h=c[0],l=c[1];o===this.normalizeInstanceIdentifier(h)&&l.resolve(s)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=it(i),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===Tt?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(t){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=Tt),this.component?this.component.multipleInstances?t:Tt:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var St,_t=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Et(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function At(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Nt,kt=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Nt||(Nt={}));var Dt,Ct={debug:Nt.DEBUG,verbose:Nt.VERBOSE,info:Nt.INFO,warn:Nt.WARN,error:Nt.ERROR,silent:Nt.SILENT},Ot=Nt.INFO,Rt=((St={})[Nt.DEBUG]="log",St[Nt.VERBOSE]="log",St[Nt.INFO]="info",St[Nt.WARN]="warn",St[Nt.ERROR]="error",St),Pt=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Rt[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,At(["["+i+"]  "+t.name+":"],n))}},xt=function(){function t(t){this.name=t,this._logLevel=Ot,this._logHandler=Pt,this._userLogHandler=null,kt.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Nt))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Ct[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,At([this,Nt.DEBUG],t)),this._logHandler.apply(this,At([this,Nt.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,At([this,Nt.VERBOSE],t)),this._logHandler.apply(this,At([this,Nt.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,At([this,Nt.INFO],t)),this._logHandler.apply(this,At([this,Nt.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,At([this,Nt.WARN],t)),this._logHandler.apply(this,At([this,Nt.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,At([this,Nt.ERROR],t)),this._logHandler.apply(this,At([this,Nt.ERROR],t))},t}();function Lt(t){kt.forEach((function(e){e.setLogLevel(t)}))}var Mt,Ft=((Dt={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Dt["bad-app-name"]="Illegal App name: '{$appName}",Dt["duplicate-app"]="Firebase App named '{$appName}' already exists",Dt["app-deleted"]="Firebase App named '{$appName}' already deleted",Dt["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Dt["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Dt),Vt=new pt("app","Firebase",Ft),Ut="@firebase/app",jt="[DEFAULT]",qt=((Mt={})[Ut]="fire-core",Mt["@firebase/analytics"]="fire-analytics",Mt["@firebase/app-check"]="fire-app-check",Mt["@firebase/auth"]="fire-auth",Mt["@firebase/database"]="fire-rtdb",Mt["@firebase/functions"]="fire-fn",Mt["@firebase/installations"]="fire-iid",Mt["@firebase/messaging"]="fire-fcm",Mt["@firebase/performance"]="fire-perf",Mt["@firebase/remote-config"]="fire-rc",Mt["@firebase/storage"]="fire-gcs",Mt["@firebase/firestore"]="fire-fst",Mt["fire-js"]="fire-js",Mt["firebase-wrapper"]="fire-js-all",Mt),Bt=new xt("@firebase/app"),Kt=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=ut(void 0,t),this.container=new _t(e.name),this._addComponent(new It("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=jt),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=jt),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){Bt.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Vt.create("app-deleted",{appName:this.name_})},t}();Kt.prototype.name&&Kt.prototype.options||Kt.prototype.delete||console.log("dc");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Gt(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=jt);var s=o.name;if("string"!=typeof s||!s)throw Vt.create("bad-app-name",{appName:String(s)});if(gt(e,s))throw Vt.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=qt[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Bt.warn(u.join(" "))}o(new It(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:Lt,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Vt.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=Ct[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Nt[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=kt;r<i.length;r++)n(i[r])}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e)},apps:null,SDK_VERSION:"8.8.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!gt(e,t=t||jt))throw Vt.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return Bt.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var a=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw Vt.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&ut(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var h=c[u];e[h]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ht=function t(){var e=Gt(Kt);return e.INTERNAL=et(et({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){ut(e,t)},createSubscribe:mt,ErrorFactory:pt,deepExtend:ut}),e}(),zt=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Bt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Wt=self.firebase.SDK_VERSION;Wt&&Wt.indexOf("LITE")>=0&&Bt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var $t=Ht.initializeApp;Ht.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return lt()&&Bt.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),$t.apply(void 0,t)};var Qt=Ht;!function(t,e){t.INTERNAL.registerComponent(new It("platform-logger",(function(t){return new zt(t)}),"PRIVATE")),t.registerVersion(Ut,"0.6.29",e),t.registerVersion("fire-js","")}(Qt);var Xt="8.9.1";
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
Qt.registerVersion("firebase",Xt,"app"),Qt.SDK_VERSION=Xt,function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),s=r.next();!s.done;s=r.next())o(s.value).Ra(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){function i(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,o(r.value).Ra(i(s.length-1),e),r=n.next()}while(!r.done)}))},e}));var o=o||{},s=this||self,a=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&a.test(t)?t:""}function h(){}function l(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==l(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),g=0;function m(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:y).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function I(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function T(t){return t}function E(t,e,n){this.code=A+t,this.message=e||N[t]||"",this.a=n||null}function S(t){var e=t&&t.code;return e?new E(e.substring(A.length),t.message,t.serverResponse):null}I(E,Error),E.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},E.prototype.toJSON=function(){return this.w()};var _,A="auth/",N={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},k={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function D(t){for(var e in k)if(k[e].id===t)return{firebaseEndpoint:(t=k[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function C(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function O(t){if(Error.captureStackTrace)Error.captureStackTrace(this,O);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function R(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");O.call(this,n+t[r])}function P(t,e){throw new R("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function x(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function M(){this.b=this.a=null}_=D("__EID__")?"__EID__":void 0,I(O,Error),O.prototype.name="CustomError",I(R,O),R.prototype.name="AssertionError",x.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var F=new x((function(){return new U}),(function(t){t.reset()}));function V(){var t=ye,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function U(){this.next=this.b=this.a=null}M.prototype.add=function(t,e){var n=F.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},U.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},U.prototype.reset=function(){this.next=this.b=this.a=null};var j=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},q=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var B=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},K=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},G=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function H(t,e){return 0<=j(t,e)}function z(t,e){var n;return(n=0<=(e=j(t,e)))&&Array.prototype.splice.call(t,e,1),n}function W(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function $(t){return Array.prototype.concat.apply([],arguments)}function Q(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var X,Y=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},J=/&/g,Z=/</g,tt=/>/g,et=/"/g,nt=/'/g,rt=/\x00/g,it=/[\x00&<>"']/;function ot(t,e){return-1!=t.indexOf(e)}function st(t,e){return t<e?-1:t>e?1:0}t:{var at=s.navigator;if(at){var ut=at.userAgent;if(ut){X=ut;break t}}X=""}function ct(t){return ot(X,t)}function ht(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function lt(t){for(var e in t)return!1;return!0}function ft(t){var e,n={};for(e in t)n[e]=t[e];return n}var pt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<pt.length;o++)n=pt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(d(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;P("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function gt(t,e){this.a=t===wt&&e||"",this.b=bt}function mt(t){return t instanceof gt&&t.constructor===gt&&t.b===bt?t.a:(P("expected object of type Const, got '"+t+"'"),"type_error:Const")}gt.prototype.ta=!0,gt.prototype.sa=function(){return this.a},gt.prototype.toString=function(){return"Const{"+this.a+"}"};var yt,bt={},wt={};function It(){if(void 0===yt){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:T,createScript:T,createScriptURL:T})}catch(t){s.console&&s.console.error(t.message)}yt=t}else yt=t}return yt}function Tt(t,e){this.a=e===Nt?t:""}function Et(t){return t instanceof Tt&&t.constructor===Tt?t.a:(P("expected object of type TrustedResourceUrl, got '"+t+"' of type "+l(t)),"type_error:TrustedResourceUrl")}function St(t,e){var n=mt(t);if(!At.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=It();return new Tt(t=e?e.createScriptURL(t):t,Nt)}(t=n.replace(_t,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof gt?mt(t):encodeURIComponent(String(t))})))}Tt.prototype.ta=!0,Tt.prototype.sa=function(){return this.a.toString()},Tt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var _t=/%{(\w+)}/g,At=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Nt={};function kt(t,e){this.a=e===Lt?t:""}function Dt(t){return t instanceof kt&&t.constructor===kt?t.a:(P("expected object of type SafeUrl, got '"+t+"' of type "+l(t)),"type_error:SafeUrl")}kt.prototype.ta=!0,kt.prototype.sa=function(){return this.a.toString()},kt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ct=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Ot=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Rt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Pt(t){if(t instanceof kt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),Rt.test(t))t=new kt(t,Lt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Ot);t=e&&Ct.test(e[1])?new kt(t,Lt):null}return t}function xt(t){return t instanceof kt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),Rt.test(t)||(t="about:invalid#zClosurez"),new kt(t,Lt))}var Lt={},Mt=new kt("about:invalid#zClosurez",Lt);function Ft(t,e,n){this.a=n===Vt?t:""}Ft.prototype.ta=!0,Ft.prototype.sa=function(){return this.a.toString()},Ft.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Vt={};function Ut(t,e,n,r){return t=t instanceof kt?t:xt(t),e=e||s,n=n instanceof gt?mt(n):n||"",e.open(Dt(t),n,r,void 0)}function jt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function qt(t){return it.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(J,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Z,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(tt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(et,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(nt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(rt,"&#0;"))),t}function Bt(t){return Bt[" "](t),t}Bt[" "]=h;var Kt,Gt,Ht=ct("Opera"),zt=ct("Trident")||ct("MSIE"),Wt=ct("Edge"),$t=Wt||zt,Xt=ct("Gecko")&&!(ot(X.toLowerCase(),"webkit")&&!ct("Edge"))&&!(ct("Trident")||ct("MSIE"))&&!ct("Edge"),Yt=ot(X.toLowerCase(),"webkit")&&!ct("Edge");function Jt(){var t=s.document;return t?t.documentMode:void 0}t:{var Zt="",te=(Gt=X,Xt?/rv:([^\);]+)(\)|;)/.exec(Gt):Wt?/Edge\/([\d\.]+)/.exec(Gt):zt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Gt):Yt?/WebKit\/(\S+)/.exec(Gt):Ht?/(?:Version)[ \/]?(\S+)/.exec(Gt):void 0);if(te&&(Zt=te?te[1]:""),zt){var ee=Jt();if(null!=ee&&ee>parseFloat(Zt)){Kt=String(ee);break t}}Kt=Zt}var ne,re={};function ie(t){return function(t,e){var n=re;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=Y(String(Kt)).split("."),r=Y(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=st(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||st(0==s[2].length,0==a[2].length)||st(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(s.document&&zt){var oe=Jt();ne=oe||(parseInt(Kt,10)||void 0)}else ne=void 0;var se=ne;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Gt){}var ae=!zt||9<=Number(se);function ue(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ce(t,e){ht(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:fe.hasOwnProperty(n)?t.setAttribute(fe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var he,le,fe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function pe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||d(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(d(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){s="function"==typeof o.item;break t}}s=!1}q(s?Q(o):o,r)}}}function de(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ve(t){s.setTimeout((function(){throw t}),0)}function ge(t,e){le||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);le=function(){t.then(be)}}else le=function(){var t=be;!p(s.setImmediate)||s.Window&&s.Window.prototype&&!ct("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(he||(he=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ct("Presto")&&(t=function(){var t=de(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ct("Trident")&&!ct("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),he(t)):s.setImmediate(t)}}(),me||(le(),me=!0),ye.add(t,e)}var me=!1,ye=new M;function be(){for(var t;t=V();){try{t.a.call(t.b)}catch(t){ve(t)}L(F,t)}me=!1}function we(t,e){if(this.a=Ie,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,(function(t){xe(n,Te,t)}),(function(t){if(!(t instanceof qe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}xe(n,Ee,t)}))}catch(t){xe(this,Ee,t)}}var Ie=0,Te=2,Ee=3;function Se(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Se.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var _e=new x((function(){return new Se}),(function(t){t.reset()}));function Ae(t,e,n){var r=_e.get();return r.g=t,r.b=e,r.f=n,r}function Ne(t){if(t instanceof we)return t;var e=new we(h);return xe(e,Te,t),e}function ke(t){return new we((function(e,n){n(t)}))}function De(t,e,n){Le(t,e,n,null)||ge(w(e,t))}function Ce(t){return new we((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)De(t[o],w(i,o,!0),w(i,o,!1));else e(r)}))}function Oe(t,e){if(t.a==Ie)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==Ie&&1==r?Oe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Fe(n),Ve(n,i,Ee,e)))}t.c=null}else xe(t,Ee,e)}function Re(t,e){t.b||t.a!=Te&&t.a!=Ee||Me(t),t.f?t.f.next=e:t.b=e,t.f=e}function Pe(t,e,n,r){var i=Ae(null,null,null);return i.a=new we((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof qe?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Re(t,i),i.a}function xe(t,e,n){t.a==Ie&&(t===n&&(e=Ee,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Le(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Me(t),e!=Ee||n instanceof qe||function(t,e){t.g=!0,ge((function(){t.g&&je.call(null,e)}))}(t,n)))}function Le(t,e,n,r){if(t instanceof we)return Re(t,Ae(e||h,n||null,r)),!0;if(C(t))return t.then(e,n,r),!0;if(d(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}function s(t){a||(a=!0,n.call(i,t))}var a=!1;try{e.call(t,s,o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Me(t){t.h||(t.h=!0,ge(t.gc,t))}function Fe(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ve(t,e,n,r){if(n==Ee&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ue(e,n,r);else try{e.c?e.g.call(e.f):Ue(e,n,r)}catch(t){je.call(null,t)}L(_e,e)}function Ue(t,e,n){e==Te?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}we.prototype.then=function(t,e,n){return Pe(this,p(t)?t:null,p(e)?e:null,n)},we.prototype.$goog_Thenable=!0,(t=we.prototype).oa=function(t,e){return(t=Ae(t,t,e)).c=!0,Re(this,t),this},t.o=function(t,e){return Pe(this,null,t,e)},t.cancel=function(t){if(this.a==Ie){var e=new qe(t);ge((function(){Oe(this,e)}),this)}},t.$c=function(t){this.a=Ie,xe(this,Te,t)},t.ad=function(t){this.a=Ie,xe(this,Ee,t)},t.gc=function(){for(var t;t=Fe(this);)Ve(this,t,this.a,this.i);this.h=!1};var je=ve;function qe(t){O.call(this,t)}function Be(){this.ya=this.ya,this.pa=this.pa}I(qe,O),qe.prototype.name="cancel";var Ke={};function Ge(t){if(!t.ya&&(t.ya=!0,t.Da(),0)){var e=function(t){return Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++g)}(t);delete Ke[e]}}Be.prototype.ya=!1,Be.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var He=Object.freeze||function(t){return t},ze=!zt||9<=Number(se),We=zt&&!ie("9"),$e=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",h,e),s.removeEventListener("test",h,e)}catch(t){}return t}();function Qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Xe(t,e){if(Qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Xt){t:{try{Bt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ye[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Qe.prototype.preventDefault=function(){this.defaultPrevented=!0},I(Xe,Qe);var Ye=He({2:"touch",3:"pen",4:"mouse"});Xe.prototype.preventDefault=function(){Xe.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,We)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Xe.prototype.g=function(){return this.a};var Je="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function tn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++Ze,this.wa=this.Qa=!1}function en(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&z(t.a[n],e)&&(en(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=on(t,e,r,i);return-1<s?(e=t[s],n||(e.Qa=!1)):((e=new tn(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var sn="closure_lm_"+(1e6*Math.random()|0),an={};function un(t,e,n,r,i){if(r&&r.once)hn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=bn(n),t&&t[Je]?In(t,e,n,d(r)?!!r.capture:!!r,i):cn(t,e,n,!1,r,i)}function cn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=d(i)?!!i.capture:!!i,a=mn(t);if(a||(t[sn]=a=new nn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=gn,e=ze?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)$e||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=bn(n),t&&t[Je]?Tn(t,e,n,d(r)?!!r.capture:!!r,i):cn(t,e,n,!0,r,i)}function ln(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=bn(n),t&&t[Je]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=on(o=t.a[e],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=mn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.wa){var e=t.src;if(e&&e[Je])rn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=mn(e))?(rn(n,t),0==n.b&&(n.src=null,e[sn]=null)):en(t)}}}function pn(t){return t in an?an[t]:an[t]="on"+t}function dn(t,e,n,r){var i=!0;if((t=mn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=vn(o,r),i=i&&!1!==o)}return i}function vn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&fn(t),n.call(r,e)}function gn(t,e){if(t.wa)return!0;if(!ze){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Xe(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=dn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=dn(r[i],t,!1,e),n=n&&o}return n}return vn(t,new Xe(e,this))}function mn(t){return(t=t[sn])instanceof nn?t:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(t){return p(t)?t:(t[yn]||(t[yn]=function(e){return t.handleEvent(e)}),t[yn])}function wn(){Be.call(this),this.v=new nn(this),this.bc=this,this.hb=null}function In(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Tn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function En(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.wa&&s.capture==n){var a=s.listener,u=s.Wa||s.src;s.Qa&&rn(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function Sn(t,e,n){if(p(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function _n(t){var e=null;return new we((function(n,r){-1==(e=Sn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw s.clearTimeout(e),t}))}function An(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Nn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function kn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof kn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Dn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Cn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Cn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Cn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}I(wn,Be),wn.prototype[Je]=!0,wn.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},wn.prototype.removeEventListener=function(t,e,n,r){ln(this,t,e,n,r)},wn.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"==typeof t)t=new Qe(t,n);else if(t instanceof Qe)t.target=t.target||n;else{var i=t;dt(t=new Qe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=En(s,r,!0,t)&&i}if(i=En(s=t.b=n,r,!0,t)&&i,i=En(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=En(s=t.b=e[o],r,!1,t)&&i;return i},wn.prototype.Da=function(){if(wn.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)en(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=kn.prototype).X=function(){Dn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Dn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Cn(this.b,t)?this.b[t]:e},t.set=function(t,e){Cn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var On=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Rn?(this.i=void 0!==e?e:t.i,Pn(this,t.c),this.l=t.l,this.a=t.a,xn(this,t.g),this.f=t.f,Ln(this,tr(t.b)),this.h=t.h):t&&(n=String(t).match(On))?(this.i=!!e,Pn(this,n[1]||"",!0),this.l=jn(n[2]||""),this.a=jn(n[3]||"",!0),xn(this,n[4]),this.f=jn(n[5]||"",!0),Ln(this,n[6]||"",!0),this.h=jn(n[7]||"")):(this.i=!!e,this.b=new $n(null,this.i))}function Pn(t,e,n){t.c=n?jn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function xn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Ln(t,e,n){e instanceof $n?(t.b=e,function(t,e){e&&!t.f&&(Qn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Yn(this,e),Zn(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=qn(e,zn)),t.b=new $n(e,t.i))}function Mn(t,e,n){t.b.set(e,n)}function Fn(t,e){return t.b.get(e)}function Vn(t){return t instanceof Rn?new Rn(t):new Rn(t,void 0)}function Un(t,e,n,r){var i=new Rn(null,void 0);return t&&Pn(i,t),e&&(i.a=e),n&&xn(i,n),r&&(i.f=r),i}function jn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Bn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Bn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Rn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(qn(e,Kn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(qn(e,Kn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(qn(n,"/"==n.charAt(0)?Hn:Gn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",qn(n,Wn)),t.join("")},Rn.prototype.resolve=function(t){var e=new Rn(this),n=!!t.c;n?Pn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)xn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ot(i,"./")||ot(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Ln(e,tr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Kn=/[#\/\?@]/g,Gn=/[#\?:]/g,Hn=/[#\?]/g,zn=/[#\?@]/g,Wn=/#/g;function $n(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qn(t){t.a||(t.a=new kn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xn(t){var e=Nn(t);if(void 0===e)throw Error("Keys are undefined");var n=new $n(null,void 0);t=An(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Zn(n,i,o):n.add(i,o)}return n}function Yn(t,e){Qn(t),e=er(t,e),Cn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Cn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Dn(t)))}function Jn(t,e){return Qn(t),e=er(t,e),Cn(t.a.b,e)}function Zn(t,e,n){Yn(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),Q(n)),t.b+=n.length)}function tr(t){var e=new $n;return e.c=t.c,t.a&&(e.a=new kn(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return ir(new rr,t,e),e.join("")}function rr(){}function ir(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ir(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),ar(r,n),n.push(":"),ir(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":ar(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=$n.prototype).add=function(t,e){Qn(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Qn(this),this.a.forEach((function(n,r){q(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Qn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Qn(this);var e=[];if("string"==typeof t)Jn(this,t)&&(e=$(e,this.a.get(er(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=$(e,t[n])}return e},t.set=function(t,e){return Qn(this),this.c=null,Jn(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var or={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},sr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ar(t,e){e.push('"',t.replace(sr,(function(t){var e=or[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),or[t]=e),e})),'"')}function ur(){var t=kr();return zt&&!!se&&11==se||/Edge\/\d+/.test(t)}function cr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function hr(t,e){e=e||s.window;var n="about:blank";t&&(n=Dt(Pt(t)||Mt)),e.location.href=n}function lr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<lr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function fr(t){return!!((t=(t||kr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function pr(t){t=t||s.window;try{t.close()}catch(t){}}function dr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=kr().toLowerCase(),r&&(e.target=r,ot(n,"crios/")&&(e.target="_blank")),_r(kr())==Er&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof kt?n:Pt(void 0!==n.href?n.href:String(n))||Mt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ct("iPhone")&&!ct("iPod")&&!ct("iPad")||ct("iPad")||ct("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(vt(s=de(document,"A"),"HTMLAnchorElement"),e=e instanceof kt?e:xt(e),s.href=Dt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Ut("",r,n,s),t=Dt(e),s&&($t&&ot(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+qt(t)+'">',t=new Ft(t=(r=It())?r.createHTML(t):t,null,Vt),r=s.document)&&(r.write(function(t){return t instanceof Ft&&t.constructor===Ft?t.a:(P("expected object of type SafeHtml, got '"+t+"' of type "+l(t)),"type_error:SafeHtml")}(t)),r.close())):(s=Ut(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var vr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gr=/^[^@]+@[^@]+$/;function mr(){var t=null;return new we((function(e){"complete"==s.document.readyState?e():(t=function(){e()},hn(window,"load",t))})).o((function(e){throw ln(window,"load",t),e}))}function yr(t){return t=t||kr(),!("file:"!==Pr()&&"ionic:"!==Pr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){var t=s.window;try{return!(!t||t==t.top)}catch(t){return!1}}function wr(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function Ir(){return Qt.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Qt.INTERNAL.hasOwnProperty("node")?"Node":wr()?"Worker":"Browser"}function Tr(){var t=Ir();return"ReactNative"===t||"Node"===t}var Er="Firefox",Sr="Chrome";function _r(t){var e=t.toLowerCase();return ot(e,"opera/")||ot(e,"opr/")||ot(e,"opios/")?"Opera":ot(e,"iemobile")?"IEMobile":ot(e,"msie")||ot(e,"trident/")?"IE":ot(e,"edge/")?"Edge":ot(e,"firefox/")?Er:ot(e,"silk/")?"Silk":ot(e,"blackberry")?"Blackberry":ot(e,"webos")?"Webos":!ot(e,"safari/")||ot(e,"chrome/")||ot(e,"crios/")||ot(e,"android")?!ot(e,"chrome/")&&!ot(e,"crios/")||ot(e,"edge/")?ot(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Sr:"Safari"}var Ar={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Nr(t,e){e=e||[];var n,r=[],i={};for(n in Ar)i[Ar[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Ir())?r=_r(i=kr()):"Worker"===r&&(r=_r(i=kr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function kr(){return s.navigator&&s.navigator.userAgent||""}function Dr(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Cr(){try{var t=s.localStorage,e=Vr();if(t)return t.setItem(e,"1"),t.removeItem(e),!ur()||!!s.indexedDB}catch(t){return wr()&&!!s.indexedDB}return!1}function Or(){return(Rr()||"chrome-extension:"===Pr()||yr())&&!Tr()&&Cr()&&!wr()}function Rr(){return"http:"===Pr()||"https:"===Pr()}function Pr(){return s.location&&s.location.protocol||null}function xr(t){return!fr(t=t||kr())&&_r(t)!=Er}function Lr(t){return void 0===t?null:nr(t)}function Mr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Fr(t){if(null!==t)return JSON.parse(t)}function Vr(t){return t||Math.floor(1e9*Math.random()).toString()}function Ur(t){return"Safari"!=_r(t=t||kr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function jr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function qr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=kr(),e=Ir(),this.b=fr(t)||"ReactNative"===e}function Br(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Kr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Gr(){return!(!Dr("fireauth.oauthhelper",s)&&!Dr("fireauth.iframe",s))}qr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Rr()&&"chrome-extension:"!==Pr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Hr,zr={};function Wr(t){zr[t]||(zr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var $r={};Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:2}),Hr=2==$r.abcd}catch(Gt){Hr=!1}function Qr(t,e,n){Hr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Xr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Qr(t,n,e[n])}function Yr(t){var e={};return Xr(e,t),e}function Jr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Qr(e,n,Jr(t[n]));return e}function Zr(t){var e=t&&(t[ii]?"phone":null);if(!(e&&t&&t[ri]))throw new E("internal-error","Internal assert: invalid MultiFactorInfo object");Qr(this,"uid",t[ri]),Qr(this,"displayName",t[ei]||null);var n=null;t[ni]&&(n=new Date(t[ni]).toUTCString()),Qr(this,"enrollmentTime",n),Qr(this,"factorId",e)}function ti(t){try{var e=new oi(t)}catch(t){e=null}return e}Zr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ei="displayName",ni="enrolledAt",ri="mfaEnrollmentId",ii="phoneInfo";function oi(t){Zr.call(this,t),Qr(this,"phoneNumber",t[ii])}function si(t){var e={},n=t[hi],r=t[fi],i=t[pi];if(t=ti(t[li]),!i||i!=ui&&i!=ci&&!n||i==ci&&!r||i==ai&&!t)throw Error("Invalid checkActionCode response!");i==ci?(e[vi]=n||null,e[mi]=n||null,e[di]=r):(e[vi]=r||null,e[mi]=r||null,e[di]=n||null),e[gi]=t||null,Qr(this,bi,i),Qr(this,yi,Jr(e))}I(oi,Zr),oi.prototype.w=function(){var t=oi.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ai="REVERT_SECOND_FACTOR_ADDITION",ui="EMAIL_SIGNIN",ci="VERIFY_AND_CHANGE_EMAIL",hi="email",li="mfaInfo",fi="newEmail",pi="requestType",di="email",vi="fromEmail",gi="multiFactorInfo",mi="previousEmail",yi="data",bi="operation";function wi(t){var e=Fn(t=Vn(t),Ii)||null,n=Fn(t,Ti)||null,r=Fn(t,_i)||null;if(r=r&&Ni[r]||null,!e||!n||!r)throw new E("argument-error",Ii+", "+Ti+"and "+_i+" are required in a valid action code URL.");Xr(this,{apiKey:e,operation:r,code:n,continueUrl:Fn(t,Ei)||null,languageCode:Fn(t,Si)||null,tenantId:Fn(t,Ai)||null})}var Ii="apiKey",Ti="oobCode",Ei="continueUrl",Si="languageCode",_i="mode",Ai="tenantId",Ni={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ai,signIn:ui,verifyAndChangeEmail:ci,verifyEmail:"VERIFY_EMAIL"};function ki(t){try{return new wi(t)}catch(t){return null}}function Di(t){var e=t[xi];if(void 0===e)throw new E("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new E("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ci];if(n&&"object"==typeof n){e=n[Fi];var r=n[Li];if(n=n[Mi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new E("argument-error",Li+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new E("argument-error",Mi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new E("argument-error",Fi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new E("missing-android-pkg-name")}}else if(void 0!==n)throw new E("argument-error",Ci+" property must be a non null object when specified.");if(this.f=null,(e=t[Pi])&&"object"==typeof e){if("string"==typeof(e=e[Vi])&&e.length)this.f=e;else if(void 0!==e)throw new E("argument-error",Vi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new E("argument-error",Pi+" property must be a non null object when specified.");if(void 0!==(e=t[Ri])&&"boolean"!=typeof e)throw new E("argument-error",Ri+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Oi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new E("argument-error",Oi+" property must be a non empty string when specified.");this.i=t||null}var Ci="android",Oi="dynamicLinkDomain",Ri="handleCodeInApp",Pi="iOS",xi="url",Li="installApp",Mi="minimumVersion",Fi="packageName",Vi="bundleId";function Ui(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var ji=null;function qi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=ji[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!ji){ji={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===ji[o]&&(ji[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e.push(t)})),e}function Bi(t){var e=Gi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Ki(t){try{return new Bi(t)}catch(t){return null}}function Gi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=qi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(t){}return null}Bi.prototype.T=function(){return this.f},Bi.prototype.l=function(){return this.c},Bi.prototype.toString=function(){return this.h};var Hi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),zi=["client_id","response_type","scope","redirect_uri","state"],Wi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:zi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:zi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:zi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Hi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function $i(t){for(var e in Wi)if(Wi[e].fa==t)return Wi[e];return null}function Qi(t){var e={};e["facebook.com"]=to,e["google.com"]=no,e["github.com"]=eo,e["twitter.com"]=ro;var n=t&&t[Yi];try{if(n)return e[n]?new e[n](t):new Zi(t);if(void 0!==t[Xi])return new Ji(t)}catch(t){}return null}var Xi="idToken",Yi="providerId";function Ji(t){var e=t[Yi];if(!e&&t[Xi]){var n=Ki(t[Xi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Qr(this,"providerId",e),Qr(this,"isNewUser",n)}function Zi(t){Ji.call(this,t),Qr(this,"profile",Jr((t=Fr(t.rawUserInfo||"{}"))||{}))}function to(t){if(Zi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if(Zi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",this.profile&&this.profile.login||null)}function no(t){if(Zi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(Zi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",t.screenName||null)}function io(t){var e=Vn(t),n=Fn(e,"link"),r=Fn(Vn(n),"link");return e=Fn(e,"deep_link_id"),Fn(Vn(e),"link")||e||r||n||t}function oo(t,e){if(!t&&!e)throw new E("internal-error","Internal assert: no raw session string available");if(t&&e)throw new E("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?so:ao}I(Zi,Ji),I(to,Zi),I(eo,Zi),I(no,Zi),I(ro,Zi);var so="enroll",ao="signin";function uo(){}function co(t,e){return t.then((function(t){if(t[Js]){var n=Ki(t[Js]);if(!n||e!=n.i)throw new E("user-mismatch");return t}throw new E("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==A+"user-not-found"?new E("user-mismatch"):t}))}function ho(t,e){if(!e)throw new E("internal-error","failed to construct a credential");this.a=e,Qr(this,"providerId",t),Qr(this,"signInMethod",t)}function lo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function fo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new ho(t.providerId,t.pendingToken)}catch(t){}return null}function po(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Qr(this,"idToken",e.idToken),e.accessToken&&Qr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Qr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new E("internal-error","failed to construct a credential");Qr(this,"accessToken",e.oauthToken),Qr(this,"secret",e.oauthTokenSecret)}Qr(this,"providerId",t),Qr(this,"signInMethod",n)}function vo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Xn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function go(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new po(t.providerId,e,t.signInMethod)}catch(t){}}return null}function mo(t,e){this.Qc=e||[],Xr(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=($i(t)||{}).Ja||null,this.pb=null}function yo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new E("argument-error",'SAML provider IDs must be prefixed with "saml."');mo.call(this,t,[])}function bo(t){mo.call(this,t,zi),this.a=[]}function wo(){bo.call(this,"facebook.com")}function Io(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new wo).credential({accessToken:e})}function To(){bo.call(this,"github.com")}function Eo(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new To).credential({accessToken:e})}function So(){bo.call(this,"google.com"),this.Ca("profile")}function _o(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new So).credential({idToken:n,accessToken:e})}function Ao(){mo.call(this,"twitter.com",Hi)}function No(t,e){var n=t;if(d(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new E("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new po("twitter.com",n,"twitter.com")}function ko(t,e,n){this.a=t,this.f=e,Qr(this,"providerId","password"),Qr(this,"signInMethod",n===Co.EMAIL_LINK_SIGN_IN_METHOD?Co.EMAIL_LINK_SIGN_IN_METHOD:Co.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Do(t){return t&&t.email&&t.password?new ko(t.email,t.password,t.signInMethod):null}function Co(){Xr(this,{providerId:"password",isOAuthProvider:!1})}function Oo(t,e){if(!(e=Ro(e)))throw new E("argument-error","Invalid email link!");return new ko(t,e.code,Co.EMAIL_LINK_SIGN_IN_METHOD)}function Ro(t){return(t=ki(t=io(t)))&&t.operation===ui?t:null}function Po(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new E("internal-error");this.a=t,Qr(this,"providerId","phone"),this.fa="phone",Qr(this,"signInMethod","phone")}function xo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return q(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Po(e)}return null}function Lo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function Mo(t){try{this.a=t||Qt.auth()}catch(t){throw new E("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Xr(this,{providerId:"phone",isOAuthProvider:!1})}function Fo(t,e){if(!t)throw new E("missing-verification-id");if(!e)throw new E("missing-verification-code");return new Po({fb:t,eb:e})}function Vo(t){if(t.temporaryProof&&t.phoneNumber)return new Po({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return _o(o,n);case"facebook.com":return Io(n);case"github.com":return Eo(n);case"twitter.com":return No(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new ho(e,s):new po(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new bo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Uo(t){if(!t.isOAuthProvider)throw new E("invalid-oauth-provider")}function jo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new E("invalid-auth-event");if(this.g&&this.a)throw new E("invalid-auth-event");if(this.g&&!this.f)throw new E("invalid-auth-event")}function qo(t){return(t=t||{}).type?new jo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&S(t.error),t.postBody,t.tenantId):null}function Bo(){this.b=null,this.a=[]}oo.prototype.Ha=function(){return this.a?Ne(this.a):Ne(this.b)},oo.prototype.w=function(){return this.type==so?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},uo.prototype.ka=function(){},uo.prototype.b=function(){},uo.prototype.c=function(){},uo.prototype.w=function(){},ho.prototype.ka=function(t){return wa(t,lo(this))},ho.prototype.b=function(t,e){var n=lo(this);return n.idToken=e,Ia(t,n)},ho.prototype.c=function(t,e){return co(Ta(t,lo(this)),e)},ho.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},po.prototype.ka=function(t){return wa(t,vo(this))},po.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,Ia(t,n)},po.prototype.c=function(t,e){return co(Ta(t,vo(this)),e)},po.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},mo.prototype.Ka=function(t){return this.Jb=ft(t),this},I(yo,mo),I(bo,mo),bo.prototype.Ca=function(t){return H(this.a,t)||this.a.push(t),this},bo.prototype.Rb=function(){return Q(this.a)},bo.prototype.credential=function(t,e){var n;if(!(n=d(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new E("argument-error","credential failed: must provide the ID token and/or the access token.");return new po(this.providerId,n,this.providerId)},I(wo,bo),Qr(wo,"PROVIDER_ID","facebook.com"),Qr(wo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),I(To,bo),Qr(To,"PROVIDER_ID","github.com"),Qr(To,"GITHUB_SIGN_IN_METHOD","github.com"),I(So,bo),Qr(So,"PROVIDER_ID","google.com"),Qr(So,"GOOGLE_SIGN_IN_METHOD","google.com"),I(Ao,mo),Qr(Ao,"PROVIDER_ID","twitter.com"),Qr(Ao,"TWITTER_SIGN_IN_METHOD","twitter.com"),ko.prototype.ka=function(t){return this.signInMethod==Co.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Ca,{email:this.a,oobCode:this.f}):ru(t,Ja,{email:this.a,password:this.f})},ko.prototype.b=function(t,e){return this.signInMethod==Co.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Oa,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Ga,{idToken:e,email:this.a,password:this.f})},ko.prototype.c=function(t,e){return co(this.ka(t),e)},ko.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Xr(Co,{PROVIDER_ID:"password"}),Xr(Co,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Xr(Co,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Po.prototype.ka=function(t){return t.gb(Lo(this))},Po.prototype.b=function(t,e){var n=Lo(this);return n.idToken=e,ru(t,tu,n)},Po.prototype.c=function(t,e){var n=Lo(this);return n.operation="REAUTH",co(t=ru(t,eu,n),e)},Po.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Mo.prototype.gb=function(t,e){var n=this.a.a;return Ne(e.verify()).then((function(r){if("string"!=typeof r)throw new E("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=d(t)?t.session:null,o=d(t)?t.phoneNumber:t;return(i&&i.type==so?i.Ha().then((function(t){return function(t,e){return ru(t,za,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==ao?i.Ha().then((function(e){return function(t,e){return ru(t,Wa,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Ba,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new E("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Xr(Mo,{PROVIDER_ID:"phone"}),Xr(Mo,{PHONE_SIGN_IN_METHOD:"phone"}),jo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},jo.prototype.T=function(){return this.h},jo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ko,Go=null;function Ho(t){var e="unauthorized-domain",n=void 0,r=Vn(t);t=r.a,"chrome-extension"==(r=r.c)?n=jt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=jt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",E.call(this,e,n)}function zo(t,e,n){E.call(this,t,n),(t=e||{}).Kb&&Qr(this,"email",t.Kb),t.ea&&Qr(this,"phoneNumber",t.ea),t.credential&&Qr(this,"credential",t.credential),t.$b&&Qr(this,"tenantId",t.$b)}function Wo(t){if(t.code){var e=t.code||"";0==e.indexOf(A)&&(e=e.substring(A.length));var n={credential:Vo(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new E(e,t.message||void 0);return new zo(e,n,t.message)}return null}function $o(){}function Qo(t){return t.c||(t.c=t.b())}function Xo(){}function Yo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Jo(){}function Zo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.qc,this),this.a.onerror=b(this.Tb,this),this.a.onprogress=b(this.rc,this),this.a.ontimeout=b(this.vc,this)}function ts(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function es(t,e,n){this.reset(t,e,n,void 0,void 0)}function ns(t){this.f=t,this.b=this.c=this.a=null}function rs(t,e){this.name=t,this.value=e}I(Ho,E),I(zo,E),zo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&dt(t,e),t},zo.prototype.toJSON=function(){return this.w()},$o.prototype.c=null,I(Xo,$o),Xo.prototype.a=function(){var t=Yo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Xo.prototype.b=function(){var t={};return Yo(this)&&(t[0]=!0,t[1]=!0),t},Ko=new Xo,I(Jo,$o),Jo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Zo;throw Error("Unsupported browser")},Jo.prototype.b=function(){return{}},(t=Zo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ts(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",ts(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,ts(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},es.prototype.a=null,es.prototype.reset=function(t,e,n,r,i){delete this.a},rs.prototype.toString=function(){return this.name};var is=new rs("SEVERE",1e3),os=new rs("WARNING",900),ss=new rs("CONFIG",700),as=new rs("FINE",500);function us(t){return t.c?t.c:t.a?us(t.a):(P("Root logger has no level set."),null)}ns.prototype.log=function(t,e,n){if(t.value>=us(this).value)for(p(e)&&(e=e()),t=new es(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var cs={},hs=null;function ls(t){var e;if(hs||(hs=new ns(""),cs[""]=hs,hs.c=ss),!(e=cs[t])){e=new ns(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ls(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,cs[t]=e}return e}function fs(t,e){t&&t.log(as,e,void 0)}function ps(t){this.f=t}function ds(t){wn.call(this),this.u=t,this.h=void 0,this.readyState=vs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ls("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}I(ps,$o),ps.prototype.a=function(){return new ds(this.f)},ps.prototype.b=function(t){return function(){return t}}({}),I(ds,wn);var vs=0;function gs(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function ms(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ys(t)}function ys(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function bs(t){wn.call(this),this.headers=new kn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=ws,this.u=this.S=!1}(t=ds.prototype).open=function(t,e){if(this.readyState!=vs)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ys(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ms(this)),this.readyState=vs},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ys(this)),this.a&&(this.readyState=3,ys(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,gs(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ms(this):ys(this),3==this.readyState&&gs(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ms(this))},t.sc=function(t){this.a&&(this.response=t,ms(this))},t.Va=function(t){var e=this.i;e&&e.log(os,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ms(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(os,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(os,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ds.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),I(bs,wn);var ws="";bs.prototype.b=ls("goog.net.XhrIo");var Is=/^https?$/i,Ts=["POST","PUT"];function Es(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Ko.a(),t.C=t.D?Qo(t.D):Qo(Ko),t.a.onreadystatechange=b(t.Wb,t);try{fs(t.b,Rs(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return fs(t.b,Rs(t,"Error opening Xhr: "+e.message)),void _s(t,e)}e=r||"";var o=new kn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)q(t,e,void 0);else for(var n=Nn(t),r=An(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ss,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!H(Ts,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Ds(t),0<t.g&&(t.u=function(t){return zt&&ie(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),fs(t.b,Rs(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=b(t.Ma,t)):t.s=Sn(t.Ma,t.g,t)),fs(t.b,Rs(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){fs(t.b,Rs(t,"Send error: "+e.message)),_s(t,e)}}function Ss(t){return"content-type"==t.toLowerCase()}function _s(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,As(t),ks(t)}function As(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ns(t){if(t.c&&void 0!==o)if(t.C[1]&&4==Cs(t)&&2==Os(t))fs(t.b,Rs(t,"Local request error detected and ignored"));else if(t.i&&4==Cs(t))Sn(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Cs(t)){fs(t.b,Rs(t,"Request complete")),t.c=!1;try{var e,n=Os(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.l).match(On)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!Is.test(a?a.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Cs(t)?t.a.statusText:""}catch(e){fs(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Os(t)+"]",As(t)}}finally{ks(t)}}}function ks(t,e){if(t.a){Ds(t);var n=t.a,r=t.C[0]?h:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(is,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Ds(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Cs(t){return t.a?t.a.readyState:0}function Os(t){try{return 2<Cs(t)?t.a.status:-1}catch(t){return-1}}function Rs(t,e){return e+" ["+t.P+" "+t.l+" "+Os(t)+"]"}function Ps(t){var e=Gs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function xs(t,e,n){t.a=!0,t.c=n,t.f=!e,Vs(t)}function Ls(t){if(t.a){if(!t.v)throw new Us(t);t.v=!1}}function Ms(t,e,n,r){t.g.push([e,n,r]),t.a&&Vs(t)}function Fs(t){return G(t.g,(function(t){return p(t[1])}))}function Vs(t){if(t.h&&t.a&&Fs(t)){var e=t.h,n=Bs[e];n&&(s.clearTimeout(n.a),delete Bs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(C(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Fs(t)||(n=!0)}}t.c=e,r&&(u=b(t.m,t,!0),r=b(t.m,t,!1),e instanceof Ps?(Ms(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new qs(e),Bs[e.a]=e,t.h=e.a)}function Us(){O.call(this)}function js(){O.call(this)}function qs(t){this.a=s.setTimeout(b(this.c,this),0),this.b=t}(t=bs.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",fs(this.b,Rs(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(fs(this.b,Rs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ks(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ks(this,!0)),bs.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?Ns(this):this.Jc())},t.Jc=function(){Ns(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ws:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(is,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return fs(this.b,"Can not get response: "+t.message),null}},Ps.prototype.cancel=function(t){if(this.a)this.c instanceof Ps&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new js(this),Ls(this),xs(this,!1,t))}},Ps.prototype.m=function(t,e){this.i=!1,xs(this,t,e)},Ps.prototype.then=function(t,e,n){var r,i,o=new we((function(t,e){r=t,i=e}));return Ms(this,r,(function(t){t instanceof js?o.cancel():i(t)})),o.then(t,e,n)},Ps.prototype.$goog_Thenable=!0,I(Us,O),Us.prototype.message="Deferred has already fired",Us.prototype.name="AlreadyCalledError",I(js,O),js.prototype.message="Deferred was canceled",js.prototype.name="CanceledError",qs.prototype.c=function(){throw delete Bs[this.a],this.b};var Bs={};function Ks(t){var e,n=document,r=Et(t).toString(),i=de(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new Ps(o);return e=window.setTimeout((function(){Hs(i,!0);var t=new $s(Ws,"Timeout reached for loading script "+r);Ls(a),xs(a,!1,t)}),5e3),o.Ma=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Hs(i,!1,e),Ls(a),xs(a,!0,null))},i.onerror=function(){Hs(i,!0,e);var t=new $s(zs,"Error while loading script "+r);Ls(a),xs(a,!1,t)},dt(o={},{type:"text/javascript",charset:"UTF-8"}),ce(i,o),function(t,e){vt(t,"HTMLScriptElement"),t.src=Et(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=c(e.document):(null===u&&(u=c(s.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Gs(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Hs(t,!0,this.Ma)}}function Hs(t,e,n){null!=n&&s.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var zs=0,Ws=1;function $s(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),O.call(this,n),this.code=t}function Qs(t){this.f=t}function Xs(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Zs,this.g=ft(t.secureTokenHeaders||ta),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||ea,this.a=ft(t.firebaseHeaders||na),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Ir(),!(n=s.XMLHttpRequest||n&&Qt.INTERNAL.node&&Qt.INTERNAL.node.XMLHttpRequest)&&!wr())throw new E("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,wr()?this.f=new ps(self):Tr()?this.f=new Qs(n):this.f=new Jo,this.b=null}I($s,O),I(Qs,$o),Qs.prototype.a=function(){return new this.f},Qs.prototype.b=function(){return{}};var Ys,Js="idToken",Zs=new qr(3e4,6e4),ta={"Content-Type":"application/x-www-form-urlencoded"},ea=new qr(3e4,6e4),na={"Content-Type":"application/json"};function ra(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ia(t,e){e&&(t.l=oa("https://securetoken.googleapis.com/v1/token",e),t.h=oa("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=oa("https://identitytoolkit.googleapis.com/v2/",e))}function oa(t,e){return t=Vn(t),e=Vn(e.url),t.f=t.a+t.f,Pn(t,e.c),t.a=e.a,xn(t,e.g),t.toString()}function sa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function aa(t,e,n,r,i,o,a){(function(){var t=kr();return!((t=_r(t)!=Sr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||zt&&se&&!(9<se))})()||wr()?t=b(t.u,t):(Ys||(Ys=new we((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{s[ca]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ms(t,null,e,void 0)}(Ks(St(ua,{onload:ca})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=b(t.s,t)),t(e,n,r,i,o,a)}Xs.prototype.T=function(){return this.b},Xs.prototype.u=function(t,e,n,r,i,o){if(wr()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new E("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new bs(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}In(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return fs(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),Tn(a,"ready",(function(){u&&clearTimeout(u),Ge(this)})),Tn(a,"timeout",(function(){u&&clearTimeout(u),Ge(this),e&&e(null)})),Es(a,t,n,r,i)};var ua=new gt(wt,"https://apis.google.com/js/client.js?onload=%{onload}"),ca="__fcb"+Math.floor(1e6*Math.random()).toString();function ha(t,e,n,r,i,o,s){var a=Vn(e+n);Mn(a,"key",t.c),s&&Mn(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Mn(a,c,i[c]);return new we((function(e,n){aa(t,a.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new E("network-request-failed"))}),r,u?void 0:nr(Mr(i)),t.a,t.v.get())}))}function la(t){if("string"!=typeof(t=t.email)||!gr.test(t))throw new E("invalid-email")}function fa(t){"email"in t&&la(t)}function pa(t){if(!t[Js]){if(t.mfaPendingCredential)throw new E("multi-factor-auth-required",null,ft(t));throw new E("internal-error")}}function da(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new E("internal-error")}else{if(!t.sessionInfo)throw new E("missing-verification-id");if(!t.code)throw new E("missing-verification-code")}}Xs.prototype.s=function(t,e,n,r,i){var o=this;Ys.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Xs.prototype.Ab=function(){return ru(this,Ha,{})},Xs.prototype.Cb=function(t,e){return ru(this,Ka,{idToken:t,email:e})},Xs.prototype.Db=function(t,e){return ru(this,Ga,{idToken:t,password:e})};var va={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ga(t){if(!t.phoneVerificationInfo)throw new E("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new E("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new E("missing-verification-code")}function ma(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new E("internal-error")}function ya(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Jn(t=new $n(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ba(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Wo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Wo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Wo(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;pa(t)}function wa(t,e){return e.returnIdpCredential=!0,ru(t,$a,e)}function Ia(t,e){return e.returnIdpCredential=!0,ru(t,Xa,e)}function Ta(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Qa,e)}function Ea(t){if(!t.oobCode)throw new E("invalid-action-code")}(t=Xs.prototype).Eb=function(t,e){var n={idToken:t},r=[];return ht(va,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Ka,n)},t.wb=function(t,e){return dt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,Va,t)},t.xb=function(t,e){return dt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,La,t)},t.vb=function(t,e){return dt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ma,t)},t.Fb=function(t,e,n){return dt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Fa,t)},t.gb=function(t){return ru(this,Za,t)},t.ob=function(t,e){return ru(this,qa,{oobCode:t,newPassword:e})},t.Sa=function(t){return ru(this,_a,{oobCode:t})},t.kb=function(t){return ru(this,Sa,{oobCode:t})};var Sa={endpoint:"setAccountInfo",A:Ea,Z:"email",B:!0},_a={endpoint:"resetPassword",A:Ea,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new E("internal-error")},B:!0},Aa={endpoint:"signupNewUser",A:function(t){if(la(t),!t.password)throw new E("weak-password")},G:pa,V:!0,B:!0},Na={endpoint:"createAuthUri",B:!0},ka={endpoint:"deleteAccount",O:["idToken"]},Da={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new E("internal-error")}},Ca={endpoint:"emailLinkSignin",O:["email","oobCode"],A:la,G:pa,V:!0,B:!0},Oa={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:la,G:pa,V:!0},Ra={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:ga,G:pa,B:!0,Na:!0},Pa={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:ga,G:pa,B:!0,Na:!0},xa={endpoint:"getAccountInfo"},La={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new E("internal-error");la(t)},Z:"email",B:!0},Ma={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new E("internal-error")},Z:"email",B:!0},Fa={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new E("internal-error")},Z:"email",B:!0},Va={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new E("internal-error");la(t)},Z:"email",B:!0},Ua={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},ja={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new E("internal-error")}},qa={endpoint:"resetPassword",A:Ea,Z:"email",B:!0},Ba={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ka={endpoint:"setAccountInfo",O:["idToken"],A:fa,V:!0},Ga={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(fa(t),!t.password)throw new E("weak-password")},G:pa,V:!0},Ha={endpoint:"signupNewUser",G:pa,V:!0,B:!0},za={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new E("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new E("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new E("internal-error")},B:!0,Na:!0},Wa={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new E("internal-error")},B:!0,Na:!0},$a={endpoint:"verifyAssertion",A:ma,Za:ya,G:ba,V:!0,B:!0},Qa={endpoint:"verifyAssertion",A:ma,Za:ya,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new E("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);pa(t)},V:!0,B:!0},Xa={endpoint:"verifyAssertion",A:function(t){if(ma(t),!t.idToken)throw new E("internal-error")},Za:ya,G:ba,V:!0},Ya={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new E("invalid-custom-token")},G:pa,V:!0,B:!0},Ja={endpoint:"verifyPassword",A:function(t){if(la(t),!t.password)throw new E("wrong-password")},G:pa,V:!0,B:!0},Za={endpoint:"verifyPhoneNumber",A:da,G:pa,B:!0},tu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new E("internal-error");da(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Wo(t);pa(t)}},eu={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:da,G:pa,B:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Js]^!!t.refreshToken)throw new E("internal-error")},B:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.O))return ke(new E("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return Ne(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ha(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new E("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new E(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",dt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new E(r[i],e);return!e&&t&&(e=Lr(t)),new E("internal-error",e)}function su(t){this.b=t,this.a=null,this.sb=function(t){return(hu||(hu=new we((function(t,e){function n(){jr(),Dr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){jr(),e(Error("Network Error"))},timeout:uu.get()})}if(Dr("gapi.iframes.Iframe"))t();else if(Dr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Dr("gapi.load")?n():e(Error("Network Error"))},Ne(Ks(r=St(au,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw hu=null,t})))).then((function(){return new we((function(e,n){Dr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Dr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var au=new gt(wt,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new qr(3e4,6e4),cu=new qr(5e3,15e3),hu=null;function lu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Un((t=Vn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Un("https",this.l,null,"/__/auth/iframe"),this.a=t,Mn(this.a,"apiKey",this.h),Mn(this.a,"appName",this.i),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function pu(t){try{return Qt.app(t).auth().Ga()}catch(t){return[]}}function du(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vu(t){var e=cr();return function(t){return ru(t,Ua,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Vn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Vn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:vr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Ho(cr())}))}function gu(t){return t.m||(t.m=mr().then((function(){if(!t.u){var e=t.c,n=t.i,r=pu(t.b),i=new lu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Q(r||[]),t.u=i.toString()}t.v=new su(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,Dr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=qo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ne(n)}return n.status="ERROR",Ne(n)}))}(t)}))),t.m}function mu(t){return t.l||(t.C=t.c?Nr(t.c,pu(t.b)):null,t.l=new Xs(t.g,D(t.i),t.C),t.f&&ia(t.l,t.f)),t.l}function yu(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new fu(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=ft(u||null),t.f=c,t.zb(h).toString()}function bu(t){if(this.a=t||Qt.INTERNAL.reactNative&&Qt.INTERNAL.reactNative.AsyncStorage,!this.a)throw new E("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function wu(t){this.b=t,this.a={},this.f=b(this.c,this)}lu.prototype.toString=function(){return this.f?Mn(this.a,"v",this.f):Yn(this.a.b,"v"),this.b?Mn(this.a,"eid",this.b):Yn(this.a.b,"eid"),this.c.length?Mn(this.a,"fw",this.c.join(",")):Yn(this.a.b,"fw"),this.a.toString()},fu.prototype.zb=function(t){return this.h=t,this},fu.prototype.toString=function(){if(this.v){var t=Vn(this.v.url);t=Un(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Un("https",this.u,null,"/__/auth/handler");if(Mn(t,"apiKey",this.s),Mn(t,"appName",this.c),Mn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Qt.app(this.c).auth().la()}catch(t){n=null}for(var r in e.pb=n,Mn(t,"providerId",this.a.providerId),e=Mr((n=this.a).Jb))e[r]=e[r].toString();r=n.Qc,e=ft(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),lt(e)||Mn(t,"customParameters",Lr(e))}if("function"==typeof this.a.Rb&&((n=this.a.Rb()).length&&Mn(t,"scopes",n.join(","))),this.l?Mn(t,"redirectUrl",this.l):Yn(t.b,"redirectUrl"),this.g?Mn(t,"eventId",this.g):Yn(t.b,"eventId"),this.i?Mn(t,"v",this.i):Yn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Fn(t,s)&&Mn(t,s,this.b[s]);return this.h?Mn(t,"tid",this.h):Yn(t.b,"tid"),this.f?Mn(t,"eid",this.f):Yn(t.b,"eid"),(s=pu(this.c)).length&&Mn(t,"fw",s.join(",")),t.toString()},(t=du.prototype).Pb=function(t,e,n){var r=new E("popup-closed-by-user"),i=new E("web-storage-unsupported"),o=this,s=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return gu(t).then((function(){return function(t,e){return t.sb.then((function(){return new we((function(n){t.a.send(e.type,e,n,Dr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&pr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new we((function(e){return function n(){_n(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return _n(n).then((function(){e(r)}))}))},t.Yb=function(){var t=kr();return!xr(t)&&!Ur(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,s,a){if(!t)return ke(new E("popup-blocked"));if(s&&!xr())return this.ma().o((function(e){pr(t),i(e)})),r(),Ne();this.a||(this.a=vu(mu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw pr(t),i(e),e}));return r(),e})).then((function(){(Uo(n),s)||hr(yu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=vu(mu(this)));var i=this;return this.a.then((function(){Uo(e),hr(yu(i.s,i.g,i.b,t,e,cr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return gu(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new E("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){W(this.h,(function(e){return e==t}))},(t=bu.prototype).get=function(t){return Ne(this.a.getItem(t)).then((function(t){return t&&Fr(t)}))},t.set=function(t,e){return Ne(this.a.setItem(t,Lr(e)))},t.U=function(t){return Ne(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var Iu,Tu=[];function Eu(t,e,n){lt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Su(t){this.a=t}function _u(t){this.c=t,this.b=!1,this.a=[]}function Au(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return ke(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new we((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return Nu(t,c),e})).o((function(e){throw Nu(t,c),e}))}function Nu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),W(t.a,(function(t){return t==e}))}}function ku(){if(!Ru())throw new E("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;wr()&&self?(this.v=function(){var t=wr()?self:null;if(q(Tu,(function(n){n.b==t&&(e=n)})),!e){var e=new wu(t);Tu.push(e)}return e}(),Eu(this.v,"keyChanged",(function(e,n){return Fu(t).then((function(e){return 0<e.length&&q(t.a,(function(t){t(e)})),{keyProcessed:H(e,n.key)}}))})),Eu(this.v,"ping",(function(){return Ne(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?Ne().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ne(null)}().then((function(e){(t.h=e)&&(t.g=new _u(new Su(e)),Au(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&H(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Du(t){return new we((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new we((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Du(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Cu(t){return t.i||(t.i=Du(t)),t.i}function Ou(t,e){var n=0;return new we((function r(i,o){Cu(t).then(e).then(i).o((function(e){if(!(3<++n))return Cu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Ru(){try{return!!s.indexedDB}catch(t){return!1}}function Pu(t){return t.objectStore("firebaseLocalStorage")}function xu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new we((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Au(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ne()}function Fu(t){return Cu(t).then((function(t){var e=Pu(xu(t,!1));return e.getAll?Lu(e.getAll()):new we((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=lr(t.c,n),t.c=n}return r}))}function Vu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Uu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ne().then((function(){if(Ru()){var t=Vr(),r="__sak"+t;return Iu||(Iu=new ku),(n=Iu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){q(e.a,(function(e){e(t)}))})),t}))}function ju(){this.a={},this.type="inMemory"}function qu(){if(!function(){var t="Node"==Ir();if(!(t=Bu()||t&&Qt.INTERNAL.node&&Qt.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Ir())throw new E("internal-error","The LocalStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Bu()||Qt.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var t=s.localStorage,e=Vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ku(){this.type="nullStorage"}function Gu(){if(!function(){var t="Node"==Ir();if(!(t=Hu()||t&&Qt.INTERNAL.node&&Qt.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Ir())throw new E("internal-error","The SessionStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Hu()||Qt.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Hu(){try{var t=s.sessionStorage,e=Vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function zu(){var t={};t.Browser=Qu,t.Node=Xu,t.ReactNative=Yu,t.Worker=Ju,this.a=t[Ir()]}wu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];q(r,(function(e){i.push(Ne().then((function(){return e(t.origin,t.data.data)})))})),Ce(i).then((function(r){var i=[];q(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),q(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Su.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},_u.prototype.close=function(){for(;0<this.a.length;)Nu(this,this.a[0]);this.b=!0},(t=ku.prototype).set=function(t,e){var n=this,r=!1;return Ou(this,(function(e){return Lu((e=Pu(xu(e,!0))).get(t))})).then((function(i){return Ou(n,(function(o){if(o=Pu(xu(o,!0)),i)return i.value=e,Lu(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Lu(o.add(s))}))})).then((function(){return n.c[t]=e,Mu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Ou(this,(function(e){return Lu(Pu(xu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Ou(this,(function(r){return n=!0,e.b++,Lu(Pu(xu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Mu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Fu(t).then((function(e){0<e.length&&q(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Vu(t),e()}(this),this.a.push(t)},t.ia=function(t){W(this.a,(function(e){return e==t})),0==this.a.length&&Vu(this)},(t=Uu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){W(this.a,(function(e){return e==t}))},(t=ju.prototype).get=function(t){return Ne(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ne()},t.U=function(t){return delete this.a[t],Ne()},t.ca=function(){},t.ia=function(){},(t=qu.prototype).get=function(t){var e=this;return Ne().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ne().then((function(){var r=Lr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ne().then((function(){e.a.removeItem(t)}))},t.ca=function(t){s.window&&un(s.window,"storage",t)},t.ia=function(t){s.window&&ln(s.window,"storage",t)},(t=Ku.prototype).get=function(){return Ne(null)},t.set=function(){return Ne()},t.U=function(){return Ne()},t.ca=function(){},t.ia=function(){},(t=Gu.prototype).get=function(t){var e=this;return Ne().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ne().then((function(){var r=Lr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ne().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Wu,$u,Qu={F:qu,cb:Gu},Xu={F:qu,cb:Gu},Yu={F:bu,cb:Ku},Ju={F:qu,cb:Ku},Zu={rd:"local",NONE:"none",td:"session"};function tc(){var t=!(Ur(kr())||!br()),e=xr(),n=Cr();this.m=t,this.h=e,this.l=n,this.a={},Wu||(Wu=new zu),t=Wu;try{this.g=!ur()&&Gr()||!s.indexedDB?new t.a.F:new Uu(wr()?new ju:new t.a.F)}catch(t){this.g=new ju,this.h=!0}try{this.i=new t.a.cb}catch(t){this.i=new ju}this.v=new ju,this.f=b(this.Zb,this),this.b={}}function ec(){return $u||($u=new tc),$u}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.F&&(t.b[n]=null),nc(t,e.F).U(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function sc(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.F).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),lt(this.a)&&(nc(this,"local").ca(this.f),this.h||(ur()||!Gr())&&s.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Xe({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&(W(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),lt(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.nb(e))},zt&&se&&10==se&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else q(t,b(this.nb,this))},t.nb=function(t){this.a[t]&&q(this.a[t],(function(t){t()}))};var ac,uc={name:"authEvent",F:"local"};function cc(){this.a=ec()}function hc(t,e){this.b=lc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===ac&&(ac=s.Int32Array?new Int32Array(yc):yc),this.reset()}I(hc,(function(){this.b=-1}));for(var lc=64,fc=lc-1,pc=[],dc=0;dc<fc;dc++)pc[dc]=0;var vc=$(128,pc);function gc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|ac[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function mc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(gc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(gc(t),i=0)}}t.c=i,t.g+=n}hc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):Q(this.h)};var yc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bc(){hc.call(this,8,wc)}I(bc,hc);var wc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ic(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new cc,this.g=new sc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Tc(t){return new E("invalid-cordova-configuration",t)}function Ec(t){var e=new bc;mc(e,t),t=[];var n=8*e.g;56>e.c?mc(e,vc,56-e.c):mc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(gc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return K(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Sc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function _c(t){return t.f||(t.f=t.ma().then((function(){return new we((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Ac(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=io(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Fr(Fn(o=Vn(i),"firebaseError")||null))?S(o):null)?new jo(r.c,r.b,null,null,o,null,r.T()):new jo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Sc(t,i)}))}var n=new jo("unknown",null,null,null,new E("no-auth-event")),r=!1,i=_n(500).then((function(){return Ac(t).then((function(){r||Sc(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Dr("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Go||(Go=new Bo),function(t){var e=Go;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Dr("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Ac(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return qo(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function Nc(t){this.a=t,this.b=ec()}(t=Ic.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(yr(void 0)?mr().then((function(){return new we((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):ke(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Dr("universalLinks.subscribe",s))throw Tc("cordova-universal-links-plugin-fix is not installed");if(void 0===Dr("BuildInfo.packageName",s))throw Tc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Dr("cordova.plugins.browsertab.openUrl",s))throw Tc("cordova-plugin-browsertab is not installed");if("function"!=typeof Dr("cordova.InAppBrowser.open",s))throw Tc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new E("cordova-not-ready")}))},t.Pb=function(t,e){return e(new E("operation-not-supported-in-this-environment")),Ne()},t.Nb=function(){return ke(new E("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return ke(new E("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,h=null;return this.c=Ne().then((function(){return Uo(e),_c(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new jo(e,r,null,o,new E("no-auth-event"),null,i),u=Dr("BuildInfo.packageName",s);if("string"!=typeof u)throw new E("invalid-cordova-configuration");var c=Dr("BuildInfo.displayName",s),h={};if(kr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!kr().toLowerCase().match(/android/))return ke(new E("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=Ec(o),h.sessionId=o;var l=yu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(uc,a.w(),e)})).then((function(){var e=Dr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new E("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Dr("cordova.plugins.browsertab.openUrl",s)))throw new E("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=Dr("cordova.InAppBrowser.open",s)))throw new E("invalid-cordova-configuration");e=kr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new we((function(t,e){u=function(){var e=Dr("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=_n(2e3).then((function(){e(new E("redirect-cancelled-by-user"))})))},h=function(){Br()&&c()},o.addEventListener("resume",c,!1),kr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Ac(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),u&&i.Ta(u),i.c=null}))},t.Ea=function(t){this.b.push(t),_c(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new jo("unknown",null,null,null,new E("no-auth-event")),t(e))}))},t.Ta=function(t){W(this.b,(function(e){return e==t}))};var kc={name:"pendingRedirect",F:"session"};function Dc(t){return ic(t.b,kc,t.a)}function Cc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new Hc,this.C=new Xc,this.g=new Nc(Kc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Oc(this.D,this.v,this.m,_,this.J)}function Oc(t,e,n,r,i){var o=Qt.SDK_VERSION||null;return yr()?new Ic(t,e,n,o,r,i):new du(t,e,n,o,r,i)}function Rc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Pc(t){t.a.Yb()&&Rc(t).o((function(e){var n=new jo("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));Uc(e)&&t.s(n)})),t.a.Ub()||zc(t.b)}function xc(t,e){H(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(kc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Dc(t.g).then((function(){Rc(t).o((function(e){var n=new jo("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));Uc(e)&&t.s(n)}))})):Pc(t)})).o((function(){Pc(t)}))}function Lc(t,e){W(t.h,(function(t){return t==e}))}Cc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Oc(this.D,this.v,this.m,null,this.J),this.i={}},Cc.prototype.s=function(t){if(!t)throw new E("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return zc(this.b),e};var Mc=new qr(2e3,1e4),Fc=new qr(3e4,6e4);function Vc(t,e,n,r,i,o,s){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function Uc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function jc(t,e,n,r,i){var o;return function(t){return t.b.set(kc,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(Uc(e))throw new E("operation-not-supported-in-this-environment");return o=e,Dc(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new we((function(){})):Dc(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function qc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Mc.get())}Cc.prototype.ra=function(){return this.b.ra()};var Bc={};function Kc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Gc(t,e,n,r){var i=Kc(e,n,r);return Bc[i]||(Bc[i]=new Cc(t,e,n,r)),Bc[i]}function Hc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function zc(t){t.g||(t.g=!0,Qc(t,!1,null,null))}function Wc(t){t.g&&!t.i&&Qc(t,!1,null,null)}function $c(t,e){if(t.b=function(){return Ne(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Qc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return ke(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):$c(t,n):$c(t,{user:null}),t.f=[],t.c=[]}function Xc(){}function Yc(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function Jc(t,e){this.a=e,Qr(this,"verificationId",t)}function Zc(t,e,n,r){return new Mo(t).gb(e,n).then((function(t){return new Jc(t,r)}))}function th(t){var e=Gi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new E("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Xr(this,{token:t,expirationTime:Kr(1e3*e.exp),authTime:Kr(1e3*e.auth_time),issuedAtTime:Kr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function eh(t,e,n){var r=e&&e[rh];if(!r)throw new E("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ft(e),this.g=n,this.c=new oo(null,r),this.b=[];var i=this;q(e[nh]||[],(function(t){(t=ti(t))&&i.b.push(t)})),Qr(this,"auth",this.a),Qr(this,"session",this.c),Qr(this,"hints",this.b)}Hc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Hc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Qc(this,!0,null,t.a),Ne()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Qc(t,a,e,null)})).o((function(e){Qc(t,a,null,e)}))}(this,t,e):ke(new E("invalid-auth-event")):(Qc(this,!1,null,null),Ne())}else ke(new E("invalid-auth-event"))},Hc.prototype.ra=function(){var t=this;return new we((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new E("timeout");t.a&&t.a.cancel(),t.a=_n(Fc.get()).then((function(){t.b||(t.g=!0,Qc(t,!0,null,e))}))}(t))}))},Xc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ne()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):ke(new E("invalid-auth-event"))}else ke(new E("invalid-auth-event"))},Jc.prototype.confirm=function(t){return t=Fo(this.verificationId,t),this.a(t)};var nh="mfaInfo",rh="mfaPendingCredential";function ih(t,e,n,r){E.call(this,"multi-factor-auth-required",r,e),this.b=new eh(t,e,n),Qr(this,"resolver",this.b)}function oh(t,e,n){if(t&&d(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new ih(e,t.serverResponse,n,t.message)}catch(t){}return null}function sh(){}function ah(t){Qr(this,"factorId",t.fa),this.a=t}function uh(t){if(ah.call(this,t),this.a.fa!=Mo.PROVIDER_ID)throw new E("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ch(t,e){for(var n in Qe.call(this,t),e)this[n]=e[n]}function hh(t,e){this.a=t,this.b=[],this.c=b(this.yc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&q(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ri]=t.uid),t.displayName&&(r[ei]=t.displayName),t.enrollmentTime&&(r[ni]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ii]=t.phoneNumber);try{e=new oi(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),lh(this,n)}function lh(t,e){t.b=e,Qr(t,"enrolledFactors",e)}function fh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ph(t,e){t.stop(),t.b=_n(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=s.document,e=null;return Br()||!t?Ne():new we((function(n){e=function(){Br()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){ph(t,!0)})).o((function(e){t.i(e)&&ph(t,!1)}))}function dh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function vh(t,e){void 0===e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function gh(t,e){t.b=Ki(e[Js]||""),t.a=e.refreshToken,vh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function mh(t,e){return function(t,e){return new we((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?aa(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new E("internal-error")):r(new E("network-request-failed"))}),"POST",Xn(e).toString(),t.g,t.m.get()):r(new E("internal-error"))}))}(t.f,e).then((function(e){return t.b=Ki(e.access_token),t.a=e.refresh_token,vh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function yh(t,e){this.a=t||null,this.b=e||null,Xr(this,{lastSignInTime:Kr(e||null),creationTime:Kr(t||null)})}function bh(t,e,n,r,i,o){Xr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function wh(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=Qt.SDK_VERSION?Nr(Qt.SDK_VERSION):null;this.a=new Xs(this.l,D(_),r),(this.u=t.emulatorConfig||null)&&ia(this.a,this.u),this.h=new dh(this.a),Dh(this,e[Js]),gh(this.h,e),Qr(this,"refreshToken",this.h.a),Rh(this,n||{}),wn.call(this),this.P=!1,this.s&&Or()&&(this.b=Gc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new fh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=b(this.ib,this);var i=this;this.za=null,this.Pa=function(t){i.xa(t.h)},this.qa=null,this.Ba=function(t){Ih(i,t.c)},this.$=null,this.aa=[],this.Oa=function(t){Sh(i,t.f)},this.ja=null,this.S=new hh(this,n),Qr(this,"multiFactor",this.S)}function Ih(t,e){t.u=e,ia(t.a,e),t.b&&(e=t.b,t.b=Gc(t.s,t.l,t.m,t.u),t.P&&(Lc(e,t),xc(t.b,t)))}function Th(t,e){t.qa&&ln(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&un(e,"languageCodeChanged",t.Pa)}function Eh(t,e){t.$&&ln(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&un(e,"emulatorConfigChanged",t.Ba)}function Sh(t,e){t.aa=e,sa(t.a,Qt.SDK_VERSION?Nr(Qt.SDK_VERSION,t.aa):null)}function _h(t,e){t.ja&&ln(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&un(e,"frameworkChanged",t.Oa)}function Ah(t){try{return Qt.app(t.m).auth()}catch(e){throw new E("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Nh(t){t.J||t.D.b||(t.D.start(),ln(t,"tokenChanged",t.ba),un(t,"tokenChanged",t.ba))}function kh(t){ln(t,"tokenChanged",t.ba),t.D.stop()}function Dh(t,e){t.Aa=e,Qr(t,"_lat",e)}function Ch(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return Ce(e).then((function(){return t}))}function Oh(t){t.b&&!t.P&&(t.P=!0,xc(t.b,t))}function Rh(t,e){Xr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new yh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Ph(){}function xh(t){return Ne().then((function(){if(t.J)throw new E("app-deleted")}))}function Lh(t){return K(t.providerData,(function(t){return t.providerId}))}function Mh(t,e){e&&(Fh(t,e.providerId),t.providerData.push(e))}function Fh(t,e){W(t.providerData,(function(t){return t.providerId==e}))}function Vh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Qr(t,e,n)}function Uh(t,e){t!=e&&(Xr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Qr(t,"metadata",function(t){return new yh(t.a,t.b)}(e.metadata)):Qr(t,"metadata",new yh),q(e.providerData,(function(e){Mh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Qr(t,"refreshToken",t.h.a),lh(t.S,e.S.b))}function jh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,xa,{idToken:e}).then(b(t.Kc,t))}(t,e).then((function(){return n||Vh(t,"isAnonymous",!1),e}))}))}function qh(t,e){e[Js]&&t.Aa!=e[Js]&&(gh(t.h,e),t.dispatchEvent(new ch("tokenChanged")),Dh(t,e[Js]),Vh(t,"refreshToken",t.h.a))}function Bh(t,e){return jh(t).then((function(){if(H(Lh(t),e))return Ch(t).then((function(){throw new E("provider-already-linked")}))}))}function Kh(t,e,n){return Yr({user:t,credential:Vo(e),additionalUserInfo:e=Qi(e),operationType:n})}function Gh(t,e){return qh(t,e),t.reload().then((function(){return t}))}function Hh(t,e,n,r,i){if(!Or())return ke(new E("operation-not-supported-in-this-environment"));if(t.i&&!i)return ke(t.i);var o=$i(n.providerId),s=Vr(t.uid+":::"),a=null;(!xr()||br())&&t.s&&n.isOAuthProvider&&(a=yu(t.s,t.l,t.m,e,n,null,s,Qt.SDK_VERSION||null,null,null,t.tenantId,t.u));var u=dr(a,o&&o.va,o&&o.ua);return r=r().then((function(){if(Wh(t),!i)return t.I().then((function(){}))})).then((function(){return Vc(t.b,u,e,n,s,!!a,t.tenantId)})).then((function(){return new we((function(n,r){t.na(e,null,new E("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=qc(t.b,t,e,u,s)}))})).then((function(t){return u&&pr(u),t?Yr(t):null})).o((function(t){throw u&&pr(u),t})),$h(t,r,i)}function zh(t,e,n,r,i){if(!Or())return ke(new E("operation-not-supported-in-this-environment"));if(t.i&&!i)return ke(t.i);var o=null,s=Vr(t.uid+":::");return r=r().then((function(){if(Wh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,Ch(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Yh,t.w(),e.a)),e})).then((function(){return jc(t.b,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return Jh(t.ha);throw o})).then((function(){if(o)throw o})),$h(t,r,i)}function Wh(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new E("internal-error");throw new E("auth-domain-config-required")}}function $h(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),ke(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new ch("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){z(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oh(e.w(),Ah(t),b(t.jc,t))),n||e}))}function Qh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Js]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new wh(e,n,t);return t.providerData&&q(t.providerData,(function(t){t&&Mh(i,Yr(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Xh(t){this.a=t,this.b=ec()}eh.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=ft(e.f);return delete n[nh],delete n[rh],dt(n,t),e.g(n)}))},I(ih,E),sh.prototype.tb=function(t,e,n){return e.type==so?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),dt(n,{phoneVerificationInfo:Lo(t.a)}),ru(e,Ra,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return dt(n={mfaPendingCredential:n},{phoneVerificationInfo:Lo(t.a)}),ru(e,Pa,n)}))}(this,t,e)},I(ah,sh),I(uh,ah),I(ch,Qe),(t=hh.prototype).yc=function(t){lh(this,function(t){var e=[];return q(t.mfaInfo||[],(function(t){(t=ti(t))&&e.push(t)})),e}(t.hd))},t.Sb=function(){return this.a.I().then((function(t){return new oo(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return qh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=B(e.b,(function(t){return t.uid!=n}));return lh(e,r),qh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:K(this.b,(function(t){return t.w()}))}}},fh.prototype.start=function(){this.a=this.c,ph(this,!0)},fh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},dh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?ke(new E("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?mh(this,{grant_type:"refresh_token",refresh_token:this.a}):Ne(null):Ne({accessToken:this.b.toString(),refreshToken:this.a})},yh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},I(wh,wn),wh.prototype.xa=function(t){this.za=t,ra(this.a,t)},wh.prototype.la=function(){return this.za},wh.prototype.Ga=function(){return Q(this.aa)},wh.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Qr(wh.prototype,"providerId","firebase"),(t=wh.prototype).reload=function(){var t=this;return $h(this,xh(this).then((function(){return jh(t).then((function(){return Ch(t)})).then(Ph)})))},t.oc=function(t){return this.I(t).then((function(t){return new th(t)}))},t.I=function(t){var e=this;return $h(this,xh(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new E("internal-error");return t.accessToken!=e.Aa&&(Dh(e,t.accessToken),e.dispatchEvent(new ch("tokenChanged"))),Vh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new E("internal-error");Rh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?K(t,(function(t){return new bh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Mh(this,e[n]);Vh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ch("userReloaded",{hd:t}))},t.Lc=function(t){return Wr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return $h(this,t.c(this.a,this.uid).then((function(t){return qh(e,t),n=Kh(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Wr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return $h(this,Bh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Kh(e,t,"link"),Gh(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return $h(this,Bh(this,"phone").then((function(){return Zc(Ah(n),t,e,b(n.rb,n))})))},t.Mc=function(t,e){var n=this;return $h(this,Ne().then((function(){return Zc(Ah(n),t,e,b(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return $h(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return qh(e,t),e.reload()})))},t.ed=function(t){var e=this;return $h(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return qh(e,t),e.reload()})))},t.Db=function(t){var e=this;return $h(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return qh(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return xh(this);var e=this;return $h(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return qh(e,t),Vh(e,"displayName",t.displayName||null),Vh(e,"photoURL",t.photoUrl||null),q(e.providerData,(function(t){"password"===t.providerId&&(Qr(t,"displayName",e.displayName),Qr(t,"photoURL",e.photoURL))})),Ch(e)})).then(Ph))},t.cd=function(t){var e=this;return $h(this,jh(this).then((function(n){return H(Lh(e),t)?function(t,e,n){return ru(t,Da,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return q(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),q(Lh(e),(function(t){n[t]||Fh(e,t)})),n[Mo.PROVIDER_ID]||Qr(e,"phoneNumber",null),Ch(e)})):Ch(e).then((function(){throw new E("no-such-provider")}))})))},t.delete=function(){var t=this;return $h(this,this.I().then((function(e){return ru(t.a,ka,{idToken:e})})).then((function(){t.dispatchEvent(new ch("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");Th(t,null),Eh(t,null),_h(t,null),t.N=[],t.J=!0,kh(t),Qr(t,"refreshToken",null),t.b&&Lc(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?b(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?b(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?b(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?b(this.Mb,this):null},t.Ec=function(t){var e=this;return Hh(this,"linkViaPopup",t,(function(){return Bh(e,t.providerId).then((function(){return Ch(e)}))}),!1)},t.Nc=function(t){return Hh(this,"reauthViaPopup",t,(function(){return Ne()}),!0)},t.Fc=function(t){var e=this;return zh(this,"linkViaRedirect",t,(function(){return Bh(e,t.providerId)}),!1)},t.Oc=function(t){return zh(this,"reauthViaRedirect",t,(function(){return Ne()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return $h(this,this.I().then((function(n){return Ia(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Kh(i,t,"link"),Gh(i,t)})).then((function(){return o})))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return $h(this,Ne().then((function(){return co(Ta(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Kh(i,t,"reauthenticate"),qh(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},t.vb=function(t){var e=this,n=null;return $h(this,this.I().then((function(e){return n=e,void 0===t||lt(t)?{}:Ui(new Di(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return $h(this,this.I().then((function(t){return r=t,void 0===e||lt(e)?{}:Ui(new Di(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return $h(this,t=co(Ne(t),n.uid).then((function(t){return e=Kh(n,t,"reauthenticate"),qh(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&dt(t,this.metadata.w()),q(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),dt(t,this.S.w()),t};var Yh={name:"redirectUser",F:"session"};function Jh(t){return ic(t.b,Yh,t.a)}function Zh(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=nl("local"),n=nl("session"),r=nl("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Fr(s.localStorage.getItem(r))}catch(t){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(el,t.a).then((function(t){return t?nl(t):e}))}))}))})).then((function(e){return t.c=e,tl(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(nl("local"),this.a,b(this.g,this))}function tl(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,nl(Zu[n]),t.a));return r.push(ic(t.b,el,t.a)),function(t){return new we((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)De(t[a],w(o,a),s);else e(i)}))}(r)}Zh.prototype.g=function(){var t=this,e=nl("local");sl(this,(function(){return Ne().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return tl(t,"local").then((function(){t.c=e}))}))}))};var el={name:"persistence",F:"session"};function nl(t){return{name:"authUser",F:t}}function rl(t,e){return sl(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function il(t){return sl(t,(function(){return ic(t.b,t.c,t.a)}))}function ol(t,e,n){return sl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Qh(t||{})}))}))}function sl(t,e){return t.f=t.f.then(e,e),t.f}function al(t){if(this.l=!1,Qr(this,"settings",new Yc),Qr(this,"app",t),!gl(this).options||!gl(this).options.apiKey)throw new E("invalid-api-key");t=Qt.SDK_VERSION?Nr(Qt.SDK_VERSION):null,this.a=new Xs(gl(this).options&&gl(this).options.apiKey,D(_),t),this.P=[],this.s=[],this.N=[],this.Pa=Qt.INTERNAL.createSubscribe(b(this.zc,this)),this.W=void 0,this.ib=Qt.INTERNAL.createSubscribe(b(this.Ac,this)),dl(this,null),this.i=new Zh(gl(this).options.apiKey+":"+gl(this).name),this.D=new Xh(gl(this).options.apiKey+":"+gl(this).name),this.$=wl(this,function(t){var e=gl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Yh,t.a).then((function(t){return t&&e&&(t.authDomain=e),Qh(t||{})}))}(t.D,gl(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Jh(t.D)}));return wl(t,e)}(t).then((function(){return ol(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return rl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:il(t.i)}))):null})).then((function(e){dl(t,e||null)}));return wl(t,n)}(this)),this.h=wl(this,function(t){return t.$.then((function(){return fl(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(nl("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=b(this.Zc,this),this.Ba=b(this.da,this),this.qa=b(this.mc,this),this.za=b(this.wc,this),this.Aa=b(this.xc,this),this.b=null,function(t){var e=gl(t).options.authDomain,n=gl(t).options.apiKey;e&&Or()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Gc(e,n,gl(t).name,t.R),xc(t.b,t),ml(t)&&Oh(ml(t)),t.m){Oh(t.m);var r=t.m;r.xa(t.la()),Th(r,t),Sh(r=t.m,t.J),_h(r,t),Ih(r=t.m,t.R),Eh(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Gc,this),this.u=0,wn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=Vn(this.R.url);t=Yr({protocol:t.c,host:t.a,port:t.g,options:Yr({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function ul(t){Qe.call(this,"languageCodeChanged"),this.h=t}function cl(t){Qe.call(this,"emulatorConfigChanged"),this.c=t}function hl(t){Qe.call(this,"frameworkChanged"),this.f=t}function ll(t){return t.Oa||ke(new E("auth-domain-config-required"))}function fl(t){if(!Or())return ke(new E("operation-not-supported-in-this-environment"));var e=ll(t).then((function(){return t.b.ra()})).then((function(t){return t?Yr(t):null}));return wl(t,e)}function pl(t,e){var n={};return n.apiKey=gl(t).options.apiKey,n.authDomain=gl(t).options.authDomain,n.appName=gl(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new wh(t,e);return n&&(i.ha=n),r&&Sh(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return ml(t)&&e.uid==ml(t).uid?(Uh(ml(t),e),t.da(e)):(dl(t,e),Oh(e),t.da(e))})).then((function(){bl(t)}))}function dl(t,e){ml(t)&&(function(t,e){W(t.W,(function(t){return t==e}))}(ml(t),t.Ba),ln(ml(t),"tokenChanged",t.qa),ln(ml(t),"userDeleted",t.za),ln(ml(t),"userInvalidated",t.Aa),kh(ml(t))),e&&(e.W.push(t.Ba),un(e,"tokenChanged",t.qa),un(e,"userDeleted",t.za),un(e,"userInvalidated",t.Aa),0<t.u&&Nh(e)),Qr(t,"currentUser",e),e&&(e.xa(t.la()),Th(e,t),Sh(e,t.J),_h(e,t),Ih(e,t.R),Eh(e,t))}function vl(t,e){var n=null,r=null;return wl(t,e.then((function(e){return n=Vo(e),r=Qi(e),pl(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oh(e.w(),t,b(t.kc,t))),n||e})).then((function(){return Yr({user:ml(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function gl(t){return t.app}function ml(t){return t.currentUser}function yl(t){return ml(t)&&ml(t)._lat||null}function bl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](yl(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](yl(t))}}function wl(t,e){return t.P.push(e),e.oa((function(){z(t.P,e)})),e}function Il(){}function Tl(){this.a={},this.b=1e12}Zh.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new E("invalid-persistence-type"),n=new E("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Ir()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Ru()&&"none"!==t)throw n;break;default:if(!Cr()&&"none"!==t)throw n}}(t),sl(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,tl(n,t)})).then((function(){if(n.c=nl(t),e)return n.b.set(n.c,e,n.a)})):Ne()}))},I(al,wn),I(ul,Qe),I(cl,Qe),I(hl,Qe),(t=al.prototype).yb=function(t){return wl(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,ra(this.a,this.aa),this.dispatchEvent(new ul(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=s.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new E("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&mr().then((function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,ia(this.a,this.R),this.dispatchEvent(new cl(this.R))}},t.Gc=function(t){this.J.push(t),sa(this.a,Qt.SDK_VERSION?Nr(Qt.SDK_VERSION,this.J):null),this.dispatchEvent(new hl(this.J))},t.Ga=function(){return Q(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:gl(this).options.apiKey,authDomain:gl(this).options.authDomain,appName:gl(this).name,currentUser:ml(this)&&ml(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?b(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return vl(i,wa(i.a,o))}))},t.Xc=function(t){if(!Or())return ke(new E("operation-not-supported-in-this-environment"));var e=this,n=$i(t.providerId),r=Vr(),i=null;(!xr()||br())&&gl(this).options.authDomain&&t.isOAuthProvider&&(i=yu(gl(this).options.authDomain,gl(this).options.apiKey,gl(this).name,"signInViaPopup",t,null,r,Qt.SDK_VERSION||null,null,null,this.T(),this.R));var o=dr(i,n&&n.va,n&&n.ua);return wl(this,n=ll(this).then((function(n){return Vc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new we((function(t,n){e.na("signInViaPopup",null,new E("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=qc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&pr(o),t?Yr(t):null})).o((function(t){throw o&&pr(o),t})))},t.Yc=function(t){if(!Or())return ke(new E("operation-not-supported-in-this-environment"));var e=this;return wl(this,ll(this).then((function(){return function(t){return sl(t,(function(){return t.b.set(el,t.c.F,t.a)}))}(e.i)})).then((function(){return jc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.ra=function(){var t=this;return fl(this).then((function(e){return t.b&&Wc(t.b.b),e})).o((function(e){throw t.b&&Wc(t.b.b),e}))},t.dd=function(t){if(!t)return ke(new E("null-user"));if(this.S!=t.tenantId)return ke(new E("tenant-id-mismatch"));var e=this,n={};n.apiKey=gl(this).options.apiKey,n.authDomain=gl(this).options.authDomain,n.appName=gl(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[Js]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new wh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Sh(e,r),Uh(e,t),e}(t,n,e.D,e.Ga());return wl(this,this.h.then((function(){if(gl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return ml(e)&&t.uid==ml(e).uid?(Uh(ml(e),t),e.da(t)):(dl(e,r),Oh(r),e.da(r))})).then((function(){bl(e)})))},t.Bb=function(){var t=this;return wl(this,this.h.then((function(){return t.b&&Wc(t.b.b),ml(t)?(dl(t,null),il(t.i).then((function(){bl(t)}))):Ne()})))},t.Zc=function(){var t=this;return ol(this.i,gl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=ml(t)&&e){n=ml(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Uh(ml(t),e),ml(t).I();(ml(t)||e)&&(dl(t,e),e&&(Oh(e),e.ha=t.D),t.b&&xc(t.b,t),bl(t))}}))},t.da=function(t){return rl(this.i,t)},t.mc=function(){bl(this),this.da(ml(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return vl(e,Ne(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(ml(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),wl(t,t.h.then((function(){!t.l&&H(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(yl(t)))})))}(this,(function(){t.next(ml(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(ml(r)):"function"==typeof t.next&&t.next(ml(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"==typeof t?t(ml(r)):"function"==typeof t.next&&t.next(ml(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this;return wl(this,this.h.then((function(){return ml(e)?ml(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return vl(e,ru(e.a,Ya,{token:t}))})).then((function(t){var n=t.user;return Vh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return vl(n,ru(n.a,Ja,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return vl(n,ru(n.a,Aa,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return vl(e,t.ka(e.a))}))},t.Sc=function(t){return Wr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=ml(t);if(e&&e.isAnonymous){var n=Yr({providerId:null,isNewUser:!1});return Yr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return vl(t,t.a.Ab()).then((function(e){var n=e.user;return Vh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return ml(this)&&ml(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&ml(this)&&Nh(ml(this))},t.Pc=function(t){var e=this;q(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&ml(this)&&kh(ml(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),wl(this,this.h.then((function(){e.l||H(e.s,t)&&t(yl(e))})))},t.removeAuthTokenListener=function(t){W(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(nl("local"),t.a,this.ja),this.b&&(Lc(this.b,this),Wc(this.b.b)),Promise.resolve()},t.hc=function(t){return wl(this,function(t,e){return ru(t,Na,{identifier:e,continueUri:Rr()?cr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Ro(t)},t.xb=function(t,e){var n=this;return wl(this,Ne().then((function(){var t=new Di(e);if(!t.c)throw new E("argument-error",Ri+" must be true when sending sign in link to email");return Ui(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return wl(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return wl(this,this.a.Sa(t).then((function(t){return new si(t)})))},t.kb=function(t){return wl(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return wl(this,Ne().then((function(){return void 0===e||lt(e)?{}:Ui(new Di(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return wl(this,Zc(this,t,e,b(this.ab,this)))},t.Vc=function(t,e){var n=this;return wl(this,Ne().then((function(){var r=e||cr(),i=Oo(t,r);if(!(r=Ro(r)))throw new E("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new E("tenant-id-mismatch");return n.ab(i)})))},Il.prototype.render=function(){},Il.prototype.reset=function(){},Il.prototype.getResponse=function(){},Il.prototype.execute=function(){};var El=null;function Sl(t,e){return(e=_l(e))&&t.a[e]||null}function _l(t){return(t=void 0===t?1e12:t)?t.toString():null}function Al(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ue(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function Nl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function kl(){}function Dl(){}Tl.prototype.render=function(t,e){return this.a[this.b.toString()]=new Al(t,e),this.b++},Tl.prototype.reset=function(t){var e=Sl(this,t);t=_l(t),e&&t&&(e.delete(),delete this.a[t])},Tl.prototype.getResponse=function(t){return(t=Sl(this,t))?t.getResponse():null},Tl.prototype.execute=function(t){(t=Sl(this,t))&&t.execute()},Al.prototype.getResponse=function(){return Nl(this),this.b},Al.prototype.execute=function(){Nl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Al.prototype.delete=function(){Nl(this),this.g=!0,clearTimeout(this.a),this.a=null,ln(this.f,"click",this.i)},Qr(kl,"FACTOR_ID","phone"),Dl.prototype.g=function(){return El||(El=new Tl),Ne(El)},Dl.prototype.c=function(){};var Cl=null;function Ol(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Rl=new gt(wt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Pl=new qr(3e4,6e4);Ol.prototype.g=function(t){var e=this;return new we((function(n,r){var i=setTimeout((function(){r(new E("network-request-failed"))}),Pl.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new E("internal-error"));delete s[e.a]},Ne(Ks(St(Rl,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new E("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Ol.prototype.c=function(){this.b--};var xl=null;function Ll(t,e,n,r,i,o,a){if(Qr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,a?(Cl||(Cl=new Dl),a=Cl):(xl||(xl=new Ol),a=xl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Vl])throw new E("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ul],!s.document)throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ue(e)||!this.i&&ue(e).hasChildNodes())throw new E("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Xs(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Ml];this.a[Ml]=function(t){if(jl(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Dr(c,s);"function"==typeof e&&e(t)}};var h=this.a[Fl];this.a[Fl]=function(){if(jl(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=Dr(h,s);"function"==typeof t&&t()}}}var Ml="callback",Fl="expired-callback",Vl="sitekey",Ul="size";function jl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function ql(t,e){return t.h.push(e),e.oa((function(){z(t.h,e)})),e}function Bl(t){if(t.J)throw new E("internal-error","RecaptchaVerifier instance has been destroyed.")}function Kl(t,e,n){var r=!1;try{this.b=n||Qt.app()}catch(t){throw new E("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new E("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Qt.SDK_VERSION?Nr(Qt.SDK_VERSION,o):null,Ll.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,D(_),r)}function Gl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new E("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Hl.length)throw new E("internal-error","Argument validator received an unsupported number of arguments.");n=Hl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new E("argument-error",t+" failed: "+r)}(t=Ll.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=ql(this,Ne().then((function(){if(Rr()&&!wr())return mr();throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,ru(t.s,ja,{})})).then((function(e){t.a[Vl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Bl(this);var t=this;return ql(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=ue(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ae&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',qt(s.name),'"'),s.type){o.push(' type="',qt(s.type),'"');var a={};dt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=de(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ce(o,s)),2<r.length&&pe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Bl(this);var t=this;return ql(this,this.render().then((function(e){return new we((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){W(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Bl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Bl(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ue(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},I(Kl,Ll);var Hl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function zl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Wl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function $l(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:d}}function Ql(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Xl(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Yl(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Jl(t,e){return d(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Zl(t){return d(t)&&"string"==typeof t.uid}function tf(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function ef(t,e){for(var n in e){var r=e[n].name;t[r]=of(r,t[n],e[n].j)}}function nf(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:w((function(t){return this[t]}),n),set:w((function(t,e,n,r){Gl(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function rf(t,e,n,r){t[e]=of(e,n,r)}function of(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Gl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}ef(al.prototype,{kb:{name:"applyActionCode",j:[zl("code")]},Sa:{name:"checkActionCode",j:[zl("code")]},ob:{name:"confirmPasswordReset",j:[zl("code"),zl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[zl("email"),zl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[zl("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[zl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[tf($l(),Ql(),"nextOrObserver"),Ql("opt_error",!0),Ql("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[tf($l(),Ql(),"nextOrObserver"),Ql("opt_error",!0),Ql("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[zl("email"),tf($l("opt_actionCodeSettings",!0),Xl(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[zl("email"),$l("actionCodeSettings")]},yb:{name:"setPersistence",j:[zl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Yl()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Yl()]},Tc:{name:"signInWithCustomToken",j:[zl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[zl("email"),zl("password")]},Vc:{name:"signInWithEmailLink",j:[zl("email"),zl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[zl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[tf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof wh)}},Xl(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[zl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[zl("url"),$l("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[zl("code")]}}),nf(al.prototype,{lc:{name:"languageCode",lb:tf(zl(),Xl(),"languageCode")},ti:{name:"tenantId",lb:tf(zl(),Xl(),"tenantId")}}),al.Persistence=Zu,al.Persistence.LOCAL="local",al.Persistence.SESSION="session",al.Persistence.NONE="none",ef(wh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Wl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Wl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Yl()]},rb:{name:"linkWithCredential",j:[Yl()]},Dc:{name:"linkWithPhoneNumber",j:[zl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Yl()]},ub:{name:"reauthenticateWithCredential",j:[Yl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[zl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[tf($l("opt_actionCodeSettings",!0),Xl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[zl(null,!0)]},cd:{name:"unlink",j:[zl("provider")]},Cb:{name:"updateEmail",j:[zl("email")]},Db:{name:"updatePassword",j:[zl("password")]},ed:{name:"updatePhoneNumber",j:[Yl("phone")]},Eb:{name:"updateProfile",j:[$l("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[zl("email"),tf($l("opt_actionCodeSettings",!0),Xl(null,!0),"opt_actionCodeSettings",!0)]}}),ef(Tl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ef(Il.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ef(we.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),nf(Yc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Wl("appVerificationDisabledForTesting")}}),ef(Jc.prototype,{confirm:{name:"confirm",j:[zl("verificationCode")]}}),rf(uo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[go,Do,xo,fo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[tf(zl(),$l(),"json")]),rf(Co,"credential",(function(t,e){return new ko(t,e)}),[zl("email"),zl("password")]),ef(ko.prototype,{w:{name:"toJSON",j:[zl(null,!0)]}}),ef(wo.prototype,{Ca:{name:"addScope",j:[zl("scope")]},Ka:{name:"setCustomParameters",j:[$l("customOAuthParameters")]}}),rf(wo,"credential",Io,[tf(zl(),$l(),"token")]),rf(Co,"credentialWithLink",Oo,[zl("email"),zl("emailLink")]),ef(To.prototype,{Ca:{name:"addScope",j:[zl("scope")]},Ka:{name:"setCustomParameters",j:[$l("customOAuthParameters")]}}),rf(To,"credential",Eo,[tf(zl(),$l(),"token")]),ef(So.prototype,{Ca:{name:"addScope",j:[zl("scope")]},Ka:{name:"setCustomParameters",j:[$l("customOAuthParameters")]}}),rf(So,"credential",_o,[tf(zl(),tf($l(),Xl()),"idToken"),tf(zl(),Xl(),"accessToken",!0)]),ef(Ao.prototype,{Ka:{name:"setCustomParameters",j:[$l("customOAuthParameters")]}}),rf(Ao,"credential",No,[tf(zl(),$l(),"token"),zl("secret",!0)]),ef(bo.prototype,{Ca:{name:"addScope",j:[zl("scope")]},credential:{name:"credential",j:[tf(zl(),tf($l(),Xl()),"optionsOrIdToken"),tf(zl(),Xl(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[$l("customOAuthParameters")]}}),ef(po.prototype,{w:{name:"toJSON",j:[zl(null,!0)]}}),ef(ho.prototype,{w:{name:"toJSON",j:[zl(null,!0)]}}),rf(Mo,"credential",Fo,[zl("verificationId"),zl("verificationCode")]),ef(Mo.prototype,{gb:{name:"verifyPhoneNumber",j:[tf(zl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Jl(t.session,so)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Jl(t.session,ao)&&Zl(t.multiFactorHint):t.session&&t.multiFactorUid?Jl(t.session,ao)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),ef(Po.prototype,{w:{name:"toJSON",j:[zl(null,!0)]}}),ef(E.prototype,{toJSON:{name:"toJSON",j:[zl(null,!0)]}}),ef(zo.prototype,{toJSON:{name:"toJSON",j:[zl(null,!0)]}}),ef(Ho.prototype,{toJSON:{name:"toJSON",j:[zl(null,!0)]}}),ef(ih.prototype,{toJSON:{name:"toJSON",j:[zl(null,!0)]}}),ef(eh.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),ef(hh.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},zl("displayName",!0)]},bd:{name:"unenroll",j:[tf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Zl},zl(),"multiFactorInfoIdentifier")]}}),ef(Kl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),rf(wi,"parseLink",ki,[zl("link")]),rf(kl,"assertion",(function(t){return new uh(t)}),[Yl("phone")]),function(){if(void 0===Qt||!Qt.INTERNAL||!Qt.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ui,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ai,VERIFY_AND_CHANGE_EMAIL:ci,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:al,AuthCredential:uo,Error:E};rf(t,"EmailAuthProvider",Co,[]),rf(t,"FacebookAuthProvider",wo,[]),rf(t,"GithubAuthProvider",To,[]),rf(t,"GoogleAuthProvider",So,[]),rf(t,"TwitterAuthProvider",Ao,[]),rf(t,"OAuthProvider",bo,[zl("providerId")]),rf(t,"SAMLAuthProvider",yo,[zl("providerId")]),rf(t,"PhoneAuthProvider",Mo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof al)}}]),rf(t,"RecaptchaVerifier",Kl,[tf(zl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),$l("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Qt.app.App)}}]),rf(t,"ActionCodeURL",wi,[]),rf(t,"PhoneMultiFactorGenerator",kl,[]),Qt.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new al(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),Qt.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:b((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:b(t.nc,t),addAuthTokenListener:b(t.cc,t),removeAuthTokenListener:b(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Qt.registerVersion("@firebase/auth","0.16.8"),Qt.INTERNAL.extendNamespace({User:wh})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var Yt=function(t,e){return(Yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Jt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Zt,te="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ee=ee||{},ne=te||self;function re(){}function ie(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function oe(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var se="closure_uid_"+(1e9*Math.random()>>>0),ae=0;function ue(t,e,n){return t.call.apply(t.bind,arguments)}function ce(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function he(t,e,n){return(he=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ue:ce).apply(null,arguments)}function le(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function fe(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function pe(){this.s=this.s,this.o=this.o}var de={};pe.prototype.s=!1,pe.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,se)&&t[se]||(t[se]=++ae)}(this);delete de[t]}},pe.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ve=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ge=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function me(t){return Array.prototype.concat.apply([],arguments)}function ye(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function be(t){return/^[\s\xa0]*$/.test(t)}var we,Ie=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Te(t,e){return-1!=t.indexOf(e)}function Ee(t,e){return t<e?-1:t>e?1:0}t:{var Se=ne.navigator;if(Se){var _e=Se.userAgent;if(_e){we=_e;break t}}we=""}function Ae(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Ne(t){var e={};for(var n in t)e[n]=t[n];return e}var ke="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function De(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ke.length;o++)n=ke[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ce(t){return Ce[" "](t),t}Ce[" "]=re;var Oe,Re,Pe=Te(we,"Opera"),xe=Te(we,"Trident")||Te(we,"MSIE"),Le=Te(we,"Edge"),Me=Le||xe,Fe=Te(we,"Gecko")&&!(Te(we.toLowerCase(),"webkit")&&!Te(we,"Edge"))&&!(Te(we,"Trident")||Te(we,"MSIE"))&&!Te(we,"Edge"),Ve=Te(we.toLowerCase(),"webkit")&&!Te(we,"Edge");function Ue(){var t=ne.document;return t?t.documentMode:void 0}t:{var je="",qe=(Re=we,Fe?/rv:([^\);]+)(\)|;)/.exec(Re):Le?/Edge\/([\d\.]+)/.exec(Re):xe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Re):Ve?/WebKit\/(\S+)/.exec(Re):Pe?/(?:Version)[ \/]?(\S+)/.exec(Re):void 0);if(qe&&(je=qe?qe[1]:""),xe){var Be=Ue();if(null!=Be&&Be>parseFloat(je)){Oe=String(Be);break t}}Oe=je}var Ke,Ge={};function He(){return function(t){var e=Ge;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=Ie(String(Oe)).split("."),n=Ie("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=Ee(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||Ee(0==o[2].length,0==s[2].length)||Ee(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}))}if(ne.document&&xe){var ze=Ue();Ke=ze||(parseInt(Oe,10)||void 0)}else Ke=void 0;var We=Ke,$e=function(){if(!ne.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ne.addEventListener("test",re,e),ne.removeEventListener("test",re,e)}catch(t){}return t}();function Qe(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Xe(t,e){if(Qe.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Fe){t:{try{Ce(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ye[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Xe.Z.h.call(this)}}Qe.prototype.h=function(){this.defaultPrevented=!0},fe(Xe,Qe);var Ye={2:"touch",3:"pen",4:"mouse"};Xe.prototype.h=function(){Xe.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Je="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function tn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Ze,this.ca=this.fa=!1}function en(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function nn(t){this.src=t,this.g={},this.h=0}function rn(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=ve(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(en(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=on(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new tn(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var sn="closure_lm_"+(1e6*Math.random()|0),an={};function un(t,e,n,r,i){if(r&&r.once)return hn(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);return null}return n=mn(n),t&&t[Je]?t.N(e,n,oe(r)?!!r.capture:!!r,i):cn(t,e,n,!1,r,i)}function cn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=oe(i)?!!i.capture:!!i,a=vn(t);if(a||(t[sn]=a=new nn(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=dn;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)$e||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function hn(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);return null}return n=mn(n),t&&t[Je]?t.O(e,n,oe(r)?!!r.capture:!!r,i):cn(t,e,n,!0,r,i)}function ln(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else r=oe(r)?!!r.capture:!!r,n=mn(n),t&&t[Je]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=on(o=t.g[e],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=vn(t))&&(e=t.g[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Je])rn(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=vn(e))?(rn(n,t),0==n.h&&(n.src=null,e[sn]=null)):en(t)}}}function pn(t){return t in an?an[t]:an[t]="on"+t}function dn(t,e){if(t.ca)t=!0;else{e=new Xe(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&fn(t),t=n.call(r,e)}return t}function vn(t){return(t=t[sn])instanceof nn?t:null}var gn="__closure_events_fn_"+(1e9*Math.random()>>>0);function mn(t){return"function"==typeof t?t:(t[gn]||(t[gn]=function(e){return t.handleEvent(e)}),t[gn])}function yn(){pe.call(this),this.i=new nn(this),this.P=this,this.I=null}function bn(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Qe(e,t);else if(e instanceof Qe)e.target=e.target||t;else{var i=e;De(e=new Qe(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=wn(s,r,!0,e)&&i}if(i=wn(s=e.g=t,r,!0,e)&&i,i=wn(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=wn(s=e.g=n[o],r,!1,e)&&i}function wn(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&rn(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}fe(yn,pe),yn.prototype[Je]=!0,yn.prototype.removeEventListener=function(t,e,n,r){ln(this,t,e,n,r)},yn.prototype.M=function(){if(yn.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)en(n[r]);delete e.g[t],e.h--}}this.I=null},yn.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},yn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var In=ne.JSON.stringify;function Tn(){var t=Cn,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var En,Sn=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=_n.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),_n=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new An}),(function(t){return t.reset()})),An=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Nn(t){ne.setTimeout((function(){throw t}),0)}function kn(t,e){En||function(){var t=ne.Promise.resolve(void 0);En=function(){t.then(On)}}(),Dn||(En(),Dn=!0),Cn.add(t,e)}var Dn=!1,Cn=new Sn;function On(){for(var t;t=Tn();){try{t.h.call(t.g)}catch(t){Nn(t)}var e=_n;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Dn=!1}function Rn(t,e){yn.call(this),this.h=t||1,this.g=e||ne,this.j=he(this.kb,this),this.l=Date.now()}function Pn(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function xn(t,e,n){if("function"==typeof t)n&&(t=he(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=he(t.handleEvent,t)}return 2147483647<Number(e)?-1:ne.setTimeout(t,e||0)}function Ln(t){t.g=xn((function(){t.g=null,t.i&&(t.i=!1,Ln(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}fe(Rn,yn),(Zt=Rn.prototype).da=!1,Zt.S=null,Zt.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),bn(this,"tick"),this.da&&(Pn(this),this.start()))}},Zt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Zt.M=function(){Rn.Z.M.call(this),Pn(this),delete this.g};var Mn=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Yt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Ln(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(ne.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(pe);function Fn(t){pe.call(this),this.h=t,this.g={}}fe(Fn,pe);var Vn=[];function Un(t,e,n,r){Array.isArray(n)||(n&&(Vn[0]=n.toString()),n=Vn);for(var i=0;i<n.length;i++){var o=un(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function jn(t){Ae(t.g,(function(t,e){this.g.hasOwnProperty(e)&&fn(t)}),t),t.g={}}function qn(){this.g=!0}function Bn(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return In(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Fn.prototype.M=function(){Fn.Z.M.call(this),jn(this)},Fn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qn.prototype.Aa=function(){this.g=!1},qn.prototype.info=function(){};var Kn={},Gn=null;function Hn(){return Gn=Gn||new yn}function zn(t){Qe.call(this,Kn.Ma,t)}function Wn(t){var e=Hn();bn(e,new zn(e,t))}function $n(t,e){Qe.call(this,Kn.STAT_EVENT,t),this.stat=e}function Qn(t){var e=Hn();bn(e,new $n(e,t))}function Xn(t,e){Qe.call(this,Kn.Na,t),this.size=e}function Yn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ne.setTimeout((function(){t()}),e)}Kn.Ma="serverreachability",fe(zn,Qe),Kn.STAT_EVENT="statevent",fe($n,Qe),Kn.Na="timingevent",fe(Xn,Qe);var Jn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Zn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function tr(){}function er(t){return t.h||(t.h=t.i())}function nr(){}tr.prototype.h=null;var rr,ir={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function or(){Qe.call(this,"d")}function sr(){Qe.call(this,"c")}function ar(){}function ur(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Fn(this),this.P=hr,t=Me?125:void 0,this.W=new Rn(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new cr}function cr(){this.i=null,this.g="",this.h=!1}fe(or,Qe),fe(sr,Qe),fe(ar,tr),ar.prototype.g=function(){return new XMLHttpRequest},ar.prototype.i=function(){return{}},rr=new ar;var hr=45e3,lr={},fr={};function pr(t,e,n){t.K=1,t.v=Mr(Cr(e)),t.s=n,t.U=!0,dr(t,null)}function dr(t,e){t.F=Date.now(),yr(t),t.A=Cr(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Qr(n.h,"t",r),t.C=0,n=t.l.H,t.h=new cr,t.g=Xi(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Mn(he(t.Ia,t,t.g),t.O)),Un(t.V,t.g,"readystatechange",t.gb),e=t.H?Ne(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Wn(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");s=2<=l.length&&"type"==l[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function vr(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function gr(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=mr(t,n))==fr){4==e&&(t.o=4,Qn(14),i=!1),Bn(t.j,t.m,null,"[Incomplete Response]");break}if(r==lr){t.o=4,Qn(15),Bn(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Bn(t.j,t.m,r,null),Er(t,r)}vr(t)&&r!=fr&&r!=lr&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Qn(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bi(e),e.L=!0,Qn(11))):(Bn(t.j,t.m,n,"[Invalid Chunked Response]"),Tr(t),Ir(t))}function mr(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?fr:(n=Number(e.substring(n,r)),isNaN(n)?lr:(r+=1)+n>e.length?fr:(e=e.substr(r,n),t.C=r+n,e))}function yr(t){t.Y=Date.now()+t.P,br(t,t.P)}function br(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Yn(he(t.eb,t),e)}function wr(t){t.B&&(ne.clearTimeout(t.B),t.B=null)}function Ir(t){0==t.l.G||t.I||Hi(t.l,t)}function Tr(t){wr(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Pn(t.W),jn(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Er(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||ni(n.i,t)))if(n.I=t.N,!t.J&&ni(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Gi(n),Pi(n)}qi(n),Qn(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Yn(he(n.ab,n),6e3));if(1>=ei(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else Wi(n,11)}else if((t.J||n.g==t)&&Gi(n),!be(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var h=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=r.i;!l.g&&(Te(h,"spdy")||Te(h,"quic")||Te(h,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(ri(l,l.h),l.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Lr(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=Qi(r,r.H?r.la:null,r.W),p.J){ii(r.i,p);var d=p,v=r.K;v&&d.setTimeout(v),d.B&&(wr(d),yr(d)),r.g=p}else ji(r);0<n.l.length&&Mi(n)}else"stop"!=o[0]&&"close"!=o[0]||Wi(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Wi(n,7):Ri(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Wn(4)}catch(o){}}function Sr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ie(t)||"string"==typeof t)ge(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(ie(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(ie(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function _r(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof _r)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ar(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Nr(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Nr(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Nr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Zt=ur.prototype).setTimeout=function(t){this.P=t},Zt.gb=function(t){t=t.target;var e=this.L;e&&3==Ni(t)?e.l():this.Ia(t)},Zt.Ia=function(t){try{if(t==this.g)t:{var e=Ni(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||Me||this.g&&(this.h.h||this.g.ga()||ki(this.g)))){this.I||4!=e||7==n||Wn(8==n||0>=r?3:2),wr(this);var i=this.g.ba();this.N=i;e:if(vr(this)){var o=ki(this.g);t="";var s=o.length,a=4==Ni(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Tr(this),Ir(this);var u="";break e}this.h.i=new ne.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!be(c)){var l=c;break e}}l=null}if(!(i=l)){this.i=!1,this.o=3,Qn(12),Tr(this),Ir(this);break t}Bn(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Er(this,i)}this.U?(gr(this,e,u),Me&&this.i&&3==e&&(Un(this.V,this.W,"tick",this.fb),this.W.start())):(Bn(this.j,this.m,u,null),Er(this,u)),4==e&&Tr(this),this.i&&!this.I&&(4==e?Hi(this.l,this):(this.i=!1,yr(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Qn(12)):(this.o=0,Qn(13)),Tr(this),Ir(this)}}}catch(e){}},Zt.fb=function(){if(this.g){var t=Ni(this.g),e=this.g.ga();this.C<e.length&&(wr(this),gr(this,t,e),this.i&&4!=t&&yr(this))}},Zt.cancel=function(){this.I=!0,Tr(this)},Zt.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Wn(3),Qn(17)),Tr(this),this.o=2,Ir(this)):br(this,this.Y-t)},(Zt=_r.prototype).R=function(){Ar(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Zt.T=function(){return Ar(this),this.g.concat()},Zt.get=function(t,e){return Nr(this.h,t)?this.h[t]:e},Zt.set=function(t,e){Nr(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Zt.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var kr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Dr(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Dr){this.g=void 0!==e?e:t.g,Or(this,t.j),this.s=t.s,Rr(this,t.i),Pr(this,t.m),this.l=t.l,e=t.h;var n=new Hr;n.i=e.i,e.g&&(n.g=new _r(e.g),n.h=e.h),xr(this,n),this.o=t.o}else t&&(n=String(t).match(kr))?(this.g=!!e,Or(this,n[1]||"",!0),this.s=Fr(n[2]||""),Rr(this,n[3]||"",!0),Pr(this,n[4]),this.l=Fr(n[5]||"",!0),xr(this,n[6]||"",!0),this.o=Fr(n[7]||"")):(this.g=!!e,this.h=new Hr(null,this.g))}function Cr(t){return new Dr(t)}function Or(t,e,n){t.j=n?Fr(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Rr(t,e,n){t.i=n?Fr(e,!0):e}function Pr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function xr(t,e,n){e instanceof Hr?(t.h=e,function(t,e){e&&!t.j&&(zr(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Wr(this,e),Qr(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=Vr(e,Kr)),t.h=new Hr(e,t.g))}function Lr(t,e,n){t.h.set(e,n)}function Mr(t){return Lr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Fr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Vr(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ur),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ur(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Dr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Vr(e,jr,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Vr(e,jr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Vr(n,"/"==n.charAt(0)?Br:qr,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Vr(n,Gr)),t.join("")};var jr=/[#\/\?@]/g,qr=/[#\?:]/g,Br=/[#\?]/g,Kr=/[#\?@]/g,Gr=/#/g;function Hr(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function zr(t){t.g||(t.g=new _r,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Wr(t,e){zr(t),e=Xr(t,e),Nr(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Nr((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Ar(t)))}function $r(t,e){return zr(t),e=Xr(t,e),Nr(t.g.h,e)}function Qr(t,e,n){Wr(t,e),0<n.length&&(t.i=null,t.g.set(Xr(t,e),ye(n)),t.h+=n.length)}function Xr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Zt=Hr.prototype).add=function(t,e){zr(this),this.i=null,t=Xr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Zt.forEach=function(t,e){zr(this),this.g.forEach((function(n,r){ge(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Zt.T=function(){zr(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Zt.R=function(t){zr(this);var e=[];if("string"==typeof t)$r(this,t)&&(e=me(e,this.g.get(Xr(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=me(e,t[n])}return e},Zt.set=function(t,e){return zr(this),this.i=null,$r(this,t=Xr(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Zt.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Zt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var Yr=function(t,e){this.h=t,this.g=e};function Jr(t){this.l=t||Zr,ne.PerformanceNavigationTiming?t=0<(t=ne.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(ne.g&&ne.g.Ea&&ne.g.Ea()&&ne.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Zr=10;function ti(t){return!!t.h||!!t.g&&t.g.size>=t.j}function ei(t){return t.h?1:t.g?t.g.size:0}function ni(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function ri(t,e){t.g?t.g.add(e):t.h=e}function ii(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function oi(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Jt(t.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return ye(t.i)}function si(){}function ai(){this.g=new si}function ui(t,e,n){var r=n||"";try{Sr(t,(function(t,n){var i=t;oe(t)&&(i=In(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function ci(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function hi(t){this.l=t.$b||null,this.j=t.ib||!1}function li(t,e){yn.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=fi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Jr.prototype.cancel=function(){var t,e;if(this.i=oi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Jt(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},si.prototype.stringify=function(t){return ne.JSON.stringify(t,void 0)},si.prototype.parse=function(t){return ne.JSON.parse(t,void 0)},fe(hi,tr),hi.prototype.g=function(){return new li(this.l,this.j)},hi.prototype.i=function(t){return function(){return t}}({}),fe(li,yn);var fi=0;function pi(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function di(t){t.readyState=4,t.l=null,t.j=null,t.A=null,vi(t)}function vi(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Zt=li.prototype).open=function(t,e){if(this.readyState!=fi)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,vi(this)},Zt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||ne).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Zt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,di(this)),this.readyState=fi},Zt.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,vi(this)),this.g&&(this.readyState=3,vi(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ne.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;pi(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Zt.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?di(this):vi(this),3==this.readyState&&pi(this)}},Zt.Ua=function(t){this.g&&(this.response=this.responseText=t,di(this))},Zt.Ta=function(t){this.g&&(this.response=t,di(this))},Zt.ha=function(){this.g&&di(this)},Zt.setRequestHeader=function(t,e){this.v.append(t,e)},Zt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Zt.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(li.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var gi=ne.JSON.parse;function mi(t){yn.call(this),this.headers=new _r,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=yi,this.K=this.L=!1}fe(mi,yn);var yi="",bi=/^https?$/i,wi=["POST","PUT"];function Ii(t){return"content-type"==t.toLowerCase()}function Ti(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ei(t),_i(t)}function Ei(t){t.D||(t.D=!0,bn(t,"complete"),bn(t,"error"))}function Si(t){if(t.h&&void 0!==ee&&(!t.C[1]||4!=Ni(t)||2!=t.ba()))if(t.v&&4==Ni(t))xn(t.Fa,0,t);else if(bn(t,"readystatechange"),4==Ni(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(kr)[1]||null;if(!o&&ne.self&&ne.self.location){var s=ne.self.location.protocol;o=s.substr(0,s.length-1)}i=!bi.test(o?o.toLowerCase():"")}e=i}if(e)bn(t,"complete"),bn(t,"success");else{t.m=6;try{var a=2<Ni(t)?t.g.statusText:""}catch(t){a=""}t.j=a+" ["+t.ba()+"]",Ei(t)}}finally{_i(t)}}}function _i(t,e){if(t.g){Ai(t);var n=t.g,r=t.C[0]?re:null;t.g=null,t.C=null,e||bn(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Ai(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(ne.clearTimeout(t.A),t.A=null)}function Ni(t){return t.g?t.g.readyState:0}function ki(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case yi:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Di(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ae(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Lr(t,e,n))}function Ci(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Oi(t){this.za=0,this.l=[],this.h=new qn,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ci("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ci("baseRetryDelayMs",5e3,t),this.$a=Ci("retryDelaySeedMs",1e4,t),this.Ya=Ci("forwardChannelMaxRetries",2,t),this.ra=Ci("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Jr(t&&t.concurrentRequestLimit),this.Ca=new ai,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Ri(t){if(xi(t),3==t.G){var e=t.V++,n=Cr(t.F);Lr(n,"SID",t.J),Lr(n,"RID",e),Lr(n,"TYPE","terminate"),Vi(t,n),(e=new ur(t,t.h,e,void 0)).K=2,e.v=Mr(Cr(n)),n=!1,ne.navigator&&ne.navigator.sendBeacon&&(n=ne.navigator.sendBeacon(e.v.toString(),"")),!n&&ne.Image&&((new Image).src=e.v,n=!0),n||(e.g=Xi(e.l,null),e.g.ea(e.v)),e.F=Date.now(),yr(e)}$i(t)}function Pi(t){t.g&&(Bi(t),t.g.cancel(),t.g=null)}function xi(t){Pi(t),t.u&&(ne.clearTimeout(t.u),t.u=null),Gi(t),t.i.cancel(),t.m&&("number"==typeof t.m&&ne.clearTimeout(t.m),t.m=null)}function Li(t,e){t.l.push(new Yr(t.Za++,e)),3==t.G&&Mi(t)}function Mi(t){ti(t.i)||t.m||(t.m=!0,kn(t.Ha,t),t.C=0)}function Fi(t,e){var n;n=e?e.m:t.V++;var r=Cr(t.F);Lr(r,"SID",t.J),Lr(r,"RID",n),Lr(r,"AID",t.U),Vi(t,r),t.o&&t.s&&Di(r,t.o,t.s),n=new ur(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Ui(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),ri(t.i,n),pr(n,r,e)}function Vi(t,e){t.j&&Sr({},(function(t,n){Lr(e,n,t)}))}function Ui(t,e,n){n=Math.min(t.l.length,n);var r=t.j?he(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,h=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{ui(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function ji(t){t.g||t.u||(t.Y=1,kn(t.Ga,t),t.A=0)}function qi(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=Yn(he(t.Ga,t),zi(t,t.A)),t.A++,!0)}function Bi(t){null!=t.B&&(ne.clearTimeout(t.B),t.B=null)}function Ki(t){t.g=new ur(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Cr(t.oa);Lr(e,"RID","rpc"),Lr(e,"SID",t.J),Lr(e,"CI",t.N?"0":"1"),Lr(e,"AID",t.U),Vi(t,e),Lr(e,"TYPE","xmlhttp"),t.o&&t.s&&Di(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Mr(Cr(e)),n.s=null,n.U=!0,dr(n,t)}function Gi(t){null!=t.v&&(ne.clearTimeout(t.v),t.v=null)}function Hi(t,e){var n=null;if(t.g==e){Gi(t),Bi(t),t.g=null;var r=2}else{if(!ni(t.i,e))return;n=e.D,ii(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;bn(r=Hn(),new Xn(r,n,e,i)),Mi(t)}else ji(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(ei(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Yn(he(t.Ha,t,e),zi(t,t.C)),t.C++,0)))}(t,e)||2==r&&qi(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Wi(t,5);break;case 4:Wi(t,10);break;case 3:Wi(t,6);break;default:Wi(t,2)}}function zi(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Wi(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=he(t.jb,t);n||(n=new Dr("//www.google.com/images/cleardot.gif"),ne.location&&"http"==ne.location.protocol||Or(n,"https"),Mr(n)),function(t,e){var n=new qn;if(ne.Image){var r=new Image;r.onload=le(ci,n,r,"TestLoadImage: loaded",!0,e),r.onerror=le(ci,n,r,"TestLoadImage: error",!1,e),r.onabort=le(ci,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=le(ci,n,r,"TestLoadImage: timeout",!1,e),ne.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Qn(2);t.G=0,t.j&&t.j.va(e),$i(t),xi(t)}function $i(t){t.G=0,t.I=-1,t.j&&(0==oi(t.i).length&&0==t.l.length||(t.i.i.length=0,ye(t.l),t.l.length=0),t.j.ua())}function Qi(t,e,n){var r=function(t){return t instanceof Dr?Cr(t):new Dr(t,void 0)}(n);if(""!=r.i)e&&Rr(r,e+"."+r.i),Pr(r,r.m);else{var i=ne.location;r=function(t,e,n,r){var i=new Dr(null,void 0);return t&&Or(i,t),e&&Rr(i,e),n&&Pr(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&Ae(t.aa,(function(t,e){Lr(r,e,t)})),e=t.D,n=t.sa,e&&n&&Lr(r,e,n),Lr(r,"VER",t.ma),Vi(t,r),r}function Xi(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new mi(new hi({ib:!0})):new mi(t.qa)).L=t.H,e}function Yi(){}function Ji(){if(xe&&!(10<=Number(We)))throw Error("Environmental error: no available transport.")}function Zi(t,e){yn.call(this),this.g=new Oi(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!be(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!be(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new no(this)}function to(t){or.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function eo(){sr.call(this),this.status=1}function no(t){this.g=t}(Zt=mi.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():rr.g(),this.C=this.u?er(this.u):er(rr),this.g.onreadystatechange=he(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void Ti(this,t)}t=n||"";var i=new _r(this.headers);r&&Sr(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Ii,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=ne.FormData&&t instanceof ne.FormData,!(0<=ve(wi,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ai(this),0<this.B&&((this.K=function(t){return xe&&He()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=he(this.pa,this)):this.A=xn(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Ti(this,t)}},Zt.pa=function(){void 0!==ee&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,bn(this,"timeout"),this.abort(8))},Zt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,bn(this,"complete"),bn(this,"abort"),_i(this))},Zt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_i(this,!0)),mi.Z.M.call(this)},Zt.Fa=function(){this.s||(this.F||this.v||this.l?Si(this):this.cb())},Zt.cb=function(){Si(this)},Zt.ba=function(){try{return 2<Ni(this)?this.g.status:-1}catch(t){return-1}},Zt.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Zt.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),gi(e)}},Zt.Da=function(){return this.m},Zt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Zt=Oi.prototype).ma=8,Zt.G=1,Zt.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},Zt.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new ur(this,this.h,t,void 0),n=this.s;if(this.P&&(n?De(n=Ne(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Ui(this,e,r),Lr(i=Cr(this.F),"RID",t),Lr(i,"CVER",22),this.D&&Lr(i,"X-HTTP-Session-Id",this.D),Vi(this,i),this.o&&n&&Di(i,this.o,n),ri(this.i,e),this.Ra&&Lr(i,"TYPE","init"),this.ja?(Lr(i,"$req",r),Lr(i,"SID","null"),e.$=!0,pr(e,i,null)):pr(e,i,r),this.G=2}}else 3==this.G&&(t?Fi(this,t):0==this.l.length||ti(this.i)||Fi(this))},Zt.Ga=function(){if(this.u=null,Ki(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Yn(he(this.bb,this),t)}},Zt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Qn(10),Pi(this),Ki(this))},Zt.ab=function(){null!=this.v&&(this.v=null,Pi(this),qi(this),Qn(19))},Zt.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Qn(2)):(this.h.info("Failed to ping google.com"),Qn(1))},(Zt=Yi.prototype).xa=function(){},Zt.wa=function(){},Zt.va=function(){},Zt.ua=function(){},Zt.Oa=function(){},Ji.prototype.g=function(t,e){return new Zi(t,e)},fe(Zi,yn),Zi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),kn(he(t.hb,t,e))),Qn(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Qi(t,null,t.W),Mi(t)},Zi.prototype.close=function(){Ri(this.g)},Zi.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Li(this.g,e)}else this.v?((e={}).__data__=In(t),Li(this.g,e)):Li(this.g,t)},Zi.prototype.M=function(){this.g.j=null,delete this.j,Ri(this.g),delete this.g,Zi.Z.M.call(this)},fe(to,or),fe(eo,sr),fe(no,Yi),no.prototype.xa=function(){bn(this.g,"a")},no.prototype.wa=function(t){bn(this.g,new to(t))},no.prototype.va=function(t){bn(this.g,new eo(t))},no.prototype.ua=function(){bn(this.g,"b")},Ji.prototype.createWebChannel=Ji.prototype.g,Zi.prototype.send=Zi.prototype.u,Zi.prototype.open=Zi.prototype.m,Zi.prototype.close=Zi.prototype.close,Jn.NO_ERROR=0,Jn.TIMEOUT=8,Jn.HTTP_ERROR=6,Zn.COMPLETE="complete",nr.EventType=ir,ir.OPEN="a",ir.CLOSE="b",ir.ERROR="c",ir.MESSAGE="d",yn.prototype.listen=yn.prototype.N,mi.prototype.listenOnce=mi.prototype.O,mi.prototype.getLastError=mi.prototype.La,mi.prototype.getLastErrorCode=mi.prototype.Da,mi.prototype.getStatus=mi.prototype.ba,mi.prototype.getResponseJson=mi.prototype.Qa,mi.prototype.getResponseText=mi.prototype.ga,mi.prototype.send=mi.prototype.ea;var ro=Jn,io=Zn,oo=Kn,so=10,ao=11,uo=hi,co=nr,ho=mi,lo=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();lo.o=-1;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var fo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},po=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return tt(e,t),e}(Error),vo=new xt("@firebase/firestore");function go(){return vo.logLevel}function mo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(vo.logLevel<=Nt.DEBUG){var r=e.map(wo);vo.debug.apply(vo,st(["Firestore (8.8.1): "+t],r))}}function yo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(vo.logLevel<=Nt.ERROR){var r=e.map(wo);vo.error.apply(vo,st(["Firestore (8.8.1): "+t],r))}}function bo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(vo.logLevel<=Nt.WARN){var r=e.map(wo);vo.warn.apply(vo,st(["Firestore (8.8.1): "+t],r))}}function wo(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Io(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.8.1) INTERNAL ASSERTION FAILED: "+t;throw yo(e),new Error(e)}function To(t,e){t||Io()}function Eo(t,e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function So(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var _o=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=So(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Ao(t,e){return t<e?-1:t>e?1:0}function No(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function ko(t){return t+"\0"}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Do=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new po(fo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new po(fo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new po(fo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new po(fo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Ao(this.nanoseconds,t.nanoseconds):Ao(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Co=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Do(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Oo(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ro(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Po(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var xo=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Io(),void 0===n?n=t.length-e:n>t.length-e&&Io(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tt(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new po(fo.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(xo),Mo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tt(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Mo.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new po(fo.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new po(fo.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new po(fo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new po(fo.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(xo),Vo=function(){function t(t){this.fields=t,t.sort(Fo.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return No(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Uo=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Ao(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Uo.EMPTY_BYTE_STRING=new Uo("");var jo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qo(t){if(To(!!t),"string"==typeof t){var e=0,n=jo.exec(t);if(To(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Bo(t.seconds),nanos:Bo(t.nanos)}}function Bo(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ko(t){return"string"==typeof t?Uo.fromBase64String(t):Uo.fromUint8Array(t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Go(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ho(t){var e=t.mapValue.fields.__previous_value__;return Go(e)?Ho(e):e}function zo(t){var e=qo(t.mapValue.fields.__local_write_time__.timestampValue);return new Do(e.seconds,e.nanos)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Wo(t){return null==t}function $o(t){return 0===t&&1/t==-1/0}function Qo(t){return"number"==typeof t&&Number.isInteger(t)&&!$o(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Xo=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Lo.fromString(e))},t.fromName=function(e){return new t(Lo.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Lo.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Lo.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Lo(e.slice()))},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Yo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Go(t)?4:10:Io()}function Jo(t,e){var n=Yo(t);if(n!==Yo(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return zo(t).isEqual(zo(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=qo(t.timestampValue),r=qo(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ko(t.bytesValue).isEqual(Ko(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Bo(t.geoPointValue.latitude)===Bo(e.geoPointValue.latitude)&&Bo(t.geoPointValue.longitude)===Bo(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Bo(t.integerValue)===Bo(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Bo(t.doubleValue),r=Bo(e.doubleValue);return n===r?$o(n)===$o(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return No(t.arrayValue.values||[],e.arrayValue.values||[],Jo);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Oo(n)!==Oo(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Jo(n[i],r[i])))return!1;return!0}(t,e);default:return Io()}}function Zo(t,e){return void 0!==(t.values||[]).find((function(t){return Jo(t,e)}))}function ts(t,e){var n=Yo(t),r=Yo(e);if(n!==r)return Ao(n,r);switch(n){case 0:return 0;case 1:return Ao(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Bo(t.integerValue||t.doubleValue),r=Bo(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return es(t.timestampValue,e.timestampValue);case 4:return es(zo(t),zo(e));case 5:return Ao(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ko(t),r=Ko(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Ao(n[i],r[i]);if(0!==o)return o}return Ao(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Ao(Bo(t.latitude),Bo(e.latitude));return 0!==n?n:Ao(Bo(t.longitude),Bo(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ts(n[i],r[i]);if(o)return o}return Ao(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Ao(r[s],o[s]);if(0!==a)return a;var u=ts(n[r[s]],i[o[s]]);if(0!==u)return u}return Ao(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Io()}}function es(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ao(t,e);var n=qo(t),r=qo(e),i=Ao(n.seconds,r.seconds);return 0!==i?i:Ao(n.nanos,r.nanos)}function ns(t){return rs(t)}function rs(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=qo(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ko(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Xo.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=rs(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+rs(t.fields[o])}return e+"}"}(t.mapValue):Io();var e,n}function is(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function os(t){return!!t&&"integerValue"in t}function ss(t){return!!t&&"arrayValue"in t}function as(t){return!!t&&"nullValue"in t}function us(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cs(t){return!!t&&"mapValue"in t}function hs(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return Ro(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=hs(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=hs(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ls=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!cs(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=hs(e)},t.prototype.setAll=function(t){var e=this,n=Fo.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=hs(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());cs(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Jo(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];cs(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Ro(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(hs(this.value))},t}();function fs(t){var e=[];return Ro(t.fields,(function(t,n){var r=new Fo([t]);if(cs(n)){var i=fs(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new Vo(e)
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var ps=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Co.min(),ls.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,ls.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,ls.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=ls.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=ls.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),ds=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function vs(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new ds(t,e,n,r,i,o,s)}function gs(t){var e=Eo(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+ns(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),Wo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ds(e.startAt)),e.endAt&&(n+="|ub:",n+=Ds(e.endAt)),e.h=n}return e.h}function ms(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Os(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Jo(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ps(t.startAt,e.startAt)&&Ps(t.endAt,e.endAt)}function ys(t){return Xo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var bs=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return tt(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new ws(t,n,r):"array-contains"===n?new Ss(t,r):"in"===n?new _s(t,r):"not-in"===n?new As(t,r):"array-contains-any"===n?new Ns(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Is(t,n):new Ts(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(ts(e,this.value)):null!==e&&Yo(this.value)===Yo(e)&&this.m(ts(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Io()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),ws=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Xo.fromName(r.referenceValue),i}return tt(e,t),e.prototype.matches=function(t){var e=Xo.comparator(t.key,this.key);return this.m(e)},e}(bs),Is=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Es("in",n),r}return tt(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(bs),Ts=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Es("not-in",n),r}return tt(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(bs);function Es(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Xo.fromName(t.referenceValue)}))}var Ss=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return tt(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return ss(e)&&Zo(e.arrayValue,this.value)},e}(bs),_s=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return tt(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Zo(this.value.arrayValue,e)},e}(bs),As=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return tt(e,t),e.prototype.matches=function(t){if(Zo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Zo(this.value.arrayValue,e)},e}(bs),Ns=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return tt(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!ss(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Zo(e.value.arrayValue,t)}))},e}(bs),ks=function(t,e){this.position=t,this.before=e};function Ds(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return ns(t)})).join(",")}var Cs=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Os(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Rs(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Xo.comparator(Xo.fromName(s.referenceValue),n.key):ts(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ps(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Jo(t.position[n],e.position[n]))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var xs=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function Ls(t,e,n,r,i,o,s,a){return new xs(t,e,n,r,i,o,s,a)}function Ms(t){return new xs(t)}function Fs(t){return!Wo(t.limit)&&"F"===t.limitType}function Vs(t){return!Wo(t.limit)&&"L"===t.limitType}function Us(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function js(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function qs(t){return null!==t.collectionGroup}function Bs(t){var e=Eo(t);if(null===e.p){e.p=[];var n=js(e),r=Us(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Cs(n)),e.p.push(new Cs(Fo.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Cs(Fo.keyField(),u))}}}return e.p}function Ks(t){var e=Eo(t);if(!e.T)if("F"===e.limitType)e.T=vs(e.path,e.collectionGroup,Bs(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Bs(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Cs(o.field,s))}var a=e.endAt?new ks(e.endAt.position,!e.endAt.before):null,u=e.startAt?new ks(e.startAt.position,!e.startAt.before):null;e.T=vs(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function Gs(t,e,n){return new xs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hs(t,e){return ms(Ks(t),Ks(e))&&t.limitType===e.limitType}function zs(t){return gs(Ks(t))+"|lt:"+t.limitType}function Ws(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+ns(e.value);var e})).join(", ")+"]"),Wo(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ds(t.startAt)),t.endAt&&(e+=", endAt: "+Ds(t.endAt)),"Target("+e+")"}(Ks(t))+"; limitType="+t.limitType+")"}function $s(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Xo.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Rs(t.startAt,Bs(t),e)||t.endAt&&Rs(t.endAt,Bs(t),e))}(t,e)}function Qs(t){return function(e,n){for(var r=!1,i=0,o=Bs(t);i<o.length;i++){var s=o[i],a=Xs(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Xs(t,e,n){var r=t.field.isKeyField()?Xo.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?ts(r,i):Io()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Io()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ys(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$o(e)?"-0":e}}function Js(t){return{integerValue:""+t}}function Zs(t,e){return Qo(e)?Js(e):Ys(t,e)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ta=function(){this._=void 0};function ea(t,e,n){return t instanceof ia?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof oa?sa(t,e):t instanceof aa?ua(t,e):function(t,e){var n=ra(t,e),r=ha(n)+ha(t.A);return os(n)&&os(t.A)?Js(r):Ys(t.R,r)}(t,e)}function na(t,e,n){return t instanceof oa?sa(t,e):t instanceof aa?ua(t,e):n}function ra(t,e){return t instanceof ca?os(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var ia=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tt(e,t),e}(ta),oa=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return tt(e,t),e}(ta);function sa(t,e){for(var n=la(e),r=function(t){n.some((function(e){return Jo(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var aa=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return tt(e,t),e}(ta);function ua(t,e){for(var n=la(e),r=function(t){n=n.filter((function(e){return!Jo(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ca=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return tt(e,t),e}(ta);function ha(t){return Bo(t.integerValue||t.doubleValue)}function la(t){return ss(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var fa=function(t,e){this.field=t,this.transform=e},pa=function(t,e){this.version=t,this.transformResults=e},da=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function va(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var ga=function(){};function ma(t,e,n){t instanceof Ta?function(t,e,n){var r=t.value.clone(),i=_a(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Ea?function(t,e,n){if(va(t.precondition,e)){var r=_a(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Sa(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function ya(t,e,n){t instanceof Ta?function(t,e,n){if(va(t.precondition,e)){var r=t.value.clone(),i=Aa(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Ia(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Ea?function(t,e,n){if(va(t.precondition,e)){var r=Aa(t.fieldTransforms,n,e),i=e.data;i.setAll(Sa(t)),i.setAll(r),e.convertToFoundDocument(Ia(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){va(t.precondition,e)&&e.convertToNoDocument(Co.min())}(t,e)}function ba(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=ra(o.transform,s||null);null!=a&&(null==n&&(n=ls.empty()),n.set(o.field,a))}return n||null}function wa(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&No(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof oa&&e instanceof oa||t instanceof aa&&e instanceof aa?No(t.elements,e.elements,Jo):t instanceof ca&&e instanceof ca?Jo(t.A,e.A):t instanceof ia&&e instanceof ia}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Ia(t){return t.isFoundDocument()?t.version:Co.min()}var Ta=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return tt(e,t),e}(ga),Ea=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return tt(e,t),e}(ga);function Sa(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function _a(t,e,n){var r=new Map;To(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,na(s,a,n[i]))}return r}function Aa(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,ea(a,u,e))}return r}var Na,ka,Da=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return tt(e,t),e}(ga),Ca=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return tt(e,t),e}(ga),Oa=function(t){this.count=t};function Ra(t){switch(t){case fo.OK:return Io();case fo.CANCELLED:case fo.UNKNOWN:case fo.DEADLINE_EXCEEDED:case fo.RESOURCE_EXHAUSTED:case fo.INTERNAL:case fo.UNAVAILABLE:case fo.UNAUTHENTICATED:return!1;case fo.INVALID_ARGUMENT:case fo.NOT_FOUND:case fo.ALREADY_EXISTS:case fo.PERMISSION_DENIED:case fo.FAILED_PRECONDITION:case fo.ABORTED:case fo.OUT_OF_RANGE:case fo.UNIMPLEMENTED:case fo.DATA_LOSS:return!0;default:return Io()}}function Pa(t){if(void 0===t)return yo("GRPC error has no .code"),fo.UNKNOWN;switch(t){case Na.OK:return fo.OK;case Na.CANCELLED:return fo.CANCELLED;case Na.UNKNOWN:return fo.UNKNOWN;case Na.DEADLINE_EXCEEDED:return fo.DEADLINE_EXCEEDED;case Na.RESOURCE_EXHAUSTED:return fo.RESOURCE_EXHAUSTED;case Na.INTERNAL:return fo.INTERNAL;case Na.UNAVAILABLE:return fo.UNAVAILABLE;case Na.UNAUTHENTICATED:return fo.UNAUTHENTICATED;case Na.INVALID_ARGUMENT:return fo.INVALID_ARGUMENT;case Na.NOT_FOUND:return fo.NOT_FOUND;case Na.ALREADY_EXISTS:return fo.ALREADY_EXISTS;case Na.PERMISSION_DENIED:return fo.PERMISSION_DENIED;case Na.FAILED_PRECONDITION:return fo.FAILED_PRECONDITION;case Na.ABORTED:return fo.ABORTED;case Na.OUT_OF_RANGE:return fo.OUT_OF_RANGE;case Na.UNIMPLEMENTED:return fo.UNIMPLEMENTED;case Na.DATA_LOSS:return fo.DATA_LOSS;default:return Io()}}(ka=Na||(Na={}))[ka.OK=0]="OK",ka[ka.CANCELLED=1]="CANCELLED",ka[ka.UNKNOWN=2]="UNKNOWN",ka[ka.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ka[ka.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ka[ka.NOT_FOUND=5]="NOT_FOUND",ka[ka.ALREADY_EXISTS=6]="ALREADY_EXISTS",ka[ka.PERMISSION_DENIED=7]="PERMISSION_DENIED",ka[ka.UNAUTHENTICATED=16]="UNAUTHENTICATED",ka[ka.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ka[ka.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ka[ka.ABORTED=10]="ABORTED",ka[ka.OUT_OF_RANGE=11]="OUT_OF_RANGE",ka[ka.UNIMPLEMENTED=12]="UNIMPLEMENTED",ka[ka.INTERNAL=13]="INTERNAL",ka[ka.UNAVAILABLE=14]="UNAVAILABLE",ka[ka.DATA_LOSS=15]="DATA_LOSS";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var xa=function(){function t(t,e){this.comparator=t,this.root=e||Ma.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ma.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ma.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new La(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new La(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new La(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new La(this.root,t,this.comparator,!0)},t}(),La=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Ma=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Io();if(this.right.isRed())throw Io();var t=this.left.check();if(t!==this.right.check())throw Io();return t+(this.isRed()?0:1)},t}();Ma.EMPTY=null,Ma.RED=!0,Ma.BLACK=!1,Ma.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Io()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Io()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Io()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Io()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Io()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ma(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Fa=function(){function t(t){this.comparator=t,this.data=new xa(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Va(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Va(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Va=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Ua=new xa(Xo.comparator);function ja(){return Ua}var qa=new xa(Xo.comparator);function Ba(){return qa}var Ka=new xa(Xo.comparator);var Ga=new Fa(Xo.comparator);function Ha(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ga,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var za=new Fa(Ao);function Wa(){return za}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var $a=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Qa.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Co.min(),r,Wa(),ja(),Ha())},t}(),Qa=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Uo.EMPTY_BYTE_STRING,n,Ha(),Ha(),Ha())},t}(),Xa=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Ya=function(t,e){this.targetId=t,this.V=e},Ja=function(t,e,n,r){void 0===n&&(n=Uo.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Za=function(){function t(){this.S=0,this.D=nu(),this.C=Uo.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Ha(),e=Ha(),n=Ha();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Io()}})),new Qa(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=nu()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),tu=function(){function t(t){this.W=t,this.G=new Map,this.H=ja(),this.J=eu(),this.Y=new Fa(Ao)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Io()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(ys(i))if(0===n){var o=new Xo(i.path);this.tt(e,o,ps.newNoDocument(o,Co.min()))}else To(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&ys(o.target)){var s=new Xo(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,ps.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=Ha();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new $a(t,n,this.Y,this.H,r);return this.H=ja(),this.J=eu(),this.Y=new Fa(Ao),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Za,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Fa(Ao),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||mo("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Za),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function eu(){return new xa(Xo.comparator)}function nu(){return new xa(Xo.comparator)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ru={asc:"ASCENDING",desc:"DESCENDING"},iu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ou=function(t,e){this.databaseId=t,this.I=e};function su(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function au(t,e){return t.I?e.toBase64():e.toUint8Array()}function uu(t,e){return su(t,e.toTimestamp())}function cu(t){return To(!!t),Co.fromTimestamp(function(t){var e=qo(t);return new Do(e.seconds,e.nanos)}(t))}function hu(t,e){return function(t){return new Lo(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function lu(t){var e=Lo.fromString(t);return To(xu(e)),e}function fu(t,e){return hu(t.databaseId,e.path)}function pu(t,e){var n=lu(e);if(n.get(1)!==t.databaseId.projectId)throw new po(fo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new po(fo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Xo(mu(n))}function du(t,e){return hu(t.databaseId,e)}function vu(t){var e=lu(t);return 4===e.length?Lo.emptyPath():mu(e)}function gu(t){return new Lo(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mu(t){return To(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function yu(t,e,n){return{name:fu(t,e),fields:n.value.mapValue.fields}}function bu(t,e){var n;if(e instanceof Ta)n={update:yu(t,e.key,e.value)};else if(e instanceof Da)n={delete:fu(t,e.key)};else if(e instanceof Ea)n={update:yu(t,e.key,e.data),updateMask:Pu(e.fieldMask)};else{if(!(e instanceof Ca))return Io();n={verify:fu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof ia)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof oa)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof aa)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ca)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Io()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:uu(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Io()}(t,e.precondition)),n}function wu(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?da.updateTime(cu(t.updateTime)):void 0!==t.exists?da.exists(t.exists):da.none()}(e.currentDocument):da.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)To("REQUEST_TIME"===e.setToServerValue),n=new ia;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new oa(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new aa(i)}else"increment"in e?n=new ca(t,e.increment):Io();var o=Fo.fromServerFormat(e.fieldPath);return new fa(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=pu(t,e.update.name),o=new ls({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new Vo(e.map((function(t){return Fo.fromServerFormat(t)})))}(e.updateMask);return new Ea(i,o,s,n,r)}return new Ta(i,o,n,r)}if(e.delete){var a=pu(t,e.delete);return new Da(a,n)}if(e.verify){var u=pu(t,e.verify);return new Ca(u,n)}return Io()}function Iu(t,e){return{documents:[du(t,e.path)]}}function Tu(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=du(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=du(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(us(t.value))return{unaryFilter:{field:Du(t.field),op:"IS_NAN"}};if(as(t.value))return{unaryFilter:{field:Du(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(us(t.value))return{unaryFilter:{field:Du(t.field),op:"IS_NOT_NAN"}};if(as(t.value))return{unaryFilter:{field:Du(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Du(t.field),op:ku(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Du(t.field),direction:Nu(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||Wo(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=_u(e.startAt)),e.endAt&&(n.structuredQuery.endAt=_u(e.endAt)),n}function Eu(t){var e=vu(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){To(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Su(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Cs(Cu(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Wo(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Au(n.startAt));var h=null;return n.endAt&&(h=Au(n.endAt)),Ls(e,i,a,s,u,"F",c,h)}function Su(t){return t?void 0!==t.unaryFilter?[Ru(t)]:void 0!==t.fieldFilter?[Ou(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Su(t)})).reduce((function(t,e){return t.concat(e)})):Io():[]}function _u(t){return{before:t.before,values:t.position}}function Au(t){var e=!!t.before,n=t.values||[];return new ks(n,e)}function Nu(t){return ru[t]}function ku(t){return iu[t]}function Du(t){return{fieldPath:t.canonicalString()}}function Cu(t){return Fo.fromServerFormat(t.fieldPath)}function Ou(t){return bs.create(Cu(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Io()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ru(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Cu(t.unaryFilter.field);return bs.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Cu(t.unaryFilter.field);return bs.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Cu(t.unaryFilter.field);return bs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Cu(t.unaryFilter.field);return bs.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Io()}}function Pu(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function xu(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Lu(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Fu(e)),e=Mu(t.get(n),e);return Fu(e)}function Mu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Fu(t){return t+""}function Vu(t){var e=t.length;if(To(e>=2),2===e)return To(""===t.charAt(0)&&""===t.charAt(1)),Lo.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Io(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Io()}o=s+2}return new Lo(r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Uu=function(t,e){this.seconds=t,this.nanoseconds=e},ju=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ju.store="owner",ju.key="owner";var qu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};qu.store="mutationQueues",qu.keyPath="userId";var Bu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Bu.store="mutations",Bu.keyPath="batchId",Bu.userMutationsIndex="userMutationsIndex",Bu.userMutationsKeyPath=["userId","batchId"];var Ku=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Lu(e)]},t.key=function(t,e,n){return[t,Lu(e),n]},t}();Ku.store="documentMutations",Ku.PLACEHOLDER=new Ku;var Gu=function(t,e){this.path=t,this.readTime=e},Hu=function(t,e){this.path=t,this.version=e},zu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};zu.store="remoteDocuments",zu.readTimeIndex="readTimeIndex",zu.readTimeIndexPath="readTime",zu.collectionReadTimeIndex="collectionReadTimeIndex",zu.collectionReadTimeIndexPath=["parentPath","readTime"];var Wu=function(t){this.byteSize=t};Wu.store="remoteDocumentGlobal",Wu.key="remoteDocumentGlobalKey";var $u=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};$u.store="targets",$u.keyPath="targetId",$u.queryTargetsIndexName="queryTargetsIndex",$u.queryTargetsKeyPath=["canonicalId","targetId"];var Qu=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Qu.store="targetDocuments",Qu.keyPath=["targetId","path"],Qu.documentTargetsIndex="documentTargetsIndex",Qu.documentTargetsKeyPath=["path","targetId"];var Xu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Xu.key="targetGlobalKey",Xu.store="targetGlobal";var Yu=function(t,e){this.collectionId=t,this.parent=e};Yu.store="collectionParents",Yu.keyPath=["collectionId","parent"];var Ju=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Ju.store="clientMetadata",Ju.keyPath="clientId";var Zu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Zu.store="bundles",Zu.keyPath="bundleId";var tc=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};tc.store="namedQueries",tc.keyPath="name";var ec=st(st([],st(st([],st(st([],st(st([],[qu.store,Bu.store,Ku.store,zu.store,$u.store,ju.store,Xu.store,Qu.store]),[Ju.store])),[Wu.store])),[Yu.store])),[Zu.store,tc.store]),nc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",rc=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),ic=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},oc=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Io(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),sc=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new ic,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new cc(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=dc(e.target.error);n.ft.reject(new cc(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new cc(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(mo("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new lc(e)},t}(),ac=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(ht())&&yo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return mo("SimpleDb","Removing database:",t),fc(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=ht(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return nt(this,void 0,void 0,(function(){var e,n=this;return rt(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(mo("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new cc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new po(fo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new cc(t,n))},i.onupgradeneeded=function(t){mo("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){mo("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return nt(this,void 0,void 0,(function(){var i,o,s,a,u;return rt(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,h;return rt(this,(function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=l.sent(),e=sc.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),oc.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(l.sent(),s),u)];case 4:return c=l.sent(),h="FirebaseError"!==c.name&&o<3,mo("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),a.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),uc=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return fc(this.Pt.delete())},t}(),cc=function(t){function e(e,n){var r=this;return(r=t.call(this,fo.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return tt(e,t),e}(po);function hc(t){return"IndexedDbTransactionError"===t.name}var lc=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(mo("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(mo("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),fc(n)},t.prototype.add=function(t){return mo("SimpleDb","ADD",this.store.name,t,t),fc(this.store.add(t))},t.prototype.get=function(t){var e=this;return fc(this.store.get(t)).next((function(n){return void 0===n&&(n=null),mo("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return mo("SimpleDb","DELETE",this.store.name,t),fc(this.store.delete(t))},t.prototype.count=function(){return mo("SimpleDb","COUNT",this.store.name),fc(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){mo("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new oc((function(n,r){e.onerror=function(t){var e=dc(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new oc((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new uc(i),s=e(i.primaryKey,i.value,o);if(s instanceof oc){var a=s.catch((function(t){return o.done(),oc.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return oc.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function fc(t){return new oc((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=dc(t.target.error);n(e)}}))}var pc=!1;function dc(t){var e=ac._t(ht());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new po("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return pc||(pc=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var vc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return tt(e,t),e}(rc);function gc(t,e){var n=Eo(t);return ac.It(n.Mt,e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var mc=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&ma(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&ya(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&ya(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Co.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Ha())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&No(this.mutations,t.mutations,(function(t,e){return wa(t,e)}))&&No(this.baseMutations,t.baseMutations,(function(t,e){return wa(t,e)}))},t}(),yc=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){To(e.mutations.length===r.length);for(var i=Ka,o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),bc=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Co.min()),void 0===o&&(o=Co.min()),void 0===s&&(s=Uo.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),wc=function(t){this.Lt=t};function Ic(t,e){if(e.document)return function(t,e,n){var r=pu(t,e.name),i=cu(e.updateTime),o=new ls({mapValue:{fields:e.fields}}),s=ps.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Xo.fromSegments(e.noDocument.path),r=Ac(e.noDocument.readTime),i=ps.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Xo.fromSegments(e.unknownDocument.path);return r=Ac(e.unknownDocument.version),ps.newUnknownDocument(o,r)}return Io()}function Tc(t,e,n){var r=Ec(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:fu(t,e.key),fields:e.data.value.mapValue.fields,updateTime:su(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new zu(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=_c(e.version);return s=e.hasCommittedMutations,new zu(null,new Gu(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=_c(e.version);return new zu(new Hu(c,h),null,null,!0,r,i)}return Io()}function Ec(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Sc(t){var e=new Do(t[0],t[1]);return Co.fromTimestamp(e)}function _c(t){var e=t.toTimestamp();return new Uu(e.seconds,e.nanoseconds)}function Ac(t){var e=new Do(t.seconds,t.nanoseconds);return Co.fromTimestamp(e)}function Nc(t,e){for(var n=(e.baseMutations||[]).map((function(e){return wu(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return wu(t.Lt,e)})),a=Do.fromMillis(e.localWriteTimeMs);return new mc(e.batchId,a,n,s)}function kc(t){var e,n,r=Ac(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Ac(t.lastLimboFreeSnapshotVersion):Co.min();return void 0!==t.query.documents?(To(1===(n=t.query).documents.length),e=Ks(Ms(vu(n.documents[0])))):e=function(t){return Ks(Eu(t))}(t.query),new bc(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Uo.fromBase64String(t.resumeToken))}function Dc(t,e){var n,r=_c(e.snapshotVersion),i=_c(e.lastLimboFreeSnapshotVersion);n=ys(e.target)?Iu(t.Lt,e.target):Tu(t.Lt,e.target);var o=e.resumeToken.toBase64();return new $u(e.targetId,gs(e.target),r,o,e.sequenceNumber,i,n)}function Cc(t){var e=Eu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Gs(e,e.limit,"L"):e}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Oc=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Rc(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Ac(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Rc(t).put({bundleId:(n=e).id,createTime:_c(cu(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Pc(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Cc(e.bundledQuery),readTime:Ac(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Pc(t).put(function(t){return{name:t.name,readTime:_c(cu(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Rc(t){return gc(t,Zu.store)}function Pc(t){return gc(t,tc.store)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var xc=function(){function t(){this.Bt=new Lc}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),oc.resolve()},t.prototype.getCollectionParents=function(t,e){return oc.resolve(this.Bt.getEntries(e))},t}(),Lc=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Fa(Lo.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Fa(Lo.comparator)).toArray()},t}(),Mc=function(){function t(){this.qt=new Lc}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Lu(i)};return Fc(t).put(o)}return oc.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[ko(e),""],!1,!0);return Fc(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Vu(o.parent))}return n}))},t}();function Fc(t){return gc(t,Yu.store)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Vc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Uc=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function jc(t,e,n){var r=t.store(Bu.store),i=t.store(Ku.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){To(1===a)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=Ku.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return oc.waitFor(o).next((function(){return c}))}function qc(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Io();e=t.noDocument}return JSON.stringify(e).length}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Uc.DEFAULT_COLLECTION_PERCENTILE=10,Uc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Uc.DEFAULT=new Uc(41943040,Uc.DEFAULT_COLLECTION_PERCENTILE,Uc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Uc.DISABLED=new Uc(-1,0,0);var Bc=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return To(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gc(t).$t({index:Bu.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Hc(t),s=Gc(t);return s.add({}).next((function(a){To("number"==typeof a);for(var u=new mc(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return bu(t.Lt,e)})),i=n.mutations.map((function(e){return bu(t.Lt,e)}));return new Bu(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new Fa((function(t,e){return Ao(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=Ku.key(i.userId,d.key.path,a);l=l.add(d.key.path.popLast()),h.push(s.put(c)),h.push(o.put(v,Ku.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[a]=u.keys()})),oc.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Gc(t).get(e).next((function(t){return t?(To(t.userId===n.userId),Nc(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?oc.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Gc(t).$t({index:Bu.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(To(e.batchId>=r),o=Nc(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Gc(t).$t({index:Bu.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gc(t).Nt(Bu.userMutationsIndex,n).next((function(t){return t.map((function(t){return Nc(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Ku.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Hc(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=Vu(u);if(a===n.userId&&e.path.isEqual(h))return Gc(t).get(c).next((function(t){if(!t)throw Io();To(t.userId===n.userId),o.push(Nc(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Fa(Ao),i=[];return e.forEach((function(e){var o=Ku.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Hc(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=Vu(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),oc.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Ku.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Fa(Ao);return Hc(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=Vu(u);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Gc(t).get(e).next((function(t){if(null===t)throw Io();To(t.userId===n.userId),r.push(Nc(n.R,t))})))})),oc.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return jc(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),oc.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return oc.resolve();var r=IDBKeyRange.lowerBound(Ku.prefixForUser(e.userId)),i=[];return Hc(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Vu(t[1]);i.push(o)}else r.done()})).next((function(){To(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Kc(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return zc(t).get(this.userId).next((function(t){return t||new qu(e.userId,-1,"")}))},t}();function Kc(t,e,n){var r=Ku.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Hc(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function Gc(t){return gc(t,Bu.store)}function Hc(t){return gc(t,Ku.store)}function zc(t){return gc(t,qu.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Wc=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),$c=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Wc(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Co.fromTimestamp(new Do(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Qc(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return To(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Qc(t).$t((function(s,a){var u=kc(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return oc.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Qc(t).$t((function(t,n){var r=kc(n);e(r)}))},t.prototype.Xt=function(t){return Xc(t).get(Xu.key).next((function(t){return To(null!==t),t}))},t.prototype.Zt=function(t,e){return Xc(t).put(Xu.key,e)},t.prototype.te=function(t,e){return Qc(t).put(Dc(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=gs(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Qc(t).$t({range:r,index:$u.queryTargetsIndexName},(function(t,n,r){var o=kc(n);ms(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Yc(t);return e.forEach((function(e){var s=Lu(e.path);i.push(o.put(new Qu(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),oc.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Yc(t);return oc.forEach(e,(function(e){var o=Lu(e.path);return oc.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Yc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Yc(t),i=Ha();return r.$t({range:n,kt:!0},(function(t,e,n){var r=Vu(t[1]),o=new Xo(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Lu(e.path),r=IDBKeyRange.bound([n],[ko(n)],!1,!0),i=0;return Yc(t).$t({index:Qu.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Qc(t).get(e).next((function(t){return t?kc(t):null}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Qc(t){return gc(t,$u.store)}function Xc(t){return gc(t,Xu.store)}function Yc(t){return gc(t,Qu.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Jc(t){return nt(this,void 0,void 0,(function(){return rt(this,(function(e){if(t.code!==fo.FAILED_PRECONDITION||t.message!==nc)throw t;return mo("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Zc(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Ao(n,i);return 0===s?Ao(r,o):s}var th=function(){function t(t){this.ne=t,this.buffer=new Fa(Zc),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Zc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),eh=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;mo("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return nt(e,void 0,void 0,(function(){var e;return rt(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return hc(e=n.sent())?(mo("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Jc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),nh=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return oc.resolve(lo.o);var r=new th(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(mo("LruGarbageCollector","Garbage collection skipped; disabled"),oc.resolve(Vc)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(mo("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Vc):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(mo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),go()<=Nt.DEBUG&&mo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),oc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),rh=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new nh(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return ih(t,n)},t.prototype.removeReference=function(t,e,n){return ih(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return ih(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return zc(t).Ot((function(r){return Kc(t,r,e).next((function(t){return t&&(n=!0),oc.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),Yc(t).delete([0,Lu(s.path)])}))}));i.push(u)}})).next((function(){return oc.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return ih(t,e)},t.prototype.we=function(t,e){var n,r=Yc(t),i=lo.o;return r.$t({index:Qu.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var s=r.path,a=r.sequenceNumber;0===o?(i!==lo.o&&e(new Xo(Vu(n)),i),i=a,n=s):i=lo.o})).next((function(){i!==lo.o&&e(new Xo(Vu(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function ih(t,e){return Yc(t).put(function(t,e){return new Qu(0,Lu(t.path),e)}(e,t.currentSequenceNumber))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var oh=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Ro(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.isEmpty=function(){return Po(this.inner)},t}(),sh=function(){function t(){this.changes=new oh((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Co.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:ps.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?oc.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),ah=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return hh(t).put(lh(e),n)},t.prototype.removeEntry=function(t,e){var n=hh(t),r=lh(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return hh(t).get(lh(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return hh(t).get(lh(e)).next((function(t){return{document:n.ye(e,t),size:qc(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=ja();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=ja(),i=new xa(Xo.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,qc(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return oc.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return hh(t).$t({range:r},(function(t,e,r){for(var s=Xo.fromSegments(t);o&&Xo.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ja(),o=e.path.length+1,s={};if(n.isEqual(Co.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Ec(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=zu.collectionReadTimeIndex}return hh(t).$t(s,(function(t,n,s){if(t.length===o){var a=Ic(r.R,n);e.path.isPrefixOf(a.key.path)?$s(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new uh(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return ch(t).get(Wu.key).next((function(t){return To(!!t),t}))},t.prototype.me=function(t,e){return ch(t).put(Wu.key,e)},t.prototype.ye=function(t,e){if(e){var n=Ic(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Co.min()))return n}return ps.newInvalidDocument(t)},t}(),uh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new oh((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return tt(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Fa((function(t,e){return Ao(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Tc(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=qc(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var h=Tc(e.Ie.R,ps.newNoDocument(o,Co.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),oc.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(sh);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ch(t){return gc(t,Wu.store)}function hh(t){return gc(t,zu.store)}function lh(t){return t.path.toArray()}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var fh=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;To(n<r&&n>=0&&r<=11);var o=new sc("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(ju.store)}(t),function(t){t.createObjectStore(qu.store,{keyPath:qu.keyPath}),t.createObjectStore(Bu.store,{keyPath:Bu.keyPath,autoIncrement:!0}).createIndex(Bu.userMutationsIndex,Bu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Ku.store)}(t),ph(t),function(t){t.createObjectStore(zu.store)}(t));var s=oc.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Qu.store),t.deleteObjectStore($u.store),t.deleteObjectStore(Xu.store)}(t),ph(t)),s=s.next((function(){return function(t){var e=t.store(Xu.store),n=new Xu(0,0,Co.min().toTimestamp(),0);return e.put(Xu.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Bu.store).Nt().next((function(n){t.deleteObjectStore(Bu.store),t.createObjectStore(Bu.store,{keyPath:Bu.keyPath,autoIncrement:!0}).createIndex(Bu.userMutationsIndex,Bu.userMutationsKeyPath,{unique:!0});var r=e.store(Bu.store),i=n.map((function(t){return r.put(t)}));return oc.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Ju.store,{keyPath:Ju.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Wu.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(zu.store);e.createIndex(zu.readTimeIndex,zu.readTimeIndexPath,{unique:!1}),e.createIndex(zu.collectionReadTimeIndex,zu.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Zu.store,{keyPath:Zu.keyPath})}(t),function(t){t.createObjectStore(tc.store,{keyPath:tc.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(zu.store).$t((function(t,n){e+=qc(n)})).next((function(){var n=new Wu(e);return t.store(Wu.store).put(Wu.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(qu.store),r=t.store(Bu.store);return n.Nt().next((function(n){return oc.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Bu.userMutationsIndex,i).next((function(r){return oc.forEach(r,(function(r){To(r.userId===n.userId);var i=Nc(e.R,r);return jc(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Qu.store),n=t.store(zu.store);return t.store(Xu.store).get(Xu.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new Lo(n),s=function(t){return[0,Lu(t)]}(o);r.push(e.get(s).next((function(n){return n?oc.resolve():function(n){return e.put(new Qu(0,Lu(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return oc.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(Yu.store,{keyPath:Yu.keyPath});var n=e.store(Yu.store),r=new Lc,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Lu(i)})}};return e.store(zu.store).$t({kt:!0},(function(t,e){var n=new Lo(t);return i(n.popLast())})).next((function(){return e.store(Ku.store).$t({kt:!0},(function(t,e){t[0];var n=t[1];t[2];var r=Vu(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store($u.store);return n.$t((function(t,r){var i=kc(r),o=Dc(e.R,i);return n.put(o)}))},t}();function ph(t){t.createObjectStore(Qu.store,{keyPath:Qu.keyPath}).createIndex(Qu.documentTargetsIndex,Qu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore($u.store,{keyPath:$u.keyPath}).createIndex($u.queryTargetsIndexName,$u.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Xu.store)}var dh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",vh=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new po(fo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rh(this,i),this.Le=n+"main",this.R=new wc(u),this.Be=new ac(this.Le,11,new fh(this.R)),this.qe=new $c(this.referenceDelegate,this.R),this.Ut=new Mc,this.Ue=function(t,e){return new ah(t,e)}(this.R,this.Ut),this.Ke=new Oc,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===h&&yo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new po(fo.FAILED_PRECONDITION,dh);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new lo(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return nt(e,void 0,void 0,(function(){return rt(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return nt(e,void 0,void 0,(function(){return rt(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return nt(e,void 0,void 0,(function(){return rt(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return mh(e).put(new Ju(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(hc(e))return mo("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return mo("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return gh(t).get(ju.key).next((function(t){return oc.resolve(e.tn(t))}))},t.prototype.en=function(t){return mh(t).delete(this.clientId)},t.prototype.nn=function(){return nt(this,void 0,void 0,(function(){var t,e,n,r,i=this;return rt(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=gc(t,Ju.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return oc.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?oc.resolve(!0):gh(t).get(ju.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new po(fo.FAILED_PRECONDITION,dh);return!1}}return!(!e.networkEnabled||!e.inForeground)||mh(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&mo("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return nt(this,void 0,void 0,(function(){var t=this;return rt(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[ju.store,Ju.store],(function(e){var n=new vc(e,lo.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return mh(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Bc.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;mo("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,ec,(function(o){return i=new vc(o,r.Ne?r.Ne.next():lo.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw yo("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new po(fo.FAILED_PRECONDITION,nc);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return gh(t).get(ju.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new po(fo.FAILED_PRECONDITION,dh)}))},t.prototype.Ze=function(t){var e=new ju(this.clientId,this.allowTabSynchronization,Date.now());return gh(t).put(ju.key,e)},t.yt=function(){return ac.yt()},t.prototype.Xe=function(t){var e=this,n=gh(t);return n.get(ju.key).next((function(t){return e.tn(t)?(mo("IndexedDbPersistence","Releasing primary lease."),n.delete(ju.key)):oc.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(yo("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),!lt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return mo("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return yo("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){yo("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function gh(t){return gc(t,ju.store)}function mh(t){return gc(t,Ju.store)}function yh(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var bh=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Xo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):qs(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Xo(e)).next((function(t){var e=Ba();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Ba();return this.Ut.getCollectionParents(t,i).next((function(s){return oc.forEach(s,(function(s){var a=function(t,e){return new xs(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c);null==h&&(h=ps.newInvalidDocument(c),r=r.insert(c,h)),ya(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){$s(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Ha(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Ea&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),wh=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Ha(),i=Ha(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Ih=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Co.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var s=i.Cn(e,o);return(Fs(e)||Vs(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(go()<=Nt.DEBUG&&mo("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ws(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Fa(Qs(t));return e.forEach((function(e,r){$s(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return go()<=Nt.DEBUG&&mo("QueryEngine","Using full collection scan to execute query:",Ws(e)),this.Sn.getDocumentsMatchingQuery(t,e,Co.min())},t}(),Th=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new xa(Ao),this.kn=new oh((function(t){return gs(t)}),ms),this.$n=Co.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new bh(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Eh(t,e,n,r){return new Th(t,e,n,r)}function Sh(t,e){return nt(this,void 0,void 0,(function(){var n,r,i,o;return rt(this,(function(s){switch(s.label){case 0:return n=Eo(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new bh(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=Ha(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var g=0,m=v.mutations;g<m.length;g++){var y=m[g];s=s.add(y.key)}}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function _h(t,e){var n=Eo(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=oc.resolve();return o.forEach((function(t){s=s.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);To(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),s.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Ah(t){var e=Eo(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Nh(t,e){var n=Eo(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return To(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}}));var a=ja();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(function(t,e,n,r,i){var o=Ha();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=ja();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Co.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):mo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(Co.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return oc.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.Fn=i,t}))}function kh(t,e){var n=Eo(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Dh(t,e){var n=Eo(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,oc.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new bc(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function Ch(t,e,n){return nt(this,void 0,void 0,(function(){var r,i,o,s;return rt(this,(function(a){switch(a.label){case 0:r=Eo(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!hc(s=a.sent()))throw s;return mo("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function Oh(t,e,n){var r=Eo(t),i=Co.min(),o=Ha();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Eo(t),i=r.kn.get(n);return void 0!==i?oc.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Ks(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Co.min(),n?o:Ha())})).next((function(t){return{documents:t,Bn:o}}))}))}function Rh(t,e){var n=Eo(t),r=Eo(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Ph(t){var e=Eo(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Eo(t),i=ja(),o=Ec(n),s=hh(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:zu.readTimeIndex,range:a},(function(t,e){var n=Ic(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Sc(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function xh(t){return nt(this,void 0,void 0,(function(){var e;return rt(this,(function(n){return[2,(e=Eo(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=hh(t),n=Co.min();return e.$t({index:zu.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Sc(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Lh=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return oc.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:cu(n.createTime)}),oc.resolve()},t.prototype.getNamedQuery=function(t,e){return oc.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Cc(t.bundledQuery),readTime:cu(t.readTime)}}(e)),oc.resolve()},t}(),Mh=function(){function t(){this.Wn=new Fa(Fh.Gn),this.zn=new Fa(Fh.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Fh(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Fh(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new Xo(new Lo([])),r=new Fh(n,t),i=new Fh(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Xo(new Lo([])),n=new Fh(e,t),r=new Fh(e,t+1),i=Ha();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Fh(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Fh=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Xo.comparator(t.key,e.key)||Ao(t.ns,e.ns)},t.Hn=function(t,e){return Ao(t.ns,e.ns)||Xo.comparator(t.key,e.key)},t}(),Vh=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Fa(Fh.Gn)}return t.prototype.checkEmpty=function(t){return oc.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new mc(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new Fh(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return oc.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return oc.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return oc.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return oc.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return oc.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Fh(e,0),i=new Fh(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),oc.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Fa(Ao);return e.forEach((function(t){var e=new Fh(t,0),i=new Fh(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),oc.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Xo.isDocumentKey(i)||(i=i.child(""));var o=new Fh(new Xo(i),0),s=new Fa(Ao);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),oc.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;To(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return oc.forEach(e.mutations,(function(i){var o=new Fh(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Fh(e,0),r=this.rs.firstAfterOrEqual(n);return oc.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,oc.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Uh=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new xa(Xo.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return oc.resolve(n?n.document.clone():ps.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ja();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():ps.newInvalidDocument(t))})),oc.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ja(),i=new Xo(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(a.path))break;h.compareTo(n)<=0||$s(e,c)&&(r=r.insert(c.key,c.clone()))}return oc.resolve(r)},t.prototype.fs=function(t,e){return oc.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new jh(this)},t.prototype.getSize=function(t){return oc.resolve(this.size)},t}(),jh=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return tt(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),oc.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(sh),qh=function(){function t(t){this.persistence=t,this.ds=new oh((function(t){return gs(t)}),ms),this.lastRemoteSnapshotVersion=Co.min(),this.highestTargetId=0,this.ws=0,this._s=new Mh,this.targetCount=0,this.ys=Wc.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),oc.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return oc.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return oc.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),oc.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),oc.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Wc(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,oc.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),oc.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,oc.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),oc.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return oc.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return oc.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),oc.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),oc.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),oc.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return oc.resolve(n)},t.prototype.containsKey=function(t,e){return oc.resolve(this._s.containsKey(e))},t}(),Bh=function(){function t(t,e){var n=this;this.gs={},this.Ne=new lo(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new qh(this),this.Ut=new xc,this.Ue=function(t,e){return new Uh(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new wc(e),this.Ke=new Lh(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Vh(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;mo("MemoryPersistence","Starting transaction:",t);var i=new Kh(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return oc.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Kh=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return tt(e,t),e}(rc),Gh=function(){function t(t){this.persistence=t,this.As=new Mh,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Io()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),oc.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),oc.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),oc.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oc.forEach(this.vs,(function(r){var i=Xo.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return oc.or([function(){return oc.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Hh=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function zh(t,e){return"firestore_clients_"+t+"_"+e}function Wh(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function $h(t,e){return"firestore_targets_"+t+"_"+e}Hh.UNAUTHENTICATED=new Hh(null),Hh.GOOGLE_CREDENTIALS=new Hh("google-credentials-uid"),Hh.FIRST_PARTY=new Hh("first-party-uid");var Qh=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new po(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(yo("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Xh=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new po(i.error.code,i.error.message)),o?new t(e,i.state,r):(yo("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Yh=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Wa(),s=0;i&&s<r.activeTargetIds.length;++s)i=Qo(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(yo("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Jh=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(yo("SharedClientState","Failed to parse online state: "+e),null)},t}(),Zh=function(){function t(){this.activeTargetIds=Wa()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),tl=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new xa(Ao),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=zh(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Zh),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return nt(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,h,l=this;return rt(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(zh(this.persistenceKey,r)))&&(o=Yh.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)h=c[u],this.Fs(h);return this.$s=[],this.window.addEventListener("pagehide",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem($h(this.persistenceKey,t));if(n){var r=Xh.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem($h(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return mo("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){mo("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){mo("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(mo("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void yo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return nt(e,void 0,void 0,(function(){var t,e,r,i,o,s;return rt(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=lo.o;if(null!=t)try{var n=JSON.parse(t);To("number"==typeof n),e=n}catch(t){yo("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==lo.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Qh(this.currentUser,t,e,n),i=Wh(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Wh(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=$h(this.persistenceKey,t),i=new Xh(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Yh.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Qh.Vs(new Hh(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Xh.Vs(r,e)},t.prototype.js=function(t){return Jh.Vs(t)},t.prototype.ii=function(t){return nt(this,void 0,void 0,(function(){return rt(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(mo("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Wa();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),el=function(){function t(){this.li=new Zh,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Zh,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),nl=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),rl=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){mo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){mo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),il={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ol=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),sl=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return tt(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var s=new ho;s.listenOnce(io.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case ro.NO_ERROR:var e=s.getResponseJson();mo("Connection","XHR received:",JSON.stringify(e)),i(e);break;case ro.TIMEOUT:mo("Connection",'RPC "'+t+'" timed out'),o(new po(fo.DEADLINE_EXCEEDED,"Request time out"));break;case ro.HTTP_ERROR:var n=s.getStatus();if(mo("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(fo).indexOf(e)>=0?e:fo.UNKNOWN}(r.status);o(new po(a,r.message))}else o(new po(fo.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new po(fo.UNAVAILABLE,"Connection failed."));break;default:Io()}}finally{mo("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Oi=function(t,e){var n,r=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new Ji,o=Hn(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new uo({})),this.Fi(s.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ht())||"object"==typeof navigator&&"ReactNative"===navigator.product||ht().indexOf("Electron/")>=0||function(){var t=ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||ht().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var a=r.join("");mo("Connection","Creating WebChannel: "+a,s);var u=i.createWebChannel(a,s),c=!1,h=!1,l=new ol({Ei:function(t){h?mo("Connection","Not sending because WebChannel is closed:",t):(c||(mo("Connection","Opening WebChannel transport."),u.open(),c=!0),mo("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,co.EventType.OPEN,(function(){h||mo("Connection","WebChannel transport opened.")})),f(u,co.EventType.CLOSE,(function(){h||(h=!0,mo("Connection","WebChannel transport closed"),l.Vi())})),f(u,co.EventType.ERROR,(function(t){h||(h=!0,bo("Connection","WebChannel transport errored:",t),l.Vi(new po(fo.UNAVAILABLE,"The operation could not be completed")))})),f(u,co.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];To(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){mo("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Na[t];if(void 0!==e)return Pa(e)}(o),a=i.message;void 0===s&&(s=fo.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),h=!0,l.Vi(new po(s,a)),u.close()}else mo("Connection","WebChannel received:",n),l.Si(n)}})),f(o,oo.STAT_EVENT,(function(t){t.stat===so?mo("Connection","Detected buffering proxy"):t.stat===ao&&mo("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);mo("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return mo("RestConnection","Received: ",t),t}),(function(e){throw bo("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=il[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function al(){return"undefined"!=typeof window?window:null}function ul(){return"undefined"!=typeof document?document:null}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function cl(t){return new ou(t,!0)}var hl=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&mo("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),ll=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new hl(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return nt(this,void 0,void 0,(function(){return rt(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return nt(this,void 0,void 0,(function(){return rt(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return nt(this,void 0,void 0,(function(){return rt(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===fo.RESOURCE_EXHAUSTED?(yo(e.toString()),yo("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===fo.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new po(fo.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return nt(t,void 0,void 0,(function(){return rt(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return mo("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(mo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),fl=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return tt(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Io()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(To(void 0===e||"string"==typeof e),Uo.fromBase64String(e||"")):(To(void 0===e||e instanceof Uint8Array),Uo.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?fo.UNKNOWN:Pa(t.code);return new po(e,t.message||"")}(a);n=new Ja(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=pu(t,r.document.name),o=cu(r.document.updateTime);var a=new ls({mapValue:{fields:r.document.fields}}),u=(s=ps.newFoundDocument(i,o,a),r.targetIds||[]),c=r.removedTargetIds||[];n=new Xa(u,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=pu(t,r.document),o=r.readTime?cu(r.readTime):Co.min(),a=ps.newNoDocument(i,o),s=r.removedTargetIds||[],n=new Xa([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=pu(t,r.document),o=r.removedTargetIds||[],n=new Xa([],o,i,null);else{if(!("filter"in e))return Io();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Oa(r),o=h.targetId,n=new Ya(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Co.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Co.min():e.readTime?cu(e.readTime):Co.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=gu(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=ys(r)?{documents:Iu(t,r)}:{query:Tu(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=au(t,e.resumeToken):e.snapshotVersion.compareTo(Co.min())>0&&(n.readTime=su(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Io()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=gu(this.R),e.removeTarget=t,this.cr(e)},e}(ll),pl=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return tt(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(To(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(To(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?cu(t.updateTime):cu(e);return n.isEqual(Co.min())&&(n=cu(e)),new pa(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=cu(t.commitTime);return this.listener.Tr(n,e)}return To(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=gu(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return bu(e.R,t)}))};this.cr(n)},e}(ll),dl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return tt(e,t),e.prototype.br=function(){if(this.Rr)throw new po(fo.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===fo.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new po(fo.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===fo.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new po(fo.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),vl=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(yo(e),this.Vr=!1):mo("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),gl=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return nt(o,void 0,void 0,(function(){return rt(this,(function(t){switch(t.label){case 0:return _l(this)?(mo("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return nt(this,void 0,void 0,(function(){var e;return rt(this,(function(n){switch(n.label){case 0:return(e=Eo(t)).Or.add(4),[4,yl(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,ml(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new vl(n,r)};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ml(t){return nt(this,void 0,void 0,(function(){var e,n;return rt(this,(function(r){switch(r.label){case 0:if(!_l(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function yl(t){return nt(this,void 0,void 0,(function(){var e,n;return rt(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function bl(t,e){var n=Eo(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Sl(n)?El(n):jl(n).er()&&Il(n,e))}function wl(t,e){var n=Eo(t),r=jl(n);n.$r.delete(e),r.er()&&Tl(n,e),0===n.$r.size&&(r.er()?r.ir():_l(n)&&n.Br.set("Unknown"))}function Il(t,e){t.qr.U(e.targetId),jl(t).mr(e)}function Tl(t,e){t.qr.U(e),jl(t).yr(e)}function El(t){t.qr=new tu({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),jl(t).start(),t.Br.Sr()}function Sl(t){return _l(t)&&!jl(t).tr()&&t.$r.size>0}function _l(t){return 0===Eo(t).Or.size}function Al(t){t.qr=void 0}function Nl(t){return nt(this,void 0,void 0,(function(){return rt(this,(function(e){return t.$r.forEach((function(e,n){Il(t,e)})),[2]}))}))}function kl(t,e){return nt(this,void 0,void 0,(function(){return rt(this,(function(n){return Al(t),Sl(t)?(t.Br.Nr(e),El(t)):t.Br.set("Unknown"),[2]}))}))}function Dl(t,e,n){return nt(this,void 0,void 0,(function(){var r,i,o;return rt(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Ja&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return nt(this,void 0,void 0,(function(){var n,r,i,o;return rt(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),mo("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Cl(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Xa?t.qr.X(e):e instanceof Ya?t.qr.rt(e):t.qr.et(e),n.isEqual(Co.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Ah(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(Uo.EMPTY_BYTE_STRING,n.snapshotVersion)),Tl(t,e);var r=new bc(n.target,e,1,n.sequenceNumber);Il(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return mo("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Cl(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Cl(t,e,n){return nt(this,void 0,void 0,(function(){var r=this;return rt(this,(function(i){switch(i.label){case 0:if(!hc(e))throw e;return t.Or.add(1),[4,yl(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Ah(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return nt(r,void 0,void 0,(function(){return rt(this,(function(e){switch(e.label){case 0:return mo("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,ml(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Ol(t,e){return e().catch((function(n){return Cl(t,n,e)}))}function Rl(t){return nt(this,void 0,void 0,(function(){var e,n,r,i,o;return rt(this,(function(s){switch(s.label){case 0:e=Eo(t),n=ql(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return _l(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,kh(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=ql(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Cl(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Pl(e)&&xl(e),[2]}}))}))}function Pl(t){return _l(t)&&!ql(t).tr()&&t.kr.length>0}function xl(t){ql(t).start()}function Ll(t){return nt(this,void 0,void 0,(function(){return rt(this,(function(e){return ql(t).Ar(),[2]}))}))}function Ml(t){return nt(this,void 0,void 0,(function(){var e,n,r,i;return rt(this,(function(o){for(e=ql(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function Fl(t,e,n){return nt(this,void 0,void 0,(function(){var r,i;return rt(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=yc.from(r,e,n),[4,Ol(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Rl(t)];case 2:return o.sent(),[2]}}))}))}function Vl(t,e){return nt(this,void 0,void 0,(function(){return rt(this,(function(n){switch(n.label){case 0:return e&&ql(t).pr?[4,function(t,e){return nt(this,void 0,void 0,(function(){var n,r;return rt(this,(function(i){switch(i.label){case 0:return Ra(r=e.code)&&r!==fo.ABORTED?(n=t.kr.shift(),ql(t).sr(),[4,Ol(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Rl(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Pl(t)&&xl(t),[2]}}))}))}function Ul(t,e){return nt(this,void 0,void 0,(function(){var n;return rt(this,(function(r){switch(r.label){case 0:return n=Eo(t),e?(n.Or.delete(2),[4,ml(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,yl(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function jl(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Eo(t);return r.br(),new fl(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Nl.bind(null,t),Ri:kl.bind(null,t),_r:Dl.bind(null,t)}),t.Mr.push((function(n){return nt(e,void 0,void 0,(function(){return rt(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Sl(t)?El(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Al(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function ql(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=Eo(t);return r.br(),new pl(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Ll.bind(null,t),Ri:Vl.bind(null,t),Ir:Ml.bind(null,t),Tr:Fl.bind(null,t)}),t.Mr.push((function(n){return nt(e,void 0,void 0,(function(){return rt(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,Rl(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(mo("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Bl=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ic,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new po(fo.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Kl(t,e){if(yo("AsyncQueue",e+": "+t),hc(t))return new po(fo.UNAVAILABLE,e+": "+t);throw t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Gl=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Xo.comparator(e.key,n.key)}:function(t,e){return Xo.comparator(t.key,e.key)},this.keyedMap=Ba(),this.sortedSet=new xa(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Hl=function(){function t(){this.Qr=new xa(Xo.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Io():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),zl=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Gl.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Hs(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Wl=function(){this.Wr=void 0,this.listeners=[]},$l=function(){this.queries=new oh((function(t){return zs(t)}),Hs),this.onlineState="Unknown",this.Gr=new Set};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ql(t,e){return nt(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return rt(this,(function(c){switch(c.label){case 0:if(n=Eo(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Wl),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Kl(a,"Initialization of query '"+Ws(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Zl(n),[2]}}))}))}function Xl(t,e){return nt(this,void 0,void 0,(function(){var n,r,i,o,s;return rt(this,(function(a){return n=Eo(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Yl(t,e){for(var n=Eo(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(s)&&(r=!0);u.Wr=s}}r&&Zl(n)}function Jl(t,e,n){var r=Eo(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Zl(t){t.Gr.forEach((function(t){t.next()}))}var tf=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new zl(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=zl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),ef=function(t){this.key=t},nf=function(t){this.key=t},rf=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Ha(),this.mutatedKeys=Ha(),this.lo=Qs(t),this.fo=new Gl(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Hl,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Fs(this.query)&&i.size===this.query.limit?i.last():null,c=Vs(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),l=$s(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),p=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data.isEqual(l.data)?f!==p&&(r.track({type:3,doc:l}),d=!0):n.yo(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(a=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(l?(s=s.add(l),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Fs(this.query)||Vs(this.query))for(;s.size>this.query.limit;){var h=Fs(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Io()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new zl(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Hl,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Ha(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new nf(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new ef(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Ha();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return zl.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),of=function(t,e,n){this.query=t,this.targetId=e,this.view=n},sf=function(t){this.key=t,this.bo=!1},af=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new oh((function(t){return zs(t)}),Hs),this.Vo=new Map,this.So=new Set,this.Do=new xa(Xo.comparator),this.Co=new Map,this.No=new Mh,this.xo={},this.Fo=new Map,this.ko=Wc.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function uf(t,e){return nt(this,void 0,void 0,(function(){var n,r,i,o,s,a;return rt(this,(function(u){switch(u.label){case 0:return n=Ff(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Dh(n.localStore,Ks(e))];case 2:return s=u.sent(),a=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,cf(n,e,r,"current"===a)];case 3:i=u.sent(),n.isPrimaryClient&&bl(n.remoteStore,s),u.label=4;case 4:return[2,i]}}))}))}function cf(t,e,n,r){return nt(this,void 0,void 0,(function(){var i,o,s,a,u,c;return rt(this,(function(h){switch(h.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return nt(this,void 0,void 0,(function(){var i,o,s;return rt(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Oh(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Tf(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,Oh(t.localStore,e,!0)];case 1:return i=h.sent(),o=new rf(e,i.Bn),s=o._o(i.documents),a=Qa.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Tf(t,n,u.To),c=new of(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function hf(t,e){return nt(this,void 0,void 0,(function(){var n,r,i;return rt(this,(function(o){switch(o.label){case 0:return n=Eo(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Hs(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Ch(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),wl(n.remoteStore,r.targetId),wf(n,r.targetId)})).catch(Jc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return wf(n,r.targetId),[4,Ch(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function lf(t,e,n){return nt(this,void 0,void 0,(function(){var r,i,o,s;return rt(this,(function(a){switch(a.label){case 0:r=Vf(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Eo(t),i=Do.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Ha());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=ba(c,n.get(c.key));null!=h&&s.push(new Ea(c.key,h,fs(h.value.mapValue),da.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new xa(Ao)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,_f(r,i.changes)];case 3:return a.sent(),[4,Rl(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Kl(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function ff(t,e){return nt(this,void 0,void 0,(function(){var n,r;return rt(this,(function(i){switch(i.label){case 0:n=Eo(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Nh(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(To(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?To(r.bo):t.removedDocuments.size>0&&(To(r.bo),r.bo=!1))})),[4,_f(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Jc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function pf(t,e,n){var r=Eo(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Eo(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&Zl(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function df(t,e,n){return nt(this,void 0,void 0,(function(){var r,i,o,s,a,u;return rt(this,(function(c){switch(c.label){case 0:return(r=Eo(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new xa(Xo.comparator)).insert(o,ps.newNoDocument(o,Co.min())),a=Ha().add(o),u=new $a(Co.min(),new Map,new Fa(Ao),s,a),[4,ff(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Sf(r),[3,4];case 2:return[4,Ch(r.localStore,e,!1).then((function(){return wf(r,e,n)})).catch(Jc)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function vf(t,e){return nt(this,void 0,void 0,(function(){var n,r,i;return rt(this,(function(o){switch(o.label){case 0:n=Eo(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,_h(n.localStore,e)];case 2:return i=o.sent(),bf(n,r,null),yf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,_f(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Jc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function gf(t,e,n){return nt(this,void 0,void 0,(function(){var r,i;return rt(this,(function(o){switch(o.label){case 0:r=Eo(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Eo(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return To(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),bf(r,e,n),yf(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,_f(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Jc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function mf(t,e){return nt(this,void 0,void 0,(function(){var n,r,i,o,s;return rt(this,(function(a){switch(a.label){case 0:_l((n=Eo(t)).remoteStore)||mo("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Eo(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Kl(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function yf(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function bf(t,e,n){var r=Eo(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function wf(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||If(t,e)}))}function If(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(wl(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Sf(t))}function Tf(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof ef?(t.No.addReference(o.key,e),Ef(t,o)):o instanceof nf?(mo("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||If(t,o.key)):Io()}}function Ef(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(mo("SyncEngine","New document in limbo: "+n),t.So.add(r),Sf(t))}function Sf(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Xo(Lo.fromString(e)),r=t.ko.next();t.Co.set(r,new sf(n)),t.Do=t.Do.insert(n,r),bl(t.remoteStore,new bc(Ks(Ms(n.path)),r,2,lo.o))}}function _f(t,e,n){return nt(this,void 0,void 0,(function(){var r,i,o,s;return rt(this,(function(a){switch(a.label){case 0:return r=Eo(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=wh.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return nt(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h;return rt(this,(function(l){switch(l.label){case 0:n=Eo(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return oc.forEach(e,(function(e){return oc.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return oc.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!hc(r=l.sent()))throw r;return mo("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.Fn.get(a),c=u.snapshotVersion,h=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(a,h));return[2]}}))}))}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Af(t,e){return nt(this,void 0,void 0,(function(){var n,r;return rt(this,(function(i){switch(i.label){case 0:return(n=Eo(t)).currentUser.isEqual(e)?[3,3]:(mo("SyncEngine","User change. New user:",e.toKey()),[4,Sh(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new po(fo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,_f(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Nf(t,e){var n=Eo(t),r=n.Co.get(e);if(r&&r.bo)return Ha().add(r.key);var i=Ha(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function kf(t,e){return nt(this,void 0,void 0,(function(){var n,r,i;return rt(this,(function(o){switch(o.label){case 0:return[4,Oh((n=Eo(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Tf(n,e.targetId,i.To),i)]}}))}))}function Df(t){return nt(this,void 0,void 0,(function(){var e;return rt(this,(function(n){return[2,Ph((e=Eo(t)).localStore).then((function(t){return _f(e,t)}))]}))}))}function Cf(t,e,n,r){return nt(this,void 0,void 0,(function(){var i,o;return rt(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=Eo(t),r=Eo(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):oc.resolve(null)}))}))}((i=Eo(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Rl(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(bf(i,e,r||null),yf(i,e),function(t,e){Eo(Eo(t)._n).Gt(e)}(i.localStore,e)):Io(),s.label=4;case 4:return[4,_f(i,o)];case 5:return s.sent(),[3,7];case 6:mo("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function Of(t,e){return nt(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return rt(this,(function(h){switch(h.label){case 0:return Ff(n=Eo(t)),Vf(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Rf(n,r.toArray())]);case 1:return i=h.sent(),n.$o=!0,[4,Ul(n.remoteStore,!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)a=s[o],bl(n.remoteStore,a);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return wf(n,e),Ch(n.localStore,e,!0)})),wl(n.remoteStore,e)})),[4,c]);case 4:return h.sent(),[4,Rf(n,u)];case 5:return h.sent(),function(t){var e=Eo(t);e.Co.forEach((function(t,n){wl(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new xa(Xo.comparator)}(n),n.$o=!1,[4,Ul(n.remoteStore,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function Rf(t,e,n){return nt(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h,l,f,p,d,v;return rt(this,(function(g){switch(g.label){case 0:n=Eo(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Vo.get(a))&&0!==c.length?[4,Dh(n.localStore,Ks(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),h=0,l=c,g.label=3;case 3:return h<l.length?(f=l[h],p=n.Po.get(f),[4,kf(n,p)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Rh(n.localStore,a)];case 8:return v=g.sent(),[4,Dh(n.localStore,v)];case 9:return u=g.sent(),[4,cf(n,Pf(v),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Pf(t){return Ls(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function xf(t){var e=Eo(t);return Eo(Eo(e.localStore).persistence).fn()}function Lf(t,e,n,r){return nt(this,void 0,void 0,(function(){var i,o,s;return rt(this,(function(a){switch(a.label){case 0:return(i=Eo(t)).$o?(mo("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Ph(i.localStore)];case 3:return o=a.sent(),s=$a.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,_f(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Ch(i.localStore,e,!0)];case 6:return a.sent(),wf(i,e,r),[3,8];case 7:Io(),a.label=8;case 8:return[2]}}))}))}function Mf(t,e,n){return nt(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,l,f;return rt(this,(function(p){switch(p.label){case 0:if(!(r=Ff(t)).$o)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(mo("SyncEngine","Adding an already active target "+s),[3,5]):[4,Rh(r.localStore,s)]):[3,6];case 2:return a=p.sent(),[4,Dh(r.localStore,a)];case 3:return u=p.sent(),[4,cf(r,Pf(a),u.targetId,!1)];case 4:p.sent(),bl(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return rt(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Ch(r.localStore,t,!1).then((function(){wl(r.remoteStore,t),wf(r,t)})).catch(Jc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,l=n,p.label=7;case 7:return h<l.length?(f=l[h],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Ff(t){var e=Eo(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ff.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=df.bind(null,e),e.vo._r=Yl.bind(null,e.eventManager),e.vo.Mo=Jl.bind(null,e.eventManager),e}function Vf(t){var e=Eo(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vf.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gf.bind(null,e),e}var Uf=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return nt(this,void 0,void 0,(function(){return rt(this,(function(e){switch(e.label){case 0:return this.R=cl(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Eh(this.persistence,new Ih,t.initialUser,this.R)},t.prototype.qo=function(t){return new Bh(Gh.bs,this.R)},t.prototype.Bo=function(t){return new el},t.prototype.terminate=function(){return nt(this,void 0,void 0,(function(){return rt(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),jf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return tt(e,t),e.prototype.initialize=function(e){return nt(this,void 0,void 0,(function(){return rt(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,xh(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,Vf(this.Qo.syncEngine)];case 4:return n.sent(),[4,Rl(this.Qo.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ko=function(t){return Eh(this.persistence,new Ih,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new eh(e,t.asyncQueue)},e.prototype.qo=function(t){var e=yh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Uc.withCacheSize(this.cacheSizeBytes):Uc.DEFAULT;return new vh(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,al(),ul(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new el},e}(Uf),qf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return tt(e,t),e.prototype.initialize=function(e){return nt(this,void 0,void 0,(function(){var n,r=this;return rt(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof tl?(this.sharedClientState.syncEngine={ui:Cf.bind(null,n),ai:Lf.bind(null,n),hi:Mf.bind(null,n),fn:xf.bind(null,n),ci:Df.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return nt(r,void 0,void 0,(function(){return rt(this,(function(e){switch(e.label){case 0:return[4,Of(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=al();if(!tl.yt(e))throw new po(fo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=yh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new tl(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(jf),Bf=function(){function t(){}return t.prototype.initialize=function(t,e){return nt(this,void 0,void 0,(function(){var n=this;return rt(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return pf(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Af.bind(null,this.syncEngine),[4,Ul(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new $l},t.prototype.createDatastore=function(t){var e,n=cl(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new sl(e));return function(t,e,n){return new dl(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return pf(s.syncEngine,t,0)},o=rl.yt()?new rl:new nl,new gl(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new af(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return nt(this,void 0,void 0,(function(){var e;return rt(this,(function(n){switch(n.label){case 0:return e=Eo(t),mo("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,yl(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),Kf=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Gf=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return nt(this,void 0,void 0,(function(){var e,n=this;return rt(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new po(fo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return nt(this,void 0,void 0,(function(){var n,r,i,o,s,a;return rt(this,(function(u){switch(u.label){case 0:return n=Eo(t),r=gu(n.R)+"/documents",i={documents:e.map((function(t){return fu(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){To(!!e.found),e.found.name,e.found.updateTime;var n=pu(t,e.found.name),r=cu(e.found.updateTime),i=new ls({mapValue:{fields:e.found.fields}});return ps.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){To(!!e.missing),To(!!e.readTime);var n=pu(t,e.missing),r=cu(e.readTime);return ps.newNoDocument(n,r)}(t,e):Io()}(n.R,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());To(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Da(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return nt(this,void 0,void 0,(function(){var t,e=this;return rt(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Xo.fromPath(n);e.mutations.push(new Ca(r,e.precondition(r)))})),[4,function(t,e){return nt(this,void 0,void 0,(function(){var n,r,i;return rt(this,(function(o){switch(o.label){case 0:return n=Eo(t),r=gu(n.R)+"/documents",i={writes:e.map((function(t){return bu(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Io();e=Co.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new po(fo.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?da.updateTime(e):da.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Co.min()))throw new po(fo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return da.updateTime(e)}return da.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),Hf=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new hl(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return nt(t,void 0,void 0,(function(){var t,e,n=this;return rt(this,(function(r){return t=new Gf(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Wo(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ra(e)}return!1},t}(),zf=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Hh.UNAUTHENTICATED,this.clientId=_o.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return nt(r,void 0,void 0,(function(){return rt(this,(function(e){switch(e.label){case 0:return mo("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return nt(this,void 0,void 0,(function(){return rt(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new po(fo.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new ic;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return nt(t,void 0,void 0,(function(){var t,n;return rt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Kl(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Wf(t,e){return nt(this,void 0,void 0,(function(){var n,r,i=this;return rt(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),mo("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return nt(i,void 0,void 0,(function(){return rt(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Sh(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function $f(t,e){return nt(this,void 0,void 0,(function(){var n,r;return rt(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Qf(t)];case 1:return n=i.sent(),mo("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return nt(this,void 0,void 0,(function(){var n,r;return rt(this,(function(i){switch(i.label){case 0:return(n=Eo(t)).asyncQueue.verifyOperationInProgress(),mo("RemoteStore","RemoteStore received new credentials"),r=_l(n),n.Or.add(3),[4,yl(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,ml(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function Qf(t){return nt(this,void 0,void 0,(function(){return rt(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(mo("FirestoreClient","Using default OfflineComponentProvider"),[4,Wf(t,new Uf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function Xf(t){return nt(this,void 0,void 0,(function(){return rt(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(mo("FirestoreClient","Using default OnlineComponentProvider"),[4,$f(t,new Bf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Yf(t){return Qf(t).then((function(t){return t.persistence}))}function Jf(t){return Qf(t).then((function(t){return t.localStore}))}function Zf(t){return Xf(t).then((function(t){return t.remoteStore}))}function tp(t){return Xf(t).then((function(t){return t.syncEngine}))}function ep(t){return nt(this,void 0,void 0,(function(){var e,n;return rt(this,(function(r){switch(r.label){case 0:return[4,Xf(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=uf.bind(null,e.syncEngine),n.onUnlisten=hf.bind(null,e.syncEngine),n)]}}))}))}function np(t,e,n){var r=this;void 0===n&&(n={});var i=new ic;return t.asyncQueue.enqueueAndForget((function(){return nt(r,void 0,void 0,(function(){var r;return rt(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Kf({next:function(o){e.enqueueAndForget((function(){return Xl(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new po(fo.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new po(fo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new tf(Ms(n.path),o,{includeMetadataChanges:!0,so:!0});return Ql(t,s)},[4,ep(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function rp(t,e,n){var r=this;void 0===n&&(n={});var i=new ic;return t.asyncQueue.enqueueAndForget((function(){return nt(r,void 0,void 0,(function(){var r;return rt(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Kf({next:function(n){e.enqueueAndForget((function(){return Xl(t,s)})),n.fromCache&&"server"===r.source?i.reject(new po(fo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new tf(n,o,{includeMetadataChanges:!0,so:!0});return Ql(t,s)},[4,ep(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var ip=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},op=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),sp=new Map,ap=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},up=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(Hh.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),cp=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),hp=function(){function t(t){var e=this;this.currentUser=Hh.UNAUTHENTICATED,this.oc=new ic,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){mo("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(mo("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(mo("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(To("string"==typeof n.accessToken),new ap(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return nt(n,void 0,void 0,(function(){return rt(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return To(null===t||"string"==typeof t),new Hh(t)},t}(),lp=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Hh.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),fp=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new lp(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(Hh.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function pp(t,e,n){if(!n)throw new po(fo.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function dp(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new po(fo.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function vp(t,e,n,r){if(!0===e&&!0===r)throw new po(fo.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function gp(t){if(!Xo.isDocumentKey(t))throw new po(fo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function mp(t){if(Xo.isDocumentKey(t))throw new po(fo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function yp(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Io()}function bp(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new po(fo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=yp(t);throw new po(fo.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function wp(t,e){if(e<=0)throw new po(fo.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ip=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new po(fo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new po(fo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,vp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Tp=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ip({}),this._settingsFrozen=!1,t instanceof op?(this._databaseId=t,this._credentials=new up):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new po(fo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new op(t.options.projectId)}(t),this._credentials=new hp(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new po(fo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new po(fo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ip(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new up;switch(t.type){case"gapi":var e=t.client;return To(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new fp(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new po(fo.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=sp.get(this))&&(mo("ComponentProvider","Removing Datastore"),sp.delete(this),t.terminate()),Promise.resolve();var t},t}(),Ep=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new _p(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Sp=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),_p=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Ms(r))||this)._path=r,i.type="collection",i}return tt(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Ep(this.firestore,null,new Xo(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Sp);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ap(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=wt(t),pp("collection","path",e),t instanceof Tp)return mp(n=Lo.fromString.apply(Lo,st([e],r))),new _p(t,null,n);if(!(t instanceof Ep||t instanceof _p))throw new po(fo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return mp(n=Lo.fromString.apply(Lo,st([t.path],r)).child(Lo.fromString(e))),new _p(t.firestore,null,n)}function Np(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=wt(t),1===arguments.length&&(e=_o.u()),pp("doc","path",e),t instanceof Tp)return gp(n=Lo.fromString.apply(Lo,st([e],r))),new Ep(t,null,new Xo(n));if(!(t instanceof Ep||t instanceof _p))throw new po(fo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return gp(n=t._path.child(Lo.fromString.apply(Lo,st([e],r)))),new Ep(t.firestore,t instanceof _p?t.converter:null,new Xo(n))}function kp(t,e){return t=wt(t),e=wt(e),(t instanceof Ep||t instanceof _p)&&(e instanceof Ep||e instanceof _p)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Dp(t,e){return t=wt(t),e=wt(e),t instanceof Sp&&e instanceof Sp&&t.firestore===e.firestore&&Hs(t._query,e._query)&&t.converter===e.converter
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Cp=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new hl(this,"async_queue_retry"),this.Ic=function(){var e=ul();e&&mo("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=ul();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=ul();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new ic;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return nt(this,void 0,void 0,(function(){var t,e=this;return rt(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!hc(t=n.sent()))throw t;return mo("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,yo("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=Bl.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&Io()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return nt(this,void 0,void 0,(function(){var t;return rt(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Op(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Rp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Cp,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return tt(e,t),e.prototype._terminate=function(){return this._firestoreClient||xp(this),this._firestoreClient.terminate()},e}(Tp);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Pp(t){return t._firestoreClient||xp(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function xp(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new ip(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new zf(t._credentials,t._queue,r)}function Lp(t,e,n){var r=this,i=new ic;return t.asyncQueue.enqueue((function(){return nt(r,void 0,void 0,(function(){var r;return rt(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Wf(t,n)];case 1:return o.sent(),[4,$f(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===fo.FAILED_PRECONDITION||t.code===fo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Mp(t){if(t._initialized||t._terminated)throw new po(fo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Fp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new po(fo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fo(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Vp=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Uo.fromBase64String(e))}catch(e){throw new po(fo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Uo.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Up=function(t){this._methodName=t},jp=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new po(fo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new po(fo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Ao(this._lat,t._lat)||Ao(this._long,t._long)},t}(),qp=/^__.*__$/,Bp=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Ea(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ta(t,this.data,e,this.fieldTransforms)},t}(),Kp=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Ea(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Gp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Io()}}var Hp=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(t){return ld(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(Gp(this.Nc)&&qp.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),zp=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||cl(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new Hp({Nc:t,methodName:e,qc:n,path:Fo.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Wp(t){var e=t._freezeSettings(),n=cl(t._databaseId);return new zp(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $p(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);ad("Data must be an object, but it was:",s,r);var a,u,c=od(r,s);if(o.merge)a=new Vo(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=ud(e,f[l],n);if(!s.contains(p))throw new po(fo.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");fd(h,p)||h.push(p)}a=new Vo(h),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new Bp(new ls(c),a,u)}var Qp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tt(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Up);function Xp(t,e,n){return new Hp({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Yp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tt(e,t),e.prototype._toFieldTransform=function(t){return new fa(t.path,new ia)},e.prototype.isEqual=function(t){return t instanceof e},e}(Up),Jp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return tt(e,t),e.prototype._toFieldTransform=function(t){var e=Xp(this,t,!0),n=this.Kc.map((function(t){return id(t,e)})),r=new oa(n);return new fa(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Up),Zp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return tt(e,t),e.prototype._toFieldTransform=function(t){var e=Xp(this,t,!0),n=this.Kc.map((function(t){return id(t,e)})),r=new aa(n);return new fa(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Up),td=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return tt(e,t),e.prototype._toFieldTransform=function(t){var e=new ca(t.R,Zs(t.R,this.Qc));return new fa(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Up);function ed(t,e,n,r){var i=t.Uc(1,e,n);ad("Data must be an object, but it was:",i,r);var o=[],s=ls.empty();Ro(r,(function(t,r){var a=hd(e,t,n);r=wt(r);var u=i.Oc(a);if(r instanceof Qp)o.push(a);else{var c=id(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Vo(o);return new Kp(s,a,i.fieldTransforms)}function nd(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[ud(e,r,n)],u=[i];if(o.length%2!=0)throw new po(fo.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(ud(e,o[c])),u.push(o[c+1]);for(var h=[],l=ls.empty(),f=a.length-1;f>=0;--f)if(!fd(h,a[f])){var p=a[f],d=u[f];d=wt(d);var v=s.Oc(p);if(d instanceof Qp)h.push(p);else{var g=id(d,v);null!=g&&(h.push(p),l.set(p,g))}}var m=new Vo(h);return new Kp(l,m,s.fieldTransforms)}function rd(t,e,n,r){return void 0===r&&(r=!1),id(n,t.Uc(r?4:3,e))}function id(t,e){if(sd(t=wt(t)))return ad("Unsupported field value:",e,t),od(t,e);if(t instanceof Up)return function(t,e){if(!Gp(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=id(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=wt(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Zs(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Do.fromDate(t);return{timestampValue:su(e.R,n)}}if(t instanceof Do)return n=new Do(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:su(e.R,n)};if(t instanceof jp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Vp)return{bytesValue:au(e.R,t._byteString)};if(t instanceof Ep){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:hu(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+yp(t))}(t,e)}function od(t,e){var n={};return Po(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ro(t,(function(t,r){var i=id(r,e.Fc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function sd(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Do||t instanceof jp||t instanceof Vp||t instanceof Ep||t instanceof Up)}function ad(t,e,n){if(!sd(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=yp(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function ud(t,e,n){if((e=wt(e))instanceof Fp)return e._internalPath;if("string"==typeof e)return hd(t,e);throw ld("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var cd=new RegExp("[~\\*/\\[\\]]");function hd(t,e,n){if(e.search(cd)>=0)throw ld("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Fp.bind.apply(Fp,st([void 0],e.split(".")))))._internalPath}catch(r){throw ld("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function ld(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new po(fo.INVALID_ARGUMENT,(a+=". ")+t+u)}function fd(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var pd=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ep(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new dd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(vd("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),dd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tt(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(pd);function vd(t,e){return"string"==typeof e?hd(t,e):e instanceof Fp?e._internalPath:e._delegate._internalPath}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var gd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),md=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return tt(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new yd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(vd("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(pd),yd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tt(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(md),bd=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new gd(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new yd(n._firestore,n._userDataWriter,r.key,r,new gd(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new po(fo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new yd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new gd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new yd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new gd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:wd(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function wd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Io()}}function Id(t,e){return t instanceof md&&e instanceof md?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof bd&&e instanceof bd&&t._firestore===e._firestore&&Dp(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Td(t){if(Vs(t)&&0===t.explicitOrderBy.length)throw new po(fo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ed=function(){};function Sd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var _d=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return tt(e,t),e.prototype._apply=function(t){var e=Wp(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new po(fo.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Rd(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var l=h[c];u.push(Od(r,t,l))}a={arrayValue:{values:u}}}else a=Od(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Rd(s,o),a=rd(n,"where",s,"in"===o||"not-in"===o);var f=bs.create(i,o,a);return function(t,e){if(e.g()){var n=js(t);if(null!==n&&!n.isEqual(e.field))throw new po(fo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Us(t);null!==r&&Pd(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new po(fo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new po(fo.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Sp(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new xs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Ed),Ad=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return tt(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new po(fo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new po(fo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Cs(e,n);return function(t,e){if(null===Us(t)){var n=js(t);null!==n&&Pd(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new Sp(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new xs(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Ed),Nd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return tt(e,t),e.prototype._apply=function(t){return new Sp(t.firestore,t.converter,Gs(t._query,this.Hc,this.Jc))},e}(Ed),kd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return tt(e,t),e.prototype._apply=function(t){var e=Cd(t,this.type,this.Yc,this.Xc);return new Sp(t.firestore,t.converter,function(t,e){return new xs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Ed),Dd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return tt(e,t),e.prototype._apply=function(t){var e=Cd(t,this.type,this.Yc,this.Xc);return new Sp(t.firestore,t.converter,function(t,e){return new xs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Ed);function Cd(t,e,n,r){if(n[0]=wt(n[0]),n[0]instanceof pd)return function(t,e,n,r,i){if(!r)throw new po(fo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Bs(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(is(e,r.key));else{var c=r.data.field(u.field);if(Go(c))throw new po(fo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new po(fo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new ks(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Wp(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new po(fo.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new po(fo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!qs(t)&&-1!==c.indexOf("/"))throw new po(fo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Lo.fromString(c));if(!Xo.isDocumentKey(h))throw new po(fo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new Xo(h);a.push(is(e,l))}else{var f=rd(n,r,c);a.push(f)}}return new ks(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Od(t,e,n){if("string"==typeof(n=wt(n))){if(""===n)throw new po(fo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!qs(e)&&-1!==n.indexOf("/"))throw new po(fo.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Lo.fromString(n));if(!Xo.isDocumentKey(r))throw new po(fo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return is(t,new Xo(r))}if(n instanceof Ep)return is(t,n._key);throw new po(fo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+yp(n)+".")}function Rd(t,e){if(!Array.isArray(t)||0===t.length)throw new po(fo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new po(fo.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Pd(t,e,n){if(!n.isEqual(e))throw new po(fo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var xd=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Yo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Bo(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ko(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Io()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Ro(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new jp(Bo(t.latitude),Bo(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Ho(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(zo(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=qo(t);return new Do(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Lo.fromString(t);To(xu(n));var r=new op(n.get(1),n.get(3)),i=new Xo(n.popFirst(5));return r.isEqual(e)||yo("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ld(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Md=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return tt(e,t),e.prototype.convertBytes=function(t){return new Vp(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ep(this.firestore,null,e)},e}(xd),Fd=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Wp(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Vd(t,this._firestore),i=Ld(r.converter,e,n),o=$p(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,da.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Vd(t,this._firestore);return o="string"==typeof(e=wt(e))||e instanceof Fp?nd(this._dataReader,"WriteBatch.update",s._key,e,n,r):ed(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,da.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Vd(t,this._firestore);return this._mutations=this._mutations.concat(new Da(e._key,da.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new po(fo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Vd(t,e){if((t=wt(t)).firestore!==e)throw new po(fo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ud=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return tt(e,t),e.prototype.convertBytes=function(t){return new Vp(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ep(this.firestore,null,e)},e}(xd);function jd(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=bp(t,Ep);var o=bp(t.firestore,Rp),s=Wp(o);return Bd(o,[("string"==typeof(e=wt(e))||e instanceof Fp?nd(s,"updateDoc",t._key,e,n,r):ed(s,"updateDoc",t._key,e)).toMutation(t._key,da.exists(!0))])}function qd(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=wt(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Op(i[a])||(s=i[a],a++);var u,c,h,l={includeMetadataChanges:s.includeMetadataChanges};if(Op(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Ep)c=bp(t.firestore,Rp),h=Ms(t._key.path),u={next:function(e){i[a]&&i[a](Kd(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=bp(t,Sp);c=bp(p.firestore,Rp),h=p._query;var d=new Ud(c);u={next:function(t){i[a]&&i[a](new bd(c,d,p,t))},error:i[a+1],complete:i[a+2]},Td(t._query)}return function(t,e,n,r){var i=this,o=new Kf(r),s=new tf(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return nt(i,void 0,void 0,(function(){var e;return rt(this,(function(n){switch(n.label){case 0:return e=Ql,[4,ep(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return nt(i,void 0,void 0,(function(){var e;return rt(this,(function(n){switch(n.label){case 0:return e=Xl,[4,ep(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Pp(c),h,l,u)}function Bd(t,e){return function(t,e){var n=this,r=new ic;return t.asyncQueue.enqueueAndForget((function(){return nt(n,void 0,void 0,(function(){var n;return rt(this,(function(i){switch(i.label){case 0:return n=lf,[4,tp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Pp(t),e)}function Kd(t,e,n){var r=n.docs.get(e._key),i=new Ud(t);return new md(t,i,e._key,r,new gd(n.hasPendingWrites,n.fromCache),e.converter)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Gd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return tt(e,t),e.prototype.get=function(e){var n=this,r=Vd(e,this._firestore),i=new Ud(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new md(n._firestore,i,r._key,t._document,new gd(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Wp(t)}return t.prototype.get=function(t){var e=this,n=Vd(t,this._firestore),r=new Md(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Io();var i=t[0];if(i.isFoundDocument())return new pd(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new pd(e._firestore,r,n._key,null,n.converter);throw Io()}))},t.prototype.set=function(t,e,n){var r=Vd(t,this._firestore),i=Ld(r.converter,e,n),o=$p(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Vd(t,this._firestore);return o="string"==typeof(e=wt(e))||e instanceof Fp?nd(this._dataReader,"Transaction.update",s._key,e,n,r):ed(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Vd(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Hd(){if("undefined"==typeof Uint8Array)throw new po(fo.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function zd(){if("undefined"==typeof atob)throw new po(fo.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Wd=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return zd(),new t(Vp.fromBase64String(e))},t.fromUint8Array=function(e){return Hd(),new t(Vp.fromUint8Array(e))},t.prototype.toBase64=function(){return zd(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Hd(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),$d=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Mp(t=bp(t,Rp));var n=Pp(t),r=t._freezeSettings(),i=new Bf;return Lp(n,i,new jf(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Mp(t=bp(t,Rp));var e=Pp(t),n=t._freezeSettings(),r=new Bf;return Lp(e,r,new qf(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new po(fo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new ic;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return nt(e,void 0,void 0,(function(){var e;return rt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return nt(this,void 0,void 0,(function(){var e;return rt(this,(function(n){switch(n.label){case 0:return ac.yt()?(e=t+"main",[4,ac.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(yh(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),Qd=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof op||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||bo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=bp(t,Tp))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&bo("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=et({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[at.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),at.encodeString(JSON.stringify(o),!1),""].join(".")}(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new po(fo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new cp(new ap(o,new Hh(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return nt(e,void 0,void 0,(function(){var e,n;return rt(this,(function(r){switch(r.label){case 0:return[4,Yf(t)];case 1:return e=r.sent(),[4,Zf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Eo(t);return e.Or.delete(0),ml(e)}(n))]}}))}))}))}(Pp(bp(this._delegate,Rp)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return nt(e,void 0,void 0,(function(){var e,n;return rt(this,(function(r){switch(r.label){case 0:return[4,Yf(t)];case 1:return e=r.sent(),[4,Zf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return nt(this,void 0,void 0,(function(){var e;return rt(this,(function(n){switch(n.label){case 0:return(e=Eo(t)).Or.add(0),[4,yl(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Pp(bp(this._delegate,Rp)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&vp("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new ic;return t.asyncQueue.enqueueAndForget((function(){return nt(e,void 0,void 0,(function(){var e;return rt(this,(function(r){switch(r.label){case 0:return e=mf,[4,tp(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Pp(bp(this._delegate,Rp)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Kf(e);return t.asyncQueue.enqueueAndForget((function(){return nt(n,void 0,void 0,(function(){var e;return rt(this,(function(n){switch(n.label){case 0:return e=function(t,e){Eo(t).Gr.add(e),e.next()},[4,ep(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return nt(n,void 0,void 0,(function(){var e;return rt(this,(function(n){switch(n.label){case 0:return e=function(t,e){Eo(t).Gr.delete(e)},[4,ep(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Pp(t=bp(t,Rp)),Op(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new po(fo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new cv(this,Ap(this._delegate,t))}catch(t){throw ev(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new tv(this,Np(this._delegate,t))}catch(t){throw ev(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new sv(this,function(t,e){if(t=bp(t,Tp),pp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new po(fo.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Sp(t,null,function(t){return new xs(Lo.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw ev(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new ic;return t.asyncQueue.enqueueAndForget((function(){return nt(n,void 0,void 0,(function(){var n;return rt(this,(function(i){switch(i.label){case 0:return[4,function(t){return Xf(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new Hf(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(Pp(t),(function(n){return e(new Gd(t,n))}))}(this._delegate,(function(n){return t(new Yd(e,n))}))},t.prototype.batch=function(){var t=this;return Pp(this._delegate),new Jd(new Fd(this._delegate,(function(e){return Bd(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new po(fo.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new po(fo.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Xd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return tt(e,t),e.prototype.convertBytes=function(t){return new Wd(new Vp(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return tv.eu(e,this.firestore,null)},e}(xd);var Yd=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Xd(t)}return t.prototype.get=function(t){var e=this,n=hv(t);return this._delegate.get(n).then((function(t){return new iv(e._firestore,new md(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=hv(t);return n?(dp("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=hv(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,st([s,e,n],i)),this},t.prototype.delete=function(t){var e=hv(t);return this._delegate.delete(e),this},t}(),Jd=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=hv(t);return n?(dp("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=hv(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,st([s,e,n],i)),this},t.prototype.delete=function(t){var e=hv(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Zd=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new yd(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new ov(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Xd(e),n),i.set(n,o)),o},t}();Zd.su=new WeakMap;var tv=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Xd(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new po(fo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Ep(n._delegate,r,new Xo(e)))},t.eu=function(e,n,r){return new t(n,new Ep(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new cv(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new cv(this.firestore,Ap(this._delegate,t))}catch(t){throw ev(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=wt(t))instanceof Ep&&kp(this._delegate,t)},t.prototype.set=function(t,e){e=dp("DocumentReference.set",e);try{return function(t,e,n){t=bp(t,Ep);var r=bp(t.firestore,Rp),i=Ld(t.converter,e,n);return Bd(r,[$p(Wp(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,da.none())])}(this._delegate,t,e)}catch(t){throw ev(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?jd(this._delegate,t):jd.apply(void 0,st([this._delegate,t,e],n))}catch(t){throw ev(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Bd(bp((t=this._delegate).firestore,Rp),[new Da(t._key,da.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=nv(e),i=rv(e,(function(e){return new iv(t.firestore,new md(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return qd(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=bp(t,Ep);var e=bp(t.firestore,Rp),n=Pp(e),r=new Ud(e);return function(t,e){var n=this,r=new ic;return t.asyncQueue.enqueueAndForget((function(){return nt(n,void 0,void 0,(function(){var n;return rt(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return nt(this,void 0,void 0,(function(){var r,i;return rt(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Eo(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new po(fo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Kl(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Jf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new md(e,r,t._key,n,new gd(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=bp(t,Ep);var e=bp(t.firestore,Rp);return np(Pp(e),t._key,{source:"server"}).then((function(n){return Kd(e,t,n)}))}(this._delegate):function(t){t=bp(t,Ep);var e=bp(t.firestore,Rp);return np(Pp(e),t._key).then((function(n){return Kd(e,t,n)}))}(this._delegate)).then((function(t){return new iv(e.firestore,new md(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Zd.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function ev(t,e,n){return t.message=t.message.replace(e,n),t}function nv(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Op(r))return r}return{}}function rv(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Op(t[0])?t[0]:Op(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var iv=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new tv(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Id(this._delegate,t._delegate)},t}(),ov=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tt(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(iv),sv=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Xd(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Sd(this._delegate,function(t,e,n){var r=e,i=vd("where",t);return new _d(i,r,n)}(e,n,r)))}catch(e){throw ev(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Sd(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=vd("orderBy",t);return new Ad(r,n)}(e,n)))}catch(e){throw ev(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Sd(this._delegate,function(t){return wp("limit",t),new Nd("limit",t,"F")}(e)))}catch(e){throw ev(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Sd(this._delegate,function(t){return wp("limitToLast",t),new Nd("limitToLast",t,"L")}(e)))}catch(e){throw ev(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Sd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new kd("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw ev(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Sd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new kd("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw ev(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Sd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Dd("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw ev(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Sd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Dd("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw ev(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Dp(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=bp(t,Sp);var e=bp(t.firestore,Rp),n=Pp(e),r=new Ud(e);return function(t,e){var n=this,r=new ic;return t.asyncQueue.enqueueAndForget((function(){return nt(n,void 0,void 0,(function(){var n;return rt(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return nt(this,void 0,void 0,(function(){var r,i,o,s,a;return rt(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Oh(t,e,!0)];case 1:return a=u.sent(),r=new rf(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Kl(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,Jf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new bd(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=bp(t,Sp);var e=bp(t.firestore,Rp),n=Pp(e),r=new Ud(e);return rp(n,t._query,{source:"server"}).then((function(n){return new bd(e,r,t,n)}))}(this._delegate):function(t){t=bp(t,Sp);var e=bp(t.firestore,Rp),n=Pp(e),r=new Ud(e);return Td(t._query),rp(n,t._query).then((function(n){return new bd(e,r,t,n)}))}(this._delegate)).then((function(t){return new uv(e.firestore,new bd(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=nv(e),i=rv(e,(function(e){return new uv(t.firestore,new bd(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return qd(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Zd.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),av=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new ov(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),uv=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new sv(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new ov(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new av(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new ov(n._firestore,r))}))},t.prototype.isEqual=function(t){return Id(this._delegate,t._delegate)},t}(),cv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return tt(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new tv(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new tv(this.firestore,void 0===t?Np(this._delegate):Np(this._delegate,t))}catch(t){throw ev(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=bp(t.firestore,Rp),r=Np(t),i=Ld(t.converter,e);return Bd(n,[$p(Wp(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,da.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new tv(e.firestore,t)}))},e.prototype.isEqual=function(t){return kp(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Zd.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(sv);function hv(t){return bp(t,Ep)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var lv,fv=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Fp.bind.apply(Fp,st([void 0],t)))}return t.documentId=function(){return new t(Fo.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=wt(t))instanceof Fp&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),pv=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Yp("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Qp("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Jp("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zp("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new td("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),dv={Firestore:Qd,GeoPoint:jp,Timestamp:Do,Blob:Wd,Transaction:Yd,WriteBatch:Jd,DocumentReference:tv,DocumentSnapshot:iv,Query:sv,QueryDocumentSnapshot:ov,QuerySnapshot:uv,CollectionReference:cv,FieldPath:fv,FieldValue:pv,setLogLevel:function(t){var e;e=t,vo.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new It("firestore",(function(t){return function(t,e){return new Qd(t,new Rp(t,e),new $d)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},dv)))})(lv=Qt),lv.registerVersion("@firebase/firestore","2.3.10");Qt.initializeApp({apiKey:"AIzaSyD-pzp1xZtmduu3mjWD77pVgGBKhNF1n30",authDomain:"koopkit-c38c2.firebaseapp.com",projectId:"koopkit-c38c2",storageBucket:"koopkit-c38c2.appspot.com",messagingSenderId:"1065077530630",appId:"1:1065077530630:web:165285110dcd11c0446387",measurementId:"G-4TSBJTR9KW"});const vv=Qt.auth(),gv=new Qt.auth.GoogleAuthProvider;function mv(e){let n;return{c(){n=d("...")},m(t,e){h(t,n,e)},p:t,i:t,o:t,d(t){t&&l(n)}}}function yv(e){let n,r,i,o,s,a,u,p;return i=new J({}),{c(){n=f("div"),r=f("div"),U(i.$$.fragment),o=v(),s=f("div"),s.textContent="Google Hesabınız ile Giriş Yapın",y(r,"class","google-logo svelte-1qd1xy4"),y(s,"class","login-text svelte-1qd1xy4"),y(n,"class","login-btn svelte-1qd1xy4")},m(t,l){h(t,n,l),c(n,r),j(i,r,null),c(n,o),c(n,s),a=!0,u||(p=g(n,"click",e[1]),u=!0)},p:t,i(t){a||(F(i.$$.fragment,t),a=!0)},o(t){V(i.$$.fragment,t),a=!1},d(t){t&&l(n),q(i),u=!1,p()}}}function bv(e){let n,r,i;return{c(){n=f("input"),y(n,"type","button"),n.value="Çıkış",y(n,"class","svelte-1qd1xy4")},m(t,o){h(t,n,o),r||(i=g(n,"click",e[2]),r=!0)},p:t,i:t,o:t,d(t){t&&l(n),r=!1,i()}}}function wv(t){let e,n,r,i;const o=[bv,yv,mv],s=[];function a(t,e){return t[0]?0:null===t[0]?1:2}return n=a(t),r=s[n]=o[n](t),{c(){e=f("section"),r.c(),y(e,"class","svelte-1qd1xy4")},m(t,r){h(t,e,r),s[n].m(e,null),i=!0},p(t,[i]){let u=n;n=a(t),n===u?s[n].p(t,i):(L(),V(s[u],1,1,(()=>{s[u]=null})),M(),r=s[n],r?r.p(t,i):(r=s[n]=o[n](t),r.c()),F(r,1),r.m(e,null))},i(t){i||(F(r),i=!0)},o(t){V(r),i=!1},d(t){t&&l(e),s[n].d()}}}function Iv(t,e,n){const r=I();let i;vv.onAuthStateChanged((t=>{t?(n(0,i=t),r("message",{user:i})):(n(0,i=null),r("message",{user:i}))}));return[i,()=>vv.signInWithPopup(gv),()=>vv.signOut()]}Qt.firestore();class Tv extends G{constructor(t){super(),K(this,t,Iv,wv,o,{})}}function Ev(e){let n,r,i,o,s,a,p,g,m,w,I,T,E,S,_,A,N,k,D,C,O,R,P,x,L,M,F,V,U,j,q,B,K,G,H,z,W,$,Q,X,Y=e[0]?.uid+"",J=e[0]?.displayName+"",Z=e[0]?.email+"",tt=e[0]?.emailVerified+"",et=e[0]?.photoURL+"",nt=e[0]?.isAnonymous+"",rt=JSON.stringify(e[0]?.providerData)+"";return{c(){n=f("section"),r=f("img"),o=v(),s=f("h1"),s.textContent="Kullanıcı Profili",a=v(),p=f("p"),g=f("b"),g.textContent="uid:",m=v(),w=d(Y),I=v(),T=f("p"),E=f("b"),E.textContent="displayName:",S=v(),_=d(J),A=v(),N=f("p"),k=f("b"),k.textContent="email:",D=v(),C=d(Z),O=v(),R=f("p"),P=f("b"),P.textContent="emailVerified:",x=v(),L=d(tt),M=v(),F=f("p"),V=f("b"),V.textContent="photoURL:",U=v(),j=d(et),q=v(),B=f("p"),K=f("b"),K.textContent="isAnonymous:",G=v(),H=d(nt),z=v(),W=f("p"),$=f("b"),$.textContent="providerData:",Q=v(),X=d(rt),u(r.src,i=e[0]?.photoURL)||y(r,"src",i),y(r,"alt","Profil Resmi")},m(t,e){h(t,n,e),c(n,r),c(n,o),c(n,s),c(n,a),c(n,p),c(p,g),c(p,m),c(p,w),c(n,I),c(n,T),c(T,E),c(T,S),c(T,_),c(n,A),c(n,N),c(N,k),c(N,D),c(N,C),c(n,O),c(n,R),c(R,P),c(R,x),c(R,L),c(n,M),c(n,F),c(F,V),c(F,U),c(F,j),c(n,q),c(n,B),c(B,K),c(B,G),c(B,H),c(n,z),c(n,W),c(W,$),c(W,Q),c(W,X)},p(t,[e]){1&e&&!u(r.src,i=t[0]?.photoURL)&&y(r,"src",i),1&e&&Y!==(Y=t[0]?.uid+"")&&b(w,Y),1&e&&J!==(J=t[0]?.displayName+"")&&b(_,J),1&e&&Z!==(Z=t[0]?.email+"")&&b(C,Z),1&e&&tt!==(tt=t[0]?.emailVerified+"")&&b(L,tt),1&e&&et!==(et=t[0]?.photoURL+"")&&b(j,et),1&e&&nt!==(nt=t[0]?.isAnonymous+"")&&b(H,nt),1&e&&rt!==(rt=JSON.stringify(t[0]?.providerData)+"")&&b(X,rt)},i:t,o:t,d(t){t&&l(n)}}}function Sv(t,e,n){let{user:r}=e;return t.$$set=t=>{"user"in t&&n(0,r=t.user)},[r]}class _v extends G{constructor(t){super(),K(this,t,Sv,Ev,o,{user:0})}}function Av(t){let e,n,i,o,s,a,u,c;return e=new _v({props:{user:t[0]}}),{c(){U(e.$$.fragment),n=v(),i=f("input"),o=v(),s=f("input"),y(i,"type","button"),i.value="Test Notification",y(s,"type","button"),s.value="Test Notification2"},m(r,l){j(e,r,l),h(r,n,l),h(r,i,l),h(r,o,l),h(r,s,l),a=!0,u||(c=[g(i,"click",t[2]),g(s,"click",t[3])],u=!0)},p(t,n){const r={};1&n&&(r.user=t[0]),e.$set(r)},i(t){a||(F(e.$$.fragment,t),a=!0)},o(t){V(e.$$.fragment,t),a=!1},d(t){q(e,t),t&&l(n),t&&l(i),t&&l(o),t&&l(s),u=!1,r(c)}}}function Nv(t){let e,n,r,i,o,s,a,u,p,d,g,m;e=new X({}),d=new Tv({}),d.$on("message",t[1]);let b=t[0]&&Av(t);return{c(){U(e.$$.fragment),n=v(),r=f("main"),i=f("div"),i.innerHTML='<img src="../icon/icon192.png" alt="KoopKit Logo"/>',o=v(),s=f("h1"),s.textContent="KoopKit",a=v(),u=f("p"),u.textContent="Kooperatif Destek Kiti",p=v(),U(d.$$.fragment),g=v(),b&&b.c(),y(i,"class","logo svelte-tvagfq"),y(s,"class","svelte-tvagfq"),y(u,"class","svelte-tvagfq"),y(r,"class","svelte-tvagfq")},m(t,l){j(e,t,l),h(t,n,l),h(t,r,l),c(r,i),c(r,o),c(r,s),c(r,a),c(r,u),c(r,p),j(d,r,null),c(r,g),b&&b.m(r,null),m=!0},p(t,[e]){t[0]?b?(b.p(t,e),1&e&&F(b,1)):(b=Av(t),b.c(),F(b,1),b.m(r,null)):b&&(L(),V(b,1,1,(()=>{b=null})),M())},i(t){m||(F(e.$$.fragment,t),F(d.$$.fragment,t),F(b),m=!0)},o(t){V(e.$$.fragment,t),V(d.$$.fragment,t),V(b),m=!1},d(t){q(e,t),t&&l(n),t&&l(r),q(d),b&&b.d()}}}function kv(t,e,n){let r;const i=()=>{navigator.serviceWorker.getRegistration().then((t=>{var e={body:"Here is a notification body!",icon:"https://lh3.googleusercontent.com/a-/AOh14GgwHbcIDMRINoI2KnC2-x_DUAFtPPPGc4Ac_PrnVg=s96-c",vibrate:[100,50,100],data:{dateOfArrival:Date.now(),primaryKey:1},actions:[{action:"explore",title:"KEŞFET",icon:"https://raw.githubusercontent.com/ulvido/koopkit-website/master/images/checkmark-60.png"},{action:"close",title:"KAPAT",icon:"https://raw.githubusercontent.com/ulvido/koopkit-website/master/images/xmark-60.png"}],image:"https://lh3.googleusercontent.com/a-/AOh14GgwHbcIDMRINoI2KnC2-x_DUAFtPPPGc4Ac_PrnVg=s96-c",badge:"https://lh3.googleusercontent.com/a-/AOh14GgwHbcIDMRINoI2KnC2-x_DUAFtPPPGc4Ac_PrnVg=s96-c"};t.showNotification("Hello world!",e)}))};return[r,t=>{n(0,r=t.detail.user)},()=>{Notification.requestPermission().then((t=>{if("granted"===t){(()=>{new Notification("Selam, hoşgeldin!",{body:"Seni aramızda gördüğümüz için çok mutluyuz :)",icon:"https://lh3.googleusercontent.com/a-/AOh14GgwHbcIDMRINoI2KnC2-x_DUAFtPPPGc4Ac_PrnVg=s96-c"})})()}}))},()=>{"granted"==Notification.permission?i():Notification.requestPermission().then((t=>{"granted"===t&&i()}))}]}return new class extends G{constructor(t){super(),K(this,t,kv,Nv,o,{})}}({target:document.body})}();
