import{S as e,i as t,s as o,a as n,b as s,c as i,d as r,n as l,e as a,f as c,g as d,h as u,m as p,l as h,t as m,j as v,k as f,o as g,p as w,q as y,r as b,u as j,v as C,w as O,x as V,y as $,z as k,A as E,B as D,C as T,D as A,E as x}from"./vendor.js";function S(e){let t,o;return{c(){t=n("svg"),o=n("path"),s(o,"stroke-linecap","round"),s(o,"stroke-linejoin","round"),s(o,"stroke-width","2"),s(o,"d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"),s(t,"width","100%"),s(t,"height","100%"),s(t,"viewBox","0 0 24 24"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"xmlns","http://www.w3.org/2000/svg")},m(e,n){i(e,t,n),r(t,o)},p:l,i:l,o:l,d(e){e&&a(t)}}}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class P extends e{constructor(e){super(),t(this,e,null,S,o,{})}}function _(e){let t,o,n,g,w,y,b,j,C;return g=new P({}),{c(){t=c("div"),o=c("div"),n=c("div"),d(g.$$.fragment),w=u(),y=c("div"),y.textContent="Bu Cihaza Yükle",s(n,"class","icon svelte-usjklv"),s(y,"class","text svelte-usjklv"),s(o,"class","btn svelte-usjklv"),s(t,"class","wrapper svelte-usjklv")},m(s,l){i(s,t,l),r(t,o),r(o,n),p(g,n,null),r(o,w),r(o,y),b=!0,j||(C=h(o,"click",e[2]),j=!0)},p:l,i(e){b||(m(g.$$.fragment,e),b=!0)},o(e){v(g.$$.fragment,e),b=!1},d(e){e&&a(t),f(g),j=!1,C()}}}function z(e){let t,o,n,s,r=e[0]&&_(e);return{c(){r&&r.c(),t=g()},m(l,a){r&&r.m(l,a),i(l,t,a),o=!0,n||(s=[h(window,"beforeinstallprompt",w(e[1])),h(window,"appinstalled",w(e[3]))],n=!0)},p(e,[o]){e[0]?r?(r.p(e,o),1&o&&m(r,1)):(r=_(e),r.c(),m(r,1),r.m(t.parentNode,t)):r&&(y(),v(r,1,1,(()=>{r=null})),b())},i(e){o||(m(r),o=!0)},o(e){v(r),o=!1},d(e){r&&r.d(e),e&&a(t),n=!1,j(s)}}}function I(e,t,o){let n,s=!1;return[s,e=>{n=e,o(0,s=!0)},()=>{o(0,s=!1),n.prompt(),n.userChoice.then((e=>{"accepted"===e.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),n=null})).catch(console.error)},()=>{n=null,console.log("PWA was installed")}]}class B extends e{constructor(e){super(),t(this,e,I,z,o,{})}}function N(e){let t,o;return{c(){t=c("img"),C(t.src,o="/glifor.jpeg")||s(t,"src","/glifor.jpeg"),s(t,"alt","glifor"),s(t,"class","svelte-1rp47v9")},m(o,n){i(o,t,n),e[9](t)},p:l,d(o){o&&a(t),e[9](null)}}}function L(e){let t,o,n,d,p,h,m,v,f,g,w,y=e[0]&&N(e);return{c(){t=c("div"),y&&y.c(),o=u(),n=c("canvas"),d=u(),p=c("p"),h=O("SIMD Supported: "),m=O(e[2]),v=u(),f=c("p"),g=O("THREADS Supported: "),w=O(e[3]),s(n,"class","svelte-1rp47v9"),s(t,"class","wrapper svelte-1rp47v9")},m(s,l){i(s,t,l),y&&y.m(t,null),r(t,o),r(t,n),e[10](n),r(t,d),r(t,p),r(p,h),r(p,m),r(t,v),r(t,f),r(f,g),r(f,w)},p(e,[n]){e[0]?y?y.p(e,n):(y=N(e),y.c(),y.m(t,o)):y&&(y.d(1),y=null),4&n&&V(m,e[2]),8&n&&V(w,e[3])},i:l,o:l,d(o){o&&a(t),y&&y.d(),e[10](null)}}}function M(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(s,i){function r(e){try{a(n.next(e))}catch(t){i(t)}}function l(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,l)}a((n=n.apply(e,t||[])).next())}))};let s,{imageElement:i=null}=t,{width:r=300}=t,{height:l=150}=t,a=null,c=null,d=!1,u=!1,p=!1,{pathConfig:h={asm:"/opencv-4.7.0/build_js/bin/opencv.js",wasm:"/opencv-4.7.0/build_wasm/bin/opencv.js",threads:"/opencv-4.7.0/build_mt/bin/opencv.js",simd:"/opencv-4.7.0/build_simd/bin/opencv.js",threadsSimd:"/opencv-4.7.0/build_mtSIMD/bin/opencv.js"}}=t;const m=()=>n(void 0,void 0,void 0,(function*(){yield f().then((e=>n(void 0,void 0,void 0,(function*(){yield((e,t)=>new Promise(((o,n)=>{let s="",i="",r="",l="",a="",c="";e instanceof Object||n({action:"LOAD_OPENCV",payload:{status:new Error("The first input should be a object that points the path to the OpenCV.js")}}),"asm"in e&&(i=e.asm),"wasm"in e&&(r=e.wasm),"threads"in e&&(a=e.threads),"simd"in e&&(l=e.simd),"threadsSimd"in e&&(c=e.threadsSimd);let d=!("undefined"==typeof WebAssembly);d||""!==s||""==i?d||""!=i||n({action:"LOAD_OPENCV",payload:{status:new Error("The browser supports the Asm.js only, but the path of OpenCV.js for Asm.js is empty")}}):(s=i,console.log("The OpenCV.js for Asm.js is loaded now"));let u=!!d&&t.simd,p=!!d&&t.threads;console.log("simdSupported",u),console.log("threadsSupported",p),u&&p&&""!=c?(s=c,console.log("The OpenCV.js with simd and threads optimization is loaded now")):u&&""!=l?(p&&""===c&&console.log("The browser supports simd and threads, but the path of OpenCV.js with simd and threads optimization is empty"),s=l,console.log("The OpenCV.js with simd optimization is loaded now.")):p&&""!=a?(u&&""===c&&console.log("The browser supports simd and threads, but the path of OpenCV.js with simd and threads optimization is empty"),s=a,console.log("The OpenCV.js with threads optimization is loaded now")):d&&""!=r?(u&&p&&console.log("The browser supports simd and threads, but the path of OpenCV.js with simd and threads optimization is empty"),u&&console.log("The browser supports simd optimization, but the path of OpenCV.js with simd optimization is empty"),p&&console.log("The browser supports threads optimization, but the path of OpenCV.js with threads optimization is empty"),s=r,console.log("The OpenCV.js for wasm is loaded now")):d&&(console.log("The browser supports wasm, but the path of OpenCV.js for wasm is empty"),""!=i&&(s=i,console.log("The OpenCV.js for Asm.js is loaded as fallback."))),""===s&&n({action:"LOAD_OPENCV",payload:{status:new Error("No available OpenCV.js, please check your paths")}});let h=document.createElement("script");h.setAttribute("async",""),h.setAttribute("type","text/javascript"),h.addEventListener("load",(()=>{o({action:"LOAD_OPENCV",payload:{status:"OK"}})})),h.addEventListener("error",(()=>{console.log("Failed to load opencv.js")})),h.src=s;let m=document.getElementsByTagName("script")[0];m.src!=s&&m.parentNode.insertBefore(h,m)})))(h,e).then((()=>n(void 0,void 0,void 0,(function*(){window.cv=yield cv,console.log("opencv: ",cv)})))).catch(console.error)})))).catch(console.error)})),v=(e,t)=>()=>{try{if(!p)return;let o=Date.now();t.drawImage(e,0,0,r,l),a.data.set(t.getImageData(0,0,r,l).data),cv.cvtColor(a,c,cv.COLOR_RGBA2GRAY),cv.imshow(s,c);let n=1e3/30-(Date.now()-o);setTimeout(v(e,t),n)}catch(o){console.error(o)}},f=()=>n(void 0,void 0,void 0,(function*(){return{simd:yield k(),threads:yield E()}}));return $((()=>{f().then((e=>{o(2,d=e.simd),o(3,u=e.threads)})).catch(console.error)})),e.$$set=e=>{"imageElement"in e&&o(0,i=e.imageElement),"width"in e&&o(4,r=e.width),"height"in e&&o(5,l=e.height),"pathConfig"in e&&o(6,h=e.pathConfig)},[i,s,d,u,r,l,h,e=>n(void 0,void 0,void 0,(function*(){try{window.cv||(yield m().catch(console.error)),a=new cv.Mat(l,r,cv.CV_8UC4),c=new cv.Mat(l,r,cv.CV_8UC1);let t=s.getContext("2d",{willReadFrequently:!0});p=!0,setTimeout(v(e,t),0)}catch(t){console.error(t)}})),()=>n(void 0,void 0,void 0,(function*(){return new Promise(((e,t)=>{try{p=!1;s.getContext("2d").clearRect(0,0,s.width,s.height),o(1,s.width=300,s),o(1,s.height=150,s),setTimeout((()=>{a&&a.delete(),c&&c.delete(),a=null,c=null,console.log("cleaned"),e(!0)}),0)}catch(n){console.error(n),t(!1)}}))})),function(e){D[e?"unshift":"push"]((()=>{i=e,o(0,i)}))},function(e){D[e?"unshift":"push"]((()=>{s=e,o(1,s)}))}]}class R extends e{constructor(e){super(),t(this,e,M,L,o,{imageElement:0,width:4,height:5,pathConfig:6,startVideoProcess:7,stopVideoProcess:8})}get startVideoProcess(){return this.$$.ctx[7]}get stopVideoProcess(){return this.$$.ctx[8]}}function U(e,t,o){const n=e.slice();return n[21]=t[o],n}function H(e){let t,o,n,l;return{c(){t=c("button"),o=O("GET VIDEO DEVICES"),s(t,"type","button"),t.disabled=e[7],s(t,"class","svelte-1y9h06d")},m(s,a){i(s,t,a),r(t,o),n||(l=h(t,"click",e[11]),n=!0)},p(e,o){128&o&&(t.disabled=e[7])},d(e){e&&a(t),n=!1,l()}}}function W(e){let t,o,n,l;return{c(){t=c("button"),o=O("STOP"),s(t,"type","button"),t.disabled=e[7],s(t,"class","svelte-1y9h06d")},m(s,a){i(s,t,a),r(t,o),n||(l=h(t,"click",e[10]),n=!0)},p(e,o){128&o&&(t.disabled=e[7])},d(e){e&&a(t),n=!1,l()}}}function q(e){let t,o,n,r=Object.keys(e[8]),l=[];for(let s=0;s<r.length;s+=1)l[s]=G(U(e,r,s));return{c(){t=c("p"),t.textContent="Supported Constraints",o=u(),n=c("ul");for(let e=0;e<l.length;e+=1)l[e].c();s(t,"class","svelte-1y9h06d")},m(e,s){i(e,t,s),i(e,o,s),i(e,n,s);for(let t=0;t<l.length;t+=1)l[t].m(n,null)},p(e,t){if(256&t){let o;for(r=Object.keys(e[8]),o=0;o<r.length;o+=1){const s=U(e,r,o);l[o]?l[o].p(s,t):(l[o]=G(s),l[o].c(),l[o].m(n,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=r.length}},d(e){e&&a(t),e&&a(o),e&&a(n),T(l,e)}}}function G(e){let t,o,n=e[21]+"";return{c(){t=c("li"),o=O(n)},m(e,n){i(e,t,n),r(t,o)},p(e,t){256&t&&n!==(n=e[21]+"")&&V(o,n)},d(e){e&&a(t)}}}function F(e){var t;let o,n,l,g,w,y,b,C,$,k,E,D,T,A,x,S,P,_,z,I,B,N,L,M=(null==(t=e[5][e[6]])?void 0:t.deviceId)+"";function U(e,t){return e[4]?W:H}let G=U(e),F=G(e),K={width:e[1],height:e[2]};E=new R({props:K}),e[15](E);let Y=e[8]&&q(e);return{c(){o=c("div"),n=c("div"),l=c("video"),g=u(),w=c("div"),F.c(),y=u(),b=c("button"),C=O("NEXT CAMERA »"),k=u(),d(E.$$.fragment),D=u(),T=c("p"),A=O("Selected Device: "),x=O(e[6]),S=u(),P=c("p"),_=O("Selected DeviceId: "),z=O(M),I=u(),Y&&Y.c(),l.autoplay=!0,l.playsInline=!0,s(l,"class","svelte-1y9h06d"),s(n,"class","video-wrapper svelte-1y9h06d"),s(b,"type","button"),b.disabled=$=e[7]||!e[4]||e[5].length<2,s(b,"class","svelte-1y9h06d"),s(w,"class","buttons svelte-1y9h06d"),s(T,"class","svelte-1y9h06d"),s(P,"class","svelte-1y9h06d"),s(o,"class","wrapper svelte-1y9h06d")},m(t,s){i(t,o,s),r(o,n),r(n,l),e[13](l),r(o,g),r(o,w),F.m(w,null),r(w,y),r(w,b),r(b,C),r(o,k),p(E,o,null),r(o,D),r(o,T),r(T,A),r(T,x),r(o,S),r(o,P),r(P,_),r(P,z),r(o,I),Y&&Y.m(o,null),B=!0,N||(L=[h(window,"orientationchange",e[12]),h(l,"loadedmetadata",e[14]),h(b,"click",e[9])],N=!0)},p(e,[t]){var n;G===(G=U(e))&&F?F.p(e,t):(F.d(1),F=G(e),F&&(F.c(),F.m(w,y))),(!B||176&t&&$!==($=e[7]||!e[4]||e[5].length<2))&&(b.disabled=$);const s={};2&t&&(s.width=e[1]),4&t&&(s.height=e[2]),E.$set(s),(!B||64&t)&&V(x,e[6]),(!B||96&t)&&M!==(M=(null==(n=e[5][e[6]])?void 0:n.deviceId)+"")&&V(z,M),e[8]?Y?Y.p(e,t):(Y=q(e),Y.c(),Y.m(o,null)):Y&&(Y.d(1),Y=null)},i(e){B||(m(E.$$.fragment,e),B=!0)},o(e){v(E.$$.fragment,e),B=!1},d(t){t&&a(o),e[13](null),F.d(),e[15](null),f(E),Y&&Y.d(),N=!1,j(L)}}}function K(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(s,i){function r(e){try{a(n.next(e))}catch(t){i(t)}}function l(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,l)}a((n=n.apply(e,t||[])).next())}))};let s,i,r,l,a=A({ua:navigator.userAgent}),c=300,d=150,u=[],p=!0;let h;$((()=>{console.log(x.browserDetails.browser," : ",x.browserDetails.version),o(8,h=navigator.mediaDevices.getSupportedConstraints()),o(7,p=!1)}));return[s,c,d,i,r,u,l,p,h,()=>n(void 0,void 0,void 0,(function*(){var e;o(7,p=!0),o(6,l=(l+1)%u.length);let t={audio:!1,video:{deviceId:{exact:null===(e=u[l])||void 0===e?void 0:e.deviceId}}};r.getTracks().forEach((e=>{console.log(e),"live"==e.readyState&&"video"===e.kind&&(e.stop(),e.applyConstraints(t))})),o(0,s.srcObject=null,s),o(4,r=null),o(4,r=yield navigator.mediaDevices.getUserMedia(t)),console.log(r),o(0,s.srcObject=r,s),o(7,p=!1)})),()=>n(void 0,void 0,void 0,(function*(){o(7,p=!0),i.stopVideoProcess().then((()=>{o(6,l=a?1:0),o(5,u=[]),r.getTracks().forEach((e=>{console.log(e),"live"==e.readyState&&"video"===e.kind&&e.stop()})),o(4,r=null),o(0,s.srcObject=null,s),o(7,p=!1)})).catch(console.error)})),()=>n(void 0,void 0,void 0,(function*(){o(7,p=!0),o(6,l=a?1:0);let e,t=yield navigator.mediaDevices.enumerateDevices();console.log(t),o(5,u=t.filter((e=>"videoinput"===(null==e?void 0:e.kind)))),console.log(u),e=a?{audio:!1,video:{facingMode:{exact:"environment"}}}:{audio:!1,video:!0},o(4,r=yield navigator.mediaDevices.getUserMedia(e)),console.log(r),o(0,s.srcObject=r,s),i.startVideoProcess(s).then((()=>{o(7,p=!1)})).catch(console.error)})),()=>{r&&s&&i.stopVideoProcess().then((()=>{i.startVideoProcess(s).then((()=>{o(1,c=s.videoWidth),o(2,d=s.videoHeight)})).catch(console.error)})).catch(console.error)},function(e){D[e?"unshift":"push"]((()=>{s=e,o(0,s)}))},()=>{o(1,c=s.videoWidth),o(2,d=s.videoHeight),s.play()},function(e){D[e?"unshift":"push"]((()=>{i=e,o(3,i)}))}]}class Y extends e{constructor(e){super(),t(this,e,K,F,o,{})}}function X(e){let t,o,n,l,h,g,w,y,b;return t=new B({}),y=new Y({}),{c(){d(t.$$.fragment),o=u(),n=c("main"),l=c("p"),h=O("BarcodeApi: "),g=O(e[0]),w=u(),d(y.$$.fragment),s(l,"class","svelte-1biakuz"),s(n,"class","svelte-1biakuz")},m(e,s){p(t,e,s),i(e,o,s),i(e,n,s),r(n,l),r(l,h),r(l,g),r(n,w),p(y,n,null),b=!0},p(e,[t]){(!b||1&t)&&V(g,e[0])},i(e){b||(m(t.$$.fragment,e),m(y.$$.fragment,e),b=!0)},o(e){v(t.$$.fragment,e),v(y.$$.fragment,e),b=!1},d(e){f(t,e),e&&a(o),e&&a(n),f(y)}}}function J(e,t,o){let n=!1;return $((()=>{"BarcodeDetector"in window?(o(0,n=!0),console.log("Barcode Detector supported!"),new BarcodeDetector({formats:["code_39","codabar","ean_13"]})):(o(0,n=!1),console.log("Barcode Detector is not supported by this browser."))})),[n]}new class extends e{constructor(e){super(),t(this,e,J,X,o,{})}}({target:document.getElementById("app")});
