var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,l=(t,s,o)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[s]=o,a=(e,t)=>{for(var s in t||(t={}))n.call(t,s)&&l(e,s,t[s]);if(o)for(var s of o(t))r.call(t,s)&&l(e,s,t[s]);return e};import{w as i,S as c,i as u,s as d,a as p,b as g,c as m,d as f,n as v,e as h,f as y,g as b,h as k,m as w,l as x,t as $,j,k as O,o as I,p as S,q as A,r as K,u as z,v as C,x as L,y as N,z as P,A as B,B as D,C as G}from"./vendor.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();firebase.initializeApp({apiKey:"AIzaSyD-pzp1xZtmduu3mjWD77pVgGBKhNF1n30",authDomain:"koopkit-c38c2.firebaseapp.com",projectId:"koopkit-c38c2",storageBucket:"koopkit-c38c2.appspot.com",messagingSenderId:"1065077530630",appId:"1:1065077530630:web:165285110dcd11c0446387",measurementId:"G-4TSBJTR9KW"});const U=firebase.auth(),E=new firebase.auth.GoogleAuthProvider,M=()=>(U.languageCode="tr",U.signInWithPopup(E)),T=()=>U.signOut(),W=Gun(),H=W.user().recall({sessionStorage:!0}),_=(e=>{const{subscribe:o,set:n,update:r}=i(e);return U.onAuthStateChanged((e=>{r((e=>{return o=a({},e),t(o,s({loading:!1}));var o})),e?(console.log("firebase sign in"),r((e=>a({},e)))):(console.log("firebase sign out"),r((e=>a({},e))))})),{subscribe:o,signIn:()=>M().catch(console.error),signOut:()=>T().catch(console.error)}})({auth:U,signIn:M,signOut:T,loading:!0}),q=(e=>{const{subscribe:t,set:s,update:o}=i(e);return H._.sea&&s({status:"signed-in",user:H}),W.on("auth",(()=>{console.log("on auth çalıştı"),s({status:"signed-in",user:H})})),{subscribe:t,login:(e,t)=>{s({status:"unknown",user:null}),((e,t)=>new Promise(((s,o)=>{var n;(null==(n=null==H?void 0:H._)?void 0:n.sea)&&s(!0),console.log("Trying login with pin:",t),H.auth(e,t,(o=>{o.err&&"Wrong user or password."===o.err?H.create(e,t,(o=>{o.err&&"User already created!"===o.err?s(!1):o.pub?(console.log("User Not Exists! Now created."),H.auth(e,t,(()=>s(!0)))):console.log("Unknown error while login!")})):"User is already being created or authenticated!"===o.err||(console.log("gun giriş başarılı. bilinen bir hata yok.",o),s(!0))}))})))(e,t).then((e=>!1===e&&s({status:"wrong-pin",user:null}))).catch(console.error)},logout:()=>(async()=>{H.leave(),setTimeout((()=>{void 0===H._.sea&&console.log("Logged Out")}),200)})().then((()=>s({status:"signed-out",user:null}))).catch(console.error)}})({status:"unknown",user:null});function R(e){let t,s;return{c(){t=p("svg"),s=p("path"),g(s,"stroke-linecap","round"),g(s,"stroke-linejoin","round"),g(s,"stroke-width","2"),g(s,"d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"),g(t,"width","100%"),g(t,"height","100%"),g(t,"viewBox","0 0 24 24"),g(t,"fill","none"),g(t,"stroke","currentColor"),g(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){m(e,t,o),f(t,s)},p:v,i:v,o:v,d(e){e&&h(t)}}}class V extends c{constructor(e){super(),u(this,e,null,R,d,{})}}function F(e){let t,s,o,n,r,l,a,i,c;return n=new V({}),{c(){t=y("div"),s=y("div"),o=y("div"),b(n.$$.fragment),r=k(),l=y("div"),l.textContent="Bu Cihaza Yükle",g(o,"class","icon svelte-usjklv"),g(l,"class","text svelte-usjklv"),g(s,"class","btn svelte-usjklv"),g(t,"class","wrapper svelte-usjklv")},m(u,d){m(u,t,d),f(t,s),f(s,o),w(n,o,null),f(s,r),f(s,l),a=!0,i||(c=x(s,"click",e[2]),i=!0)},p:v,i(e){a||($(n.$$.fragment,e),a=!0)},o(e){j(n.$$.fragment,e),a=!1},d(e){e&&h(t),O(n),i=!1,c()}}}function J(e){let t,s,o,n,r=e[0]&&F(e);return{c(){r&&r.c(),t=I()},m(l,a){r&&r.m(l,a),m(l,t,a),s=!0,o||(n=[x(window,"beforeinstallprompt",S(e[1])),x(window,"appinstalled",S(e[3]))],o=!0)},p(e,[s]){e[0]?r?(r.p(e,s),1&s&&$(r,1)):(r=F(e),r.c(),$(r,1),r.m(t.parentNode,t)):r&&(A(),j(r,1,1,(()=>{r=null})),K())},i(e){s||($(r),s=!0)},o(e){j(r),s=!1},d(e){r&&r.d(e),e&&h(t),o=!1,z(n)}}}function Y(e,t,s){let o,n=!1;return[n,e=>{o=e,s(0,n=!0)},()=>{s(0,n=!1),o.prompt(),o.userChoice.then((e=>{"accepted"===e.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),o=null})).catch(console.error)},()=>{o=null,console.log("PWA was installed")}]}class Z extends c{constructor(e){super(),u(this,e,Y,J,d,{})}}function Q(e,t,s){const o=e.slice();return o[14]=t[s],o}function X(e){let t,s,o,n,r;return{c(){t=y("input"),s=k(),o=y("input"),g(t,"type","text"),g(o,"type","button"),o.value="BAĞLAN",g(o,"class","btn svelte-aykiax"),D(o,"margin-top","20px")},m(l,a){m(l,t,a),G(t,e[0]),m(l,s,a),m(l,o,a),n||(r=[x(t,"input",e[11]),x(o,"click",e[8])],n=!0)},p(e,s){1&s&&t.value!==e[0]&&G(t,e[0])},d(e){e&&h(t),e&&h(s),e&&h(o),n=!1,z(r)}}}function ee(e){let t,s,o,n,r,l,a,i;return{c(){t=y("input"),s=k(),o=y("form"),n=y("input"),r=k(),l=y("input"),g(t,"type","button"),g(t,"class","disconnect svelte-aykiax"),t.value="Bağlantıyı Kes",g(n,"id","msg-input"),g(n,"type","text"),g(n,"placeholder","mesajınız..."),g(n,"autocomplete","off"),g(n,"spellcheck","false"),g(n,"class","svelte-aykiax"),g(l,"class","btn svelte-aykiax"),g(l,"type","submit"),l.value="GÖNDER",g(o,"class","svelte-aykiax")},m(c,u){m(c,t,u),m(c,s,u),m(c,o,u),f(o,n),G(n,e[3]),f(o,r),f(o,l),a||(i=[x(t,"click",e[9]),x(n,"input",e[10]),x(o,"submit",S(e[7]))],a=!0)},p(e,t){8&t&&n.value!==e[3]&&G(n,e[3])},d(e){e&&h(t),e&&h(s),e&&h(o),a=!1,z(i)}}}function te(e){let t,s,o,n,r,l,a,i,c,u,d,p,v,b=e[14].user+"",w=e[14].date.toLocaleString("tr")+"",x=e[14].text+"";return{c(){t=y("div"),s=y("div"),o=y("div"),n=C(b),l=k(),a=y("div"),i=C(w),c=k(),u=y("div"),d=C(x),p=k(),g(o,"class","user"),g(o,"style",r=`color: ${e[6](e[14].user)}`),g(a,"class","date svelte-aykiax"),g(s,"class","title svelte-aykiax"),g(u,"class","text"),g(t,"class","message svelte-aykiax"),g(t,"style",v=`border-left: 4px solid ${e[6](e[14].user)};`)},m(e,r){m(e,t,r),f(t,s),f(s,o),f(o,n),f(s,l),f(s,a),f(a,i),f(t,c),f(t,u),f(u,d),f(t,p)},p(e,s){16&s&&b!==(b=e[14].user+"")&&L(n,b),16&s&&r!==(r=`color: ${e[6](e[14].user)}`)&&g(o,"style",r),16&s&&w!==(w=e[14].date.toLocaleString("tr")+"")&&L(i,w),16&s&&x!==(x=e[14].text+"")&&L(d,x),16&s&&v!==(v=`border-left: 4px solid ${e[6](e[14].user)};`)&&g(t,"style",v)},d(e){e&&h(t)}}}function se(e){let t,s;function o(e,t){return e[2]?ee:X}let n=o(e),r=n(e),l=e[4],a=[];for(let i=0;i<l.length;i+=1)a[i]=te(Q(e,l,i));return{c(){r.c(),t=k(),s=y("div");for(let e=0;e<a.length;e+=1)a[e].c();g(s,"class","messages svelte-aykiax")},m(e,o){r.m(e,o),m(e,t,o),m(e,s,o);for(let t=0;t<a.length;t+=1)a[t].m(s,null)},p(e,[i]){if(n===(n=o(e))&&r?r.p(e,i):(r.d(1),r=n(e),r&&(r.c(),r.m(t.parentNode,t))),80&i){let t;for(l=e[4],t=0;t<l.length;t+=1){const o=Q(e,l,t);a[t]?a[t].p(o,i):(a[t]=te(o),a[t].c(),a[t].m(s,null))}for(;t<a.length;t+=1)a[t].d(1);a.length=l.length}},i:v,o:v,d(e){r.d(e),e&&h(t),e&&h(s),N(a,e)}}}function oe(e,t,s){let o,n,r="ws://localhost:8000",l=!1,a="",c=i([]);P(e,c,(e=>s(4,o=e)));const u=["crimson","teal","blueviolet","chocolate","darkgreen","deeppink","royalblue"];return[r,n,l,a,o,c,e=>{let t=o.map((e=>e.user)).findIndex((t=>t==e));return u[t%u.length]},()=>{a.trim()&&(n.emit("message",{room:"General",text:a}),s(3,a=""))},()=>{l||(s(1,n=B(r)),n.on("connect",(()=>{console.log("Connected to socket server"),n.id,s(2,l=!0),console.log("joining room","General"),n.emit("join","General")})),n.on("message",(e=>{console.log("Message received",e),e.date=new Date(e.date),c.update((t=>[...t,e]))})),n.on("messages",(e=>{console.log("Messages received",e);let t=e.messages.map((e=>(e.date=new Date(e.date),e)));console.log(e),c.set(t)})))},()=>{n.close(),c.set([]),s(2,l=!1)},function(){a=this.value,s(3,a)},function(){r=this.value,s(0,r)}]}class ne extends c{constructor(e){super(),u(this,e,oe,se,d,{})}}function re(e){let t,s,o,n,r,l,a,i,c,u,d;return t=new Z({}),u=new ne({}),{c(){b(t.$$.fragment),s=k(),o=y("main"),n=y("div"),n.innerHTML='<img src="../icon/icon192.png" alt="KoopKit Logo"/>',r=k(),l=y("h1"),l.textContent="KoopKit",a=k(),i=y("p"),i.textContent="Kooperatif Destek Kiti",c=k(),b(u.$$.fragment),g(n,"class","logo svelte-g5dfzm"),g(l,"class","svelte-g5dfzm"),g(i,"class","svelte-g5dfzm"),g(o,"class","svelte-g5dfzm")},m(e,p){w(t,e,p),m(e,s,p),m(e,o,p),f(o,n),f(o,r),f(o,l),f(o,a),f(o,i),f(o,c),w(u,o,null),d=!0},p:v,i(e){d||($(t.$$.fragment,e),$(u.$$.fragment,e),d=!0)},o(e){j(t.$$.fragment,e),j(u.$$.fragment,e),d=!1},d(e){O(t,e),e&&h(s),e&&h(o),O(u)}}}function le(e,t,s){let o,n;var r;return P(e,q,(e=>s(1,o=e))),P(e,_,(e=>s(2,n=e))),e.$$.update=()=>{6&e.$$.dirty&&(console.log(n),console.log(o)),7&e.$$.dirty&&(null===s(0,r=null==n?void 0:n.auth)||void 0===r?void 0:r.currentUser)&&o.status},[r,o,n]}new class extends c{constructor(e){super(),u(this,e,le,re,d,{})}}({target:document.getElementById("app")});
